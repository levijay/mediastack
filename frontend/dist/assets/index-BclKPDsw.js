var Gx=Object.defineProperty;var Jx=(t,r,s)=>r in t?Gx(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var $c=(t,r,s)=>Jx(t,typeof r!="symbol"?r+"":r,s);function Xx(t,r){for(var s=0;s<r.length;s++){const a=r[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();function Zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vu={exports:{}},bl={},Hu={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=Symbol.for("react.element"),ep=Symbol.for("react.portal"),tp=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),ap=Symbol.for("react.provider"),np=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),ip=Symbol.for("react.memo"),cp=Symbol.for("react.lazy"),Oc=Symbol.iterator;function dp(t){return t===null||typeof t!="object"?null:(t=Oc&&t[Oc]||t["@@iterator"],typeof t=="function"?t:null)}var qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qu=Object.assign,Ku={};function Xs(t,r,s){this.props=t,this.context=r,this.refs=Ku,this.updater=s||qu}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};Xs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yu(){}Yu.prototype=Xs.prototype;function Fi(t,r,s){this.props=t,this.context=r,this.refs=Ku,this.updater=s||qu}var Ai=Fi.prototype=new Yu;Ai.constructor=Fi;Qu(Ai,Xs.prototype);Ai.isPureReactComponent=!0;var Wc=Array.isArray,Gu=Object.prototype.hasOwnProperty,Di={current:null},Ju={key:!0,ref:!0,__self:!0,__source:!0};function Xu(t,r,s){var a,n={},l=null,o=null;if(r!=null)for(a in r.ref!==void 0&&(o=r.ref),r.key!==void 0&&(l=""+r.key),r)Gu.call(r,a)&&!Ju.hasOwnProperty(a)&&(n[a]=r[a]);var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){for(var d=Array(c),x=0;x<c;x++)d[x]=arguments[x+2];n.children=d}if(t&&t.defaultProps)for(a in c=t.defaultProps,c)n[a]===void 0&&(n[a]=c[a]);return{$$typeof:Ya,type:t,key:l,ref:o,props:n,_owner:Di.current}}function up(t,r){return{$$typeof:Ya,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function Ri(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ya}function mp(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return r[s]})}var Uc=/\/+/g;function Yl(t,r){return typeof t=="object"&&t!==null&&t.key!=null?mp(""+t.key):r.toString(36)}function Tn(t,r,s,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ya:case ep:o=!0}}if(o)return o=t,n=n(o),t=a===""?"."+Yl(o,0):a,Wc(n)?(s="",t!=null&&(s=t.replace(Uc,"$&/")+"/"),Tn(n,r,s,"",function(x){return x})):n!=null&&(Ri(n)&&(n=up(n,s+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(Uc,"$&/")+"/")+t)),r.push(n)),1;if(o=0,a=a===""?".":a+":",Wc(t))for(var c=0;c<t.length;c++){l=t[c];var d=a+Yl(l,c);o+=Tn(l,r,s,d,n)}else if(d=dp(t),typeof d=="function")for(t=d.call(t),c=0;!(l=t.next()).done;)l=l.value,d=a+Yl(l,c++),o+=Tn(l,r,s,d,n);else if(l==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return o}function ln(t,r,s){if(t==null)return t;var a=[],n=0;return Tn(t,a,"","",function(l){return r.call(s,l,n++)}),a}function xp(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Pn={transition:null},pp={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Pn,ReactCurrentOwner:Di};function Zu(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:ln,forEach:function(t,r,s){ln(t,function(){r.apply(this,arguments)},s)},count:function(t){var r=0;return ln(t,function(){r++}),r},toArray:function(t){return ln(t,function(r){return r})||[]},only:function(t){if(!Ri(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Xs;Ue.Fragment=tp;Ue.Profiler=sp;Ue.PureComponent=Fi;Ue.StrictMode=rp;Ue.Suspense=op;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pp;Ue.act=Zu;Ue.cloneElement=function(t,r,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=Qu({},t.props),n=t.key,l=t.ref,o=t._owner;if(r!=null){if(r.ref!==void 0&&(l=r.ref,o=Di.current),r.key!==void 0&&(n=""+r.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in r)Gu.call(r,d)&&!Ju.hasOwnProperty(d)&&(a[d]=r[d]===void 0&&c!==void 0?c[d]:r[d])}var d=arguments.length-2;if(d===1)a.children=s;else if(1<d){c=Array(d);for(var x=0;x<d;x++)c[x]=arguments[x+2];a.children=c}return{$$typeof:Ya,type:t.type,key:n,ref:l,props:a,_owner:o}};Ue.createContext=function(t){return t={$$typeof:np,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ap,_context:t},t.Consumer=t};Ue.createElement=Xu;Ue.createFactory=function(t){var r=Xu.bind(null,t);return r.type=t,r};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:lp,render:t}};Ue.isValidElement=Ri;Ue.lazy=function(t){return{$$typeof:cp,_payload:{_status:-1,_result:t},_init:xp}};Ue.memo=function(t,r){return{$$typeof:ip,type:t,compare:r===void 0?null:r}};Ue.startTransition=function(t){var r=Pn.transition;Pn.transition={};try{t()}finally{Pn.transition=r}};Ue.unstable_act=Zu;Ue.useCallback=function(t,r){return Pt.current.useCallback(t,r)};Ue.useContext=function(t){return Pt.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};Ue.useEffect=function(t,r){return Pt.current.useEffect(t,r)};Ue.useId=function(){return Pt.current.useId()};Ue.useImperativeHandle=function(t,r,s){return Pt.current.useImperativeHandle(t,r,s)};Ue.useInsertionEffect=function(t,r){return Pt.current.useInsertionEffect(t,r)};Ue.useLayoutEffect=function(t,r){return Pt.current.useLayoutEffect(t,r)};Ue.useMemo=function(t,r){return Pt.current.useMemo(t,r)};Ue.useReducer=function(t,r,s){return Pt.current.useReducer(t,r,s)};Ue.useRef=function(t){return Pt.current.useRef(t)};Ue.useState=function(t){return Pt.current.useState(t)};Ue.useSyncExternalStore=function(t,r,s){return Pt.current.useSyncExternalStore(t,r,s)};Ue.useTransition=function(){return Pt.current.useTransition()};Ue.version="18.3.1";Hu.exports=Ue;var i=Hu.exports;const Ii=Zx(i),hp=Xx({__proto__:null,default:Ii},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp=i,fp=Symbol.for("react.element"),yp=Symbol.for("react.fragment"),vp=Object.prototype.hasOwnProperty,bp=gp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function em(t,r,s){var a,n={},l=null,o=null;s!==void 0&&(l=""+s),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(o=r.ref);for(a in r)vp.call(r,a)&&!jp.hasOwnProperty(a)&&(n[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:fp,type:t,key:l,ref:o,props:n,_owner:bp.current}}bl.Fragment=yp;bl.jsx=em;bl.jsxs=em;Vu.exports=bl;var e=Vu.exports,To={},tm={exports:{}},Vt={},rm={exports:{}},sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(U,X){var T=U.length;U.push(X);e:for(;0<T;){var z=T-1>>>1,G=U[z];if(0<n(G,X))U[z]=X,U[T]=G,T=z;else break e}}function s(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var X=U[0],T=U.pop();if(T!==X){U[0]=T;e:for(var z=0,G=U.length,Z=G>>>1;z<Z;){var de=2*(z+1)-1,ye=U[de],je=de+1,Le=U[je];if(0>n(ye,T))je<G&&0>n(Le,ye)?(U[z]=Le,U[je]=T,z=je):(U[z]=ye,U[de]=T,z=de);else if(je<G&&0>n(Le,T))U[z]=Le,U[je]=T,z=je;else break e}}return X}function n(U,X){var T=U.sortIndex-X.sortIndex;return T!==0?T:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],x=[],m=1,u=null,f=3,j=!1,h=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var X=s(x);X!==null;){if(X.callback===null)a(x);else if(X.startTime<=U)a(x),X.sortIndex=X.expirationTime,r(d,X);else break;X=s(x)}}function k(U){if(p=!1,g(U),!h)if(s(d)!==null)h=!0,ce(N);else{var X=s(x);X!==null&&$(k,X.startTime-U)}}function N(U,X){h=!1,p&&(p=!1,v(_),_=-1),j=!0;var T=f;try{for(g(X),u=s(d);u!==null&&(!(u.expirationTime>X)||U&&!se());){var z=u.callback;if(typeof z=="function"){u.callback=null,f=u.priorityLevel;var G=z(u.expirationTime<=X);X=t.unstable_now(),typeof G=="function"?u.callback=G:u===s(d)&&a(d),g(X)}else a(d);u=s(d)}if(u!==null)var Z=!0;else{var de=s(x);de!==null&&$(k,de.startTime-X),Z=!1}return Z}finally{u=null,f=T,j=!1}}var E=!1,F=null,_=-1,q=5,R=-1;function se(){return!(t.unstable_now()-R<q)}function V(){if(F!==null){var U=t.unstable_now();R=U;var X=!0;try{X=F(!0,U)}finally{X?Q():(E=!1,F=null)}}else E=!1}var Q;if(typeof b=="function")Q=function(){b(V)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,J=te.port2;te.port1.onmessage=V,Q=function(){J.postMessage(null)}}else Q=function(){y(V,0)};function ce(U){F=U,E||(E=!0,Q())}function $(U,X){_=y(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){h||j||(h=!0,ce(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var T=f;f=X;try{return U()}finally{f=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var T=f;f=U;try{return X()}finally{f=T}},t.unstable_scheduleCallback=function(U,X,T){var z=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?z+T:z):T=z,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=T+G,U={id:m++,callback:X,priorityLevel:U,startTime:T,expirationTime:G,sortIndex:-1},T>z?(U.sortIndex=T,r(x,U),s(d)===null&&U===s(x)&&(p?(v(_),_=-1):p=!0,$(k,T-z))):(U.sortIndex=G,r(d,U),h||j||(h=!0,ce(N))),U},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(U){var X=f;return function(){var T=f;f=X;try{return U.apply(this,arguments)}finally{f=T}}}})(sm);rm.exports=sm;var kp=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=i,Ut=kp;function pe(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var am=new Set,Ta={};function bs(t,r){Us(t,r),Us(t+"Capture",r)}function Us(t,r){for(Ta[t]=r,t=0;t<r.length;t++)am.add(r[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Po=Object.prototype.hasOwnProperty,Np=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vc={},Hc={};function Cp(t){return Po.call(Hc,t)?!0:Po.call(Vc,t)?!1:Np.test(t)?Hc[t]=!0:(Vc[t]=!0,!1)}function Sp(t,r,s,a){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _p(t,r,s,a){if(r===null||typeof r>"u"||Sp(t,r,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Et(t,r,s,a,n,l,o){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=l,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];wt[r]=new Et(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bi=/[\-:]([a-z])/g;function zi(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Bi,zi);wt[r]=new Et(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Bi,zi);wt[r]=new Et(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Bi,zi);wt[r]=new Et(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function $i(t,r,s,a){var n=wt.hasOwnProperty(r)?wt[r]:null;(n!==null?n.type!==0:a||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(_p(r,s,n,a)&&(s=null),a||n===null?Cp(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):n.mustUseProperty?t[n.propertyName]=s===null?n.type===3?!1:"":s:(r=n.attributeName,a=n.attributeNamespace,s===null?t.removeAttribute(r):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?t.setAttributeNS(a,r,s):t.setAttribute(r,s))))}var Pr=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,on=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Oi=Symbol.for("react.strict_mode"),Eo=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),lm=Symbol.for("react.context"),Wi=Symbol.for("react.forward_ref"),Fo=Symbol.for("react.suspense"),Ao=Symbol.for("react.suspense_list"),Ui=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),om=Symbol.for("react.offscreen"),qc=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=qc&&t[qc]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,Gl;function fa(t){if(Gl===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);Gl=r&&r[1]||""}return`
`+Gl+t}var Jl=!1;function Xl(t,r){if(!t||Jl)return"";Jl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(x){var a=x}Reflect.construct(t,[],r)}else{try{r.call()}catch(x){a=x}t.call(r.prototype)}else{try{throw Error()}catch(x){a=x}t()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var n=x.stack.split(`
`),l=a.stack.split(`
`),o=n.length-1,c=l.length-1;1<=o&&0<=c&&n[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(n[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||n[o]!==l[c]){var d=`
`+n[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=c);break}}}finally{Jl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?fa(t):""}function Mp(t){switch(t.tag){case 5:return fa(t.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return t=Xl(t.type,!1),t;case 11:return t=Xl(t.type.render,!1),t;case 1:return t=Xl(t.type,!0),t;default:return""}}function Do(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ss:return"Fragment";case Cs:return"Portal";case Eo:return"Profiler";case Oi:return"StrictMode";case Fo:return"Suspense";case Ao:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lm:return(t.displayName||"Context")+".Consumer";case nm:return(t._context.displayName||"Context")+".Provider";case Wi:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ui:return r=t.displayName||null,r!==null?r:Do(t.type)||"Memo";case Dr:r=t._payload,t=t._init;try{return Do(t(r))}catch{}}return null}function Lp(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Do(r);case 8:return r===Oi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function im(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Tp(t){var r=im(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,l.call(this,o)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function cn(t){t._valueTracker||(t._valueTracker=Tp(t))}function cm(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),a="";return t&&(a=im(t)?t.checked?"true":"false":t.value),t=a,t!==s?(r.setValue(t),!0):!1}function qn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ro(t,r){var s=r.checked;return tt({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Qc(t,r){var s=r.defaultValue==null?"":r.defaultValue,a=r.checked!=null?r.checked:r.defaultChecked;s=Jr(r.value!=null?r.value:s),t._wrapperState={initialChecked:a,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function dm(t,r){r=r.checked,r!=null&&$i(t,"checked",r,!1)}function Io(t,r){dm(t,r);var s=Jr(r.value),a=r.type;if(s!=null)a==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Bo(t,r.type,s):r.hasOwnProperty("defaultValue")&&Bo(t,r.type,Jr(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Kc(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var a=r.type;if(!(a!=="submit"&&a!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Bo(t,r,s){(r!=="number"||qn(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ya=Array.isArray;function Is(t,r,s,a){if(t=t.options,r){r={};for(var n=0;n<s.length;n++)r["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=r.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&a&&(t[s].defaultSelected=!0)}else{for(s=""+Jr(s),r=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}r!==null||t[n].disabled||(r=t[n])}r!==null&&(r.selected=!0)}}function zo(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(pe(91));return tt({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yc(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(pe(92));if(ya(s)){if(1<s.length)throw Error(pe(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:Jr(s)}}function um(t,r){var s=Jr(r.value),a=Jr(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),a!=null&&(t.defaultValue=""+a)}function Gc(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function mm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $o(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?mm(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dn,xm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,a,n){MSApp.execUnsafeLocalFunction(function(){return t(r,s,a,n)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(dn=dn||document.createElement("div"),dn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=dn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Pa(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pp=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){Pp.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ja[r]=ja[t]})});function pm(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||ja.hasOwnProperty(t)&&ja[t]?(""+r).trim():r+"px"}function hm(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=pm(s,r[s],a);s==="float"&&(s="cssFloat"),a?t.setProperty(s,n):t[s]=n}}var Ep=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oo(t,r){if(r){if(Ep[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(pe(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(pe(61))}if(r.style!=null&&typeof r.style!="object")throw Error(pe(62))}}function Wo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uo=null;function Vi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vo=null,Bs=null,zs=null;function Jc(t){if(t=Xa(t)){if(typeof Vo!="function")throw Error(pe(280));var r=t.stateNode;r&&(r=Cl(r),Vo(t.stateNode,t.type,r))}}function gm(t){Bs?zs?zs.push(t):zs=[t]:Bs=t}function fm(){if(Bs){var t=Bs,r=zs;if(zs=Bs=null,Jc(t),r)for(t=0;t<r.length;t++)Jc(r[t])}}function ym(t,r){return t(r)}function vm(){}var Zl=!1;function bm(t,r,s){if(Zl)return t(r,s);Zl=!0;try{return ym(t,r,s)}finally{Zl=!1,(Bs!==null||zs!==null)&&(vm(),fm())}}function Ea(t,r){var s=t.stateNode;if(s===null)return null;var a=Cl(s);if(a===null)return null;s=a[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(pe(231,r,typeof s));return s}var Ho=!1;if(_r)try{var oa={};Object.defineProperty(oa,"passive",{get:function(){Ho=!0}}),window.addEventListener("test",oa,oa),window.removeEventListener("test",oa,oa)}catch{Ho=!1}function Fp(t,r,s,a,n,l,o,c,d){var x=Array.prototype.slice.call(arguments,3);try{r.apply(s,x)}catch(m){this.onError(m)}}var ka=!1,Qn=null,Kn=!1,qo=null,Ap={onError:function(t){ka=!0,Qn=t}};function Dp(t,r,s,a,n,l,o,c,d){ka=!1,Qn=null,Fp.apply(Ap,arguments)}function Rp(t,r,s,a,n,l,o,c,d){if(Dp.apply(this,arguments),ka){if(ka){var x=Qn;ka=!1,Qn=null}else throw Error(pe(198));Kn||(Kn=!0,qo=x)}}function js(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function jm(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Xc(t){if(js(t)!==t)throw Error(pe(188))}function Ip(t){var r=t.alternate;if(!r){if(r=js(t),r===null)throw Error(pe(188));return r!==t?null:t}for(var s=t,a=r;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Xc(n),t;if(l===a)return Xc(n),r;l=l.sibling}throw Error(pe(188))}if(s.return!==a.return)s=n,a=l;else{for(var o=!1,c=n.child;c;){if(c===s){o=!0,s=n,a=l;break}if(c===a){o=!0,a=n,s=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===s){o=!0,s=l,a=n;break}if(c===a){o=!0,a=l,s=n;break}c=c.sibling}if(!o)throw Error(pe(189))}}if(s.alternate!==a)throw Error(pe(190))}if(s.tag!==3)throw Error(pe(188));return s.stateNode.current===s?t:r}function km(t){return t=Ip(t),t!==null?wm(t):null}function wm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=wm(t);if(r!==null)return r;t=t.sibling}return null}var Nm=Ut.unstable_scheduleCallback,Zc=Ut.unstable_cancelCallback,Bp=Ut.unstable_shouldYield,zp=Ut.unstable_requestPaint,lt=Ut.unstable_now,$p=Ut.unstable_getCurrentPriorityLevel,Hi=Ut.unstable_ImmediatePriority,Cm=Ut.unstable_UserBlockingPriority,Yn=Ut.unstable_NormalPriority,Op=Ut.unstable_LowPriority,Sm=Ut.unstable_IdlePriority,jl=null,fr=null;function Wp(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(jl,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:Hp,Up=Math.log,Vp=Math.LN2;function Hp(t){return t>>>=0,t===0?32:31-(Up(t)/Vp|0)|0}var un=64,mn=4194304;function va(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gn(t,r){var s=t.pendingLanes;if(s===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,o=s&268435455;if(o!==0){var c=o&~n;c!==0?a=va(c):(l&=o,l!==0&&(a=va(l)))}else o=s&~n,o!==0?a=va(o):l!==0&&(a=va(l));if(a===0)return 0;if(r!==0&&r!==a&&!(r&n)&&(n=a&-a,l=r&-r,n>=l||n===16&&(l&4194240)!==0))return r;if(a&4&&(a|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=a;0<r;)s=31-lr(r),n=1<<s,a|=t[s],r&=~n;return a}function qp(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(t,r){for(var s=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var o=31-lr(l),c=1<<o,d=n[o];d===-1?(!(c&s)||c&a)&&(n[o]=qp(c,r)):d<=r&&(t.expiredLanes|=c),l&=~c}}function Qo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _m(){var t=un;return un<<=1,!(un&4194240)&&(un=64),t}function eo(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Ga(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-lr(r),t[r]=s}function Kp(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<s;){var n=31-lr(s),l=1<<n;r[n]=0,a[n]=-1,t[n]=-1,s&=~l}}function qi(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var a=31-lr(s),n=1<<a;n&r|t[a]&r&&(t[a]|=r),s&=~n}}var qe=0;function Mm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lm,Qi,Tm,Pm,Em,Ko=!1,xn=[],Wr=null,Ur=null,Vr=null,Fa=new Map,Aa=new Map,Ir=[],Yp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(t,r){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":Fa.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(r.pointerId)}}function ia(t,r,s,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:r,domEventName:s,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},r!==null&&(r=Xa(r),r!==null&&Qi(r)),t):(t.eventSystemFlags|=a,r=t.targetContainers,n!==null&&r.indexOf(n)===-1&&r.push(n),t)}function Gp(t,r,s,a,n){switch(r){case"focusin":return Wr=ia(Wr,t,r,s,a,n),!0;case"dragenter":return Ur=ia(Ur,t,r,s,a,n),!0;case"mouseover":return Vr=ia(Vr,t,r,s,a,n),!0;case"pointerover":var l=n.pointerId;return Fa.set(l,ia(Fa.get(l)||null,t,r,s,a,n)),!0;case"gotpointercapture":return l=n.pointerId,Aa.set(l,ia(Aa.get(l)||null,t,r,s,a,n)),!0}return!1}function Fm(t){var r=os(t.target);if(r!==null){var s=js(r);if(s!==null){if(r=s.tag,r===13){if(r=jm(s),r!==null){t.blockedOn=r,Em(t.priority,function(){Tm(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function En(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=Yo(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var a=new s.constructor(s.type,s);Uo=a,s.target.dispatchEvent(a),Uo=null}else return r=Xa(s),r!==null&&Qi(r),t.blockedOn=s,!1;r.shift()}return!0}function td(t,r,s){En(t)&&s.delete(r)}function Jp(){Ko=!1,Wr!==null&&En(Wr)&&(Wr=null),Ur!==null&&En(Ur)&&(Ur=null),Vr!==null&&En(Vr)&&(Vr=null),Fa.forEach(td),Aa.forEach(td)}function ca(t,r){t.blockedOn===r&&(t.blockedOn=null,Ko||(Ko=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Jp)))}function Da(t){function r(n){return ca(n,t)}if(0<xn.length){ca(xn[0],t);for(var s=1;s<xn.length;s++){var a=xn[s];a.blockedOn===t&&(a.blockedOn=null)}}for(Wr!==null&&ca(Wr,t),Ur!==null&&ca(Ur,t),Vr!==null&&ca(Vr,t),Fa.forEach(r),Aa.forEach(r),s=0;s<Ir.length;s++)a=Ir[s],a.blockedOn===t&&(a.blockedOn=null);for(;0<Ir.length&&(s=Ir[0],s.blockedOn===null);)Fm(s),s.blockedOn===null&&Ir.shift()}var $s=Pr.ReactCurrentBatchConfig,Jn=!0;function Xp(t,r,s,a){var n=qe,l=$s.transition;$s.transition=null;try{qe=1,Ki(t,r,s,a)}finally{qe=n,$s.transition=l}}function Zp(t,r,s,a){var n=qe,l=$s.transition;$s.transition=null;try{qe=4,Ki(t,r,s,a)}finally{qe=n,$s.transition=l}}function Ki(t,r,s,a){if(Jn){var n=Yo(t,r,s,a);if(n===null)uo(t,r,a,Xn,s),ed(t,a);else if(Gp(n,t,r,s,a))a.stopPropagation();else if(ed(t,a),r&4&&-1<Yp.indexOf(t)){for(;n!==null;){var l=Xa(n);if(l!==null&&Lm(l),l=Yo(t,r,s,a),l===null&&uo(t,r,a,Xn,s),l===n)break;n=l}n!==null&&a.stopPropagation()}else uo(t,r,a,null,s)}}var Xn=null;function Yo(t,r,s,a){if(Xn=null,t=Vi(a),t=os(t),t!==null)if(r=js(t),r===null)t=null;else if(s=r.tag,s===13){if(t=jm(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Xn=t,null}function Am(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($p()){case Hi:return 1;case Cm:return 4;case Yn:case Op:return 16;case Sm:return 536870912;default:return 16}default:return 16}}var zr=null,Yi=null,Fn=null;function Dm(){if(Fn)return Fn;var t,r=Yi,s=r.length,a,n="value"in zr?zr.value:zr.textContent,l=n.length;for(t=0;t<s&&r[t]===n[t];t++);var o=s-t;for(a=1;a<=o&&r[s-a]===n[l-a];a++);return Fn=n.slice(t,1<a?1-a:void 0)}function An(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function pn(){return!0}function rd(){return!1}function Ht(t){function r(s,a,n,l,o){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?pn:rd,this.isPropagationStopped=rd,this}return tt(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pn)},persist:function(){},isPersistent:pn}),r}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Ht(Zs),Ja=tt({},Zs,{view:0,detail:0}),eh=Ht(Ja),to,ro,da,kl=tt({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ji,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(to=t.screenX-da.screenX,ro=t.screenY-da.screenY):ro=to=0,da=t),to)},movementY:function(t){return"movementY"in t?t.movementY:ro}}),sd=Ht(kl),th=tt({},kl,{dataTransfer:0}),rh=Ht(th),sh=tt({},Ja,{relatedTarget:0}),so=Ht(sh),ah=tt({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),nh=Ht(ah),lh=tt({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oh=Ht(lh),ih=tt({},Zs,{data:0}),ad=Ht(ih),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=uh[t])?!!r[t]:!1}function Ji(){return mh}var xh=tt({},Ja,{key:function(t){if(t.key){var r=ch[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=An(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ji,charCode:function(t){return t.type==="keypress"?An(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?An(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ph=Ht(xh),hh=tt({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=Ht(hh),gh=tt({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ji}),fh=Ht(gh),yh=tt({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),vh=Ht(yh),bh=tt({},kl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jh=Ht(bh),kh=[9,13,27,32],Xi=_r&&"CompositionEvent"in window,wa=null;_r&&"documentMode"in document&&(wa=document.documentMode);var wh=_r&&"TextEvent"in window&&!wa,Rm=_r&&(!Xi||wa&&8<wa&&11>=wa),ld=" ",od=!1;function Im(t,r){switch(t){case"keyup":return kh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function Nh(t,r){switch(t){case"compositionend":return Bm(r);case"keypress":return r.which!==32?null:(od=!0,ld);case"textInput":return t=r.data,t===ld&&od?null:t;default:return null}}function Ch(t,r){if(_s)return t==="compositionend"||!Xi&&Im(t,r)?(t=Dm(),Fn=Yi=zr=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Rm&&r.locale!=="ko"?null:r.data;default:return null}}var Sh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function id(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Sh[t.type]:r==="textarea"}function zm(t,r,s,a){gm(a),r=Zn(r,"onChange"),0<r.length&&(s=new Gi("onChange","change",null,s,a),t.push({event:s,listeners:r}))}var Na=null,Ra=null;function _h(t){Gm(t,0)}function wl(t){var r=Ts(t);if(cm(r))return t}function Mh(t,r){if(t==="change")return r}var $m=!1;if(_r){var ao;if(_r){var no="oninput"in document;if(!no){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),no=typeof cd.oninput=="function"}ao=no}else ao=!1;$m=ao&&(!document.documentMode||9<document.documentMode)}function dd(){Na&&(Na.detachEvent("onpropertychange",Om),Ra=Na=null)}function Om(t){if(t.propertyName==="value"&&wl(Ra)){var r=[];zm(r,Ra,t,Vi(t)),bm(_h,r)}}function Lh(t,r,s){t==="focusin"?(dd(),Na=r,Ra=s,Na.attachEvent("onpropertychange",Om)):t==="focusout"&&dd()}function Th(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wl(Ra)}function Ph(t,r){if(t==="click")return wl(r)}function Eh(t,r){if(t==="input"||t==="change")return wl(r)}function Fh(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ir=typeof Object.is=="function"?Object.is:Fh;function Ia(t,r){if(ir(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),a=Object.keys(r);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!Po.call(r,n)||!ir(t[n],r[n]))return!1}return!0}function ud(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function md(t,r){var s=ud(t);t=0;for(var a;s;){if(s.nodeType===3){if(a=t+s.textContent.length,t<=r&&a>=r)return{node:s,offset:r-t};t=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ud(s)}}function Wm(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Wm(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Um(){for(var t=window,r=qn();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=qn(t.document)}return r}function Zi(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Ah(t){var r=Um(),s=t.focusedElem,a=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&Wm(s.ownerDocument.documentElement,s)){if(a!==null&&Zi(s)){if(r=a.start,t=a.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var n=s.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=md(s,l);var o=md(s,a);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(r=r.createRange(),r.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(r),t.extend(o.node,o.offset)):(r.setEnd(o.node,o.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dh=_r&&"documentMode"in document&&11>=document.documentMode,Ms=null,Go=null,Ca=null,Jo=!1;function xd(t,r,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Jo||Ms==null||Ms!==qn(a)||(a=Ms,"selectionStart"in a&&Zi(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ca&&Ia(Ca,a)||(Ca=a,a=Zn(Go,"onSelect"),0<a.length&&(r=new Gi("onSelect","select",null,r,s),t.push({event:r,listeners:a}),r.target=Ms)))}function hn(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Ls={animationend:hn("Animation","AnimationEnd"),animationiteration:hn("Animation","AnimationIteration"),animationstart:hn("Animation","AnimationStart"),transitionend:hn("Transition","TransitionEnd")},lo={},Vm={};_r&&(Vm=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Nl(t){if(lo[t])return lo[t];if(!Ls[t])return t;var r=Ls[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in Vm)return lo[t]=r[s];return t}var Hm=Nl("animationend"),qm=Nl("animationiteration"),Qm=Nl("animationstart"),Km=Nl("transitionend"),Ym=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,r){Ym.set(t,r),bs(r,[t])}for(var oo=0;oo<pd.length;oo++){var io=pd[oo],Rh=io.toLowerCase(),Ih=io[0].toUpperCase()+io.slice(1);Zr(Rh,"on"+Ih)}Zr(Hm,"onAnimationEnd");Zr(qm,"onAnimationIteration");Zr(Qm,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(Km,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function hd(t,r,s){var a=t.type||"unknown-event";t.currentTarget=s,Rp(a,r,void 0,t),t.currentTarget=null}function Gm(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var a=t[s],n=a.event;a=a.listeners;e:{var l=void 0;if(r)for(var o=a.length-1;0<=o;o--){var c=a[o],d=c.instance,x=c.currentTarget;if(c=c.listener,d!==l&&n.isPropagationStopped())break e;hd(n,c,x),l=d}else for(o=0;o<a.length;o++){if(c=a[o],d=c.instance,x=c.currentTarget,c=c.listener,d!==l&&n.isPropagationStopped())break e;hd(n,c,x),l=d}}}if(Kn)throw t=qo,Kn=!1,qo=null,t}function Ye(t,r){var s=r[ri];s===void 0&&(s=r[ri]=new Set);var a=t+"__bubble";s.has(a)||(Jm(r,t,2,!1),s.add(a))}function co(t,r,s){var a=0;r&&(a|=4),Jm(s,t,a,r)}var gn="_reactListening"+Math.random().toString(36).slice(2);function Ba(t){if(!t[gn]){t[gn]=!0,am.forEach(function(s){s!=="selectionchange"&&(Bh.has(s)||co(s,!1,t),co(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[gn]||(r[gn]=!0,co("selectionchange",!1,r))}}function Jm(t,r,s,a){switch(Am(r)){case 1:var n=Xp;break;case 4:n=Zp;break;default:n=Ki}s=n.bind(null,r,s,t),n=void 0,!Ho||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(r,s,{capture:!0,passive:n}):t.addEventListener(r,s,!0):n!==void 0?t.addEventListener(r,s,{passive:n}):t.addEventListener(r,s,!1)}function uo(t,r,s,a,n){var l=a;if(!(r&1)&&!(r&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var c=a.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;o=o.return}for(;c!==null;){if(o=os(c),o===null)return;if(d=o.tag,d===5||d===6){a=l=o;continue e}c=c.parentNode}}a=a.return}bm(function(){var x=l,m=Vi(s),u=[];e:{var f=Ym.get(t);if(f!==void 0){var j=Gi,h=t;switch(t){case"keypress":if(An(s)===0)break e;case"keydown":case"keyup":j=ph;break;case"focusin":h="focus",j=so;break;case"focusout":h="blur",j=so;break;case"beforeblur":case"afterblur":j=so;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=fh;break;case Hm:case qm:case Qm:j=nh;break;case Km:j=vh;break;case"scroll":j=eh;break;case"wheel":j=jh;break;case"copy":case"cut":case"paste":j=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=nd}var p=(r&4)!==0,y=!p&&t==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var b=x,g;b!==null;){g=b;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,v!==null&&(k=Ea(b,v),k!=null&&p.push(za(b,k,g)))),y)break;b=b.return}0<p.length&&(f=new j(f,h,null,s,m),u.push({event:f,listeners:p}))}}if(!(r&7)){e:{if(f=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",f&&s!==Uo&&(h=s.relatedTarget||s.fromElement)&&(os(h)||h[Mr]))break e;if((j||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,j?(h=s.relatedTarget||s.toElement,j=x,h=h?os(h):null,h!==null&&(y=js(h),h!==y||h.tag!==5&&h.tag!==6)&&(h=null)):(j=null,h=x),j!==h)){if(p=sd,k="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(p=nd,k="onPointerLeave",v="onPointerEnter",b="pointer"),y=j==null?f:Ts(j),g=h==null?f:Ts(h),f=new p(k,b+"leave",j,s,m),f.target=y,f.relatedTarget=g,k=null,os(m)===x&&(p=new p(v,b+"enter",h,s,m),p.target=g,p.relatedTarget=y,k=p),y=k,j&&h)t:{for(p=j,v=h,b=0,g=p;g;g=ws(g))b++;for(g=0,k=v;k;k=ws(k))g++;for(;0<b-g;)p=ws(p),b--;for(;0<g-b;)v=ws(v),g--;for(;b--;){if(p===v||v!==null&&p===v.alternate)break t;p=ws(p),v=ws(v)}p=null}else p=null;j!==null&&gd(u,f,j,p,!1),h!==null&&y!==null&&gd(u,y,h,p,!0)}}e:{if(f=x?Ts(x):window,j=f.nodeName&&f.nodeName.toLowerCase(),j==="select"||j==="input"&&f.type==="file")var N=Mh;else if(id(f))if($m)N=Eh;else{N=Th;var E=Lh}else(j=f.nodeName)&&j.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Ph);if(N&&(N=N(t,x))){zm(u,N,s,m);break e}E&&E(t,f,x),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Bo(f,"number",f.value)}switch(E=x?Ts(x):window,t){case"focusin":(id(E)||E.contentEditable==="true")&&(Ms=E,Go=x,Ca=null);break;case"focusout":Ca=Go=Ms=null;break;case"mousedown":Jo=!0;break;case"contextmenu":case"mouseup":case"dragend":Jo=!1,xd(u,s,m);break;case"selectionchange":if(Dh)break;case"keydown":case"keyup":xd(u,s,m)}var F;if(Xi)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else _s?Im(t,s)&&(_="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(Rm&&s.locale!=="ko"&&(_s||_!=="onCompositionStart"?_==="onCompositionEnd"&&_s&&(F=Dm()):(zr=m,Yi="value"in zr?zr.value:zr.textContent,_s=!0)),E=Zn(x,_),0<E.length&&(_=new ad(_,t,null,s,m),u.push({event:_,listeners:E}),F?_.data=F:(F=Bm(s),F!==null&&(_.data=F)))),(F=wh?Nh(t,s):Ch(t,s))&&(x=Zn(x,"onBeforeInput"),0<x.length&&(m=new ad("onBeforeInput","beforeinput",null,s,m),u.push({event:m,listeners:x}),m.data=F))}Gm(u,r)})}function za(t,r,s){return{instance:t,listener:r,currentTarget:s}}function Zn(t,r){for(var s=r+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Ea(t,s),l!=null&&a.unshift(za(t,l,n)),l=Ea(t,r),l!=null&&a.push(za(t,l,n))),t=t.return}return a}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gd(t,r,s,a,n){for(var l=r._reactName,o=[];s!==null&&s!==a;){var c=s,d=c.alternate,x=c.stateNode;if(d!==null&&d===a)break;c.tag===5&&x!==null&&(c=x,n?(d=Ea(s,l),d!=null&&o.unshift(za(s,d,c))):n||(d=Ea(s,l),d!=null&&o.push(za(s,d,c)))),s=s.return}o.length!==0&&t.push({event:r,listeners:o})}var zh=/\r\n?/g,$h=/\u0000|\uFFFD/g;function fd(t){return(typeof t=="string"?t:""+t).replace(zh,`
`).replace($h,"")}function fn(t,r,s){if(r=fd(r),fd(t)!==r&&s)throw Error(pe(425))}function el(){}var Xo=null,Zo=null;function ei(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ti=typeof setTimeout=="function"?setTimeout:void 0,Oh=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,Wh=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(t){return yd.resolve(null).then(t).catch(Uh)}:ti;function Uh(t){setTimeout(function(){throw t})}function mo(t,r){var s=r,a=0;do{var n=s.nextSibling;if(t.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){t.removeChild(n),Da(r);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);Da(r)}function Hr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function vd(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),gr="__reactFiber$"+ea,$a="__reactProps$"+ea,Mr="__reactContainer$"+ea,ri="__reactEvents$"+ea,Vh="__reactListeners$"+ea,Hh="__reactHandles$"+ea;function os(t){var r=t[gr];if(r)return r;for(var s=t.parentNode;s;){if(r=s[Mr]||s[gr]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=vd(t);t!==null;){if(s=t[gr])return s;t=vd(t)}return r}t=s,s=t.parentNode}return null}function Xa(t){return t=t[gr]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function Cl(t){return t[$a]||null}var si=[],Ps=-1;function es(t){return{current:t}}function Ge(t){0>Ps||(t.current=si[Ps],si[Ps]=null,Ps--)}function Ke(t,r){Ps++,si[Ps]=t.current,t.current=r}var Xr={},Mt=es(Xr),Dt=es(!1),ps=Xr;function Vs(t,r){var s=t.type.contextTypes;if(!s)return Xr;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===r)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=r[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=n),n}function Rt(t){return t=t.childContextTypes,t!=null}function tl(){Ge(Dt),Ge(Mt)}function bd(t,r,s){if(Mt.current!==Xr)throw Error(pe(168));Ke(Mt,r),Ke(Dt,s)}function Xm(t,r,s){var a=t.stateNode;if(r=r.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in r))throw Error(pe(108,Lp(t)||"Unknown",n));return tt({},s,a)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,ps=Mt.current,Ke(Mt,t),Ke(Dt,Dt.current),!0}function jd(t,r,s){var a=t.stateNode;if(!a)throw Error(pe(169));s?(t=Xm(t,r,ps),a.__reactInternalMemoizedMergedChildContext=t,Ge(Dt),Ge(Mt),Ke(Mt,t)):Ge(Dt),Ke(Dt,s)}var wr=null,Sl=!1,xo=!1;function Zm(t){wr===null?wr=[t]:wr.push(t)}function qh(t){Sl=!0,Zm(t)}function ts(){if(!xo&&wr!==null){xo=!0;var t=0,r=qe;try{var s=wr;for(qe=1;t<s.length;t++){var a=s[t];do a=a(!0);while(a!==null)}wr=null,Sl=!1}catch(n){throw wr!==null&&(wr=wr.slice(t+1)),Nm(Hi,ts),n}finally{qe=r,xo=!1}}return null}var Es=[],Fs=0,sl=null,al=0,qt=[],Qt=0,hs=null,Nr=1,Cr="";function ns(t,r){Es[Fs++]=al,Es[Fs++]=sl,sl=t,al=r}function e0(t,r,s){qt[Qt++]=Nr,qt[Qt++]=Cr,qt[Qt++]=hs,hs=t;var a=Nr;t=Cr;var n=32-lr(a)-1;a&=~(1<<n),s+=1;var l=32-lr(r)+n;if(30<l){var o=n-n%5;l=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Nr=1<<32-lr(r)+n|s<<n|a,Cr=l+t}else Nr=1<<l|s<<n|a,Cr=t}function ec(t){t.return!==null&&(ns(t,1),e0(t,1,0))}function tc(t){for(;t===sl;)sl=Es[--Fs],Es[Fs]=null,al=Es[--Fs],Es[Fs]=null;for(;t===hs;)hs=qt[--Qt],qt[Qt]=null,Cr=qt[--Qt],qt[Qt]=null,Nr=qt[--Qt],qt[Qt]=null}var Wt=null,Ot=null,Je=!1,nr=null;function t0(t,r){var s=Yt(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function kd(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Wt=t,Ot=Hr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Wt=t,Ot=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=hs!==null?{id:Nr,overflow:Cr}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=Yt(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,Wt=t,Ot=null,!0):!1;default:return!1}}function ai(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ni(t){if(Je){var r=Ot;if(r){var s=r;if(!kd(t,r)){if(ai(t))throw Error(pe(418));r=Hr(s.nextSibling);var a=Wt;r&&kd(t,r)?t0(a,s):(t.flags=t.flags&-4097|2,Je=!1,Wt=t)}}else{if(ai(t))throw Error(pe(418));t.flags=t.flags&-4097|2,Je=!1,Wt=t}}}function wd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function yn(t){if(t!==Wt)return!1;if(!Je)return wd(t),Je=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ei(t.type,t.memoizedProps)),r&&(r=Ot)){if(ai(t))throw r0(),Error(pe(418));for(;r;)t0(t,r),r=Hr(r.nextSibling)}if(wd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){Ot=Hr(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}Ot=null}}else Ot=Wt?Hr(t.stateNode.nextSibling):null;return!0}function r0(){for(var t=Ot;t;)t=Hr(t.nextSibling)}function Hs(){Ot=Wt=null,Je=!1}function rc(t){nr===null?nr=[t]:nr.push(t)}var Qh=Pr.ReactCurrentBatchConfig;function ua(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(pe(309));var a=s.stateNode}if(!a)throw Error(pe(147,t));var n=a,l=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===l?r.ref:(r=function(o){var c=n.refs;o===null?delete c[l]:c[l]=o},r._stringRef=l,r)}if(typeof t!="string")throw Error(pe(284));if(!s._owner)throw Error(pe(290,t))}return t}function vn(t,r){throw t=Object.prototype.toString.call(r),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Nd(t){var r=t._init;return r(t._payload)}function s0(t){function r(v,b){if(t){var g=v.deletions;g===null?(v.deletions=[b],v.flags|=16):g.push(b)}}function s(v,b){if(!t)return null;for(;b!==null;)r(v,b),b=b.sibling;return null}function a(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function n(v,b){return v=Yr(v,b),v.index=0,v.sibling=null,v}function l(v,b,g){return v.index=g,t?(g=v.alternate,g!==null?(g=g.index,g<b?(v.flags|=2,b):g):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function c(v,b,g,k){return b===null||b.tag!==6?(b=bo(g,v.mode,k),b.return=v,b):(b=n(b,g),b.return=v,b)}function d(v,b,g,k){var N=g.type;return N===Ss?m(v,b,g.props.children,k,g.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dr&&Nd(N)===b.type)?(k=n(b,g.props),k.ref=ua(v,b,g),k.return=v,k):(k=On(g.type,g.key,g.props,null,v.mode,k),k.ref=ua(v,b,g),k.return=v,k)}function x(v,b,g,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==g.containerInfo||b.stateNode.implementation!==g.implementation?(b=jo(g,v.mode,k),b.return=v,b):(b=n(b,g.children||[]),b.return=v,b)}function m(v,b,g,k,N){return b===null||b.tag!==7?(b=ms(g,v.mode,k,N),b.return=v,b):(b=n(b,g),b.return=v,b)}function u(v,b,g){if(typeof b=="string"&&b!==""||typeof b=="number")return b=bo(""+b,v.mode,g),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case on:return g=On(b.type,b.key,b.props,null,v.mode,g),g.ref=ua(v,null,b),g.return=v,g;case Cs:return b=jo(b,v.mode,g),b.return=v,b;case Dr:var k=b._init;return u(v,k(b._payload),g)}if(ya(b)||la(b))return b=ms(b,v.mode,g,null),b.return=v,b;vn(v,b)}return null}function f(v,b,g,k){var N=b!==null?b.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return N!==null?null:c(v,b,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case on:return g.key===N?d(v,b,g,k):null;case Cs:return g.key===N?x(v,b,g,k):null;case Dr:return N=g._init,f(v,b,N(g._payload),k)}if(ya(g)||la(g))return N!==null?null:m(v,b,g,k,null);vn(v,g)}return null}function j(v,b,g,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(g)||null,c(b,v,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case on:return v=v.get(k.key===null?g:k.key)||null,d(b,v,k,N);case Cs:return v=v.get(k.key===null?g:k.key)||null,x(b,v,k,N);case Dr:var E=k._init;return j(v,b,g,E(k._payload),N)}if(ya(k)||la(k))return v=v.get(g)||null,m(b,v,k,N,null);vn(b,k)}return null}function h(v,b,g,k){for(var N=null,E=null,F=b,_=b=0,q=null;F!==null&&_<g.length;_++){F.index>_?(q=F,F=null):q=F.sibling;var R=f(v,F,g[_],k);if(R===null){F===null&&(F=q);break}t&&F&&R.alternate===null&&r(v,F),b=l(R,b,_),E===null?N=R:E.sibling=R,E=R,F=q}if(_===g.length)return s(v,F),Je&&ns(v,_),N;if(F===null){for(;_<g.length;_++)F=u(v,g[_],k),F!==null&&(b=l(F,b,_),E===null?N=F:E.sibling=F,E=F);return Je&&ns(v,_),N}for(F=a(v,F);_<g.length;_++)q=j(F,v,_,g[_],k),q!==null&&(t&&q.alternate!==null&&F.delete(q.key===null?_:q.key),b=l(q,b,_),E===null?N=q:E.sibling=q,E=q);return t&&F.forEach(function(se){return r(v,se)}),Je&&ns(v,_),N}function p(v,b,g,k){var N=la(g);if(typeof N!="function")throw Error(pe(150));if(g=N.call(g),g==null)throw Error(pe(151));for(var E=N=null,F=b,_=b=0,q=null,R=g.next();F!==null&&!R.done;_++,R=g.next()){F.index>_?(q=F,F=null):q=F.sibling;var se=f(v,F,R.value,k);if(se===null){F===null&&(F=q);break}t&&F&&se.alternate===null&&r(v,F),b=l(se,b,_),E===null?N=se:E.sibling=se,E=se,F=q}if(R.done)return s(v,F),Je&&ns(v,_),N;if(F===null){for(;!R.done;_++,R=g.next())R=u(v,R.value,k),R!==null&&(b=l(R,b,_),E===null?N=R:E.sibling=R,E=R);return Je&&ns(v,_),N}for(F=a(v,F);!R.done;_++,R=g.next())R=j(F,v,_,R.value,k),R!==null&&(t&&R.alternate!==null&&F.delete(R.key===null?_:R.key),b=l(R,b,_),E===null?N=R:E.sibling=R,E=R);return t&&F.forEach(function(V){return r(v,V)}),Je&&ns(v,_),N}function y(v,b,g,k){if(typeof g=="object"&&g!==null&&g.type===Ss&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case on:e:{for(var N=g.key,E=b;E!==null;){if(E.key===N){if(N=g.type,N===Ss){if(E.tag===7){s(v,E.sibling),b=n(E,g.props.children),b.return=v,v=b;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Dr&&Nd(N)===E.type){s(v,E.sibling),b=n(E,g.props),b.ref=ua(v,E,g),b.return=v,v=b;break e}s(v,E);break}else r(v,E);E=E.sibling}g.type===Ss?(b=ms(g.props.children,v.mode,k,g.key),b.return=v,v=b):(k=On(g.type,g.key,g.props,null,v.mode,k),k.ref=ua(v,b,g),k.return=v,v=k)}return o(v);case Cs:e:{for(E=g.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===g.containerInfo&&b.stateNode.implementation===g.implementation){s(v,b.sibling),b=n(b,g.children||[]),b.return=v,v=b;break e}else{s(v,b);break}else r(v,b);b=b.sibling}b=jo(g,v.mode,k),b.return=v,v=b}return o(v);case Dr:return E=g._init,y(v,b,E(g._payload),k)}if(ya(g))return h(v,b,g,k);if(la(g))return p(v,b,g,k);vn(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,b!==null&&b.tag===6?(s(v,b.sibling),b=n(b,g),b.return=v,v=b):(s(v,b),b=bo(g,v.mode,k),b.return=v,v=b),o(v)):s(v,b)}return y}var qs=s0(!0),a0=s0(!1),nl=es(null),ll=null,As=null,sc=null;function ac(){sc=As=ll=null}function nc(t){var r=nl.current;Ge(nl),t._currentValue=r}function li(t,r,s){for(;t!==null;){var a=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,a!==null&&(a.childLanes|=r)):a!==null&&(a.childLanes&r)!==r&&(a.childLanes|=r),t===s)break;t=t.return}}function Os(t,r){ll=t,sc=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(At=!0),t.firstContext=null)}function Jt(t){var r=t._currentValue;if(sc!==t)if(t={context:t,memoizedValue:r,next:null},As===null){if(ll===null)throw Error(pe(308));As=t,ll.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return r}var is=null;function lc(t){is===null?is=[t]:is.push(t)}function n0(t,r,s,a){var n=r.interleaved;return n===null?(s.next=s,lc(r)):(s.next=n.next,n.next=s),r.interleaved=s,Lr(t,a)}function Lr(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Rr=!1;function oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Sr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function qr(t,r,s){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Ve&2){var n=a.pending;return n===null?r.next=r:(r.next=n.next,n.next=r),a.pending=r,Lr(t,s)}return n=a.interleaved,n===null?(r.next=r,lc(a)):(r.next=n.next,n.next=r),a.interleaved=r,Lr(t,s)}function Dn(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,qi(t,s)}}function Cd(t,r){var s=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?n=l=r:l=l.next=r}else n=l=r;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function ol(t,r,s,a){var n=t.updateQueue;Rr=!1;var l=n.firstBaseUpdate,o=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var d=c,x=d.next;d.next=null,o===null?l=x:o.next=x,o=d;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=x:c.next=x,m.lastBaseUpdate=d))}if(l!==null){var u=n.baseState;o=0,m=x=d=null,c=l;do{var f=c.lane,j=c.eventTime;if((a&f)===f){m!==null&&(m=m.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var h=t,p=c;switch(f=r,j=s,p.tag){case 1:if(h=p.payload,typeof h=="function"){u=h.call(j,u,f);break e}u=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,f=typeof h=="function"?h.call(j,u,f):h,f==null)break e;u=tt({},u,f);break e;case 2:Rr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[c]:f.push(c))}else j={eventTime:j,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(x=m=j,d=u):m=m.next=j,o|=f;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;f=c,c=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(m===null&&(d=u),n.baseState=d,n.firstBaseUpdate=x,n.lastBaseUpdate=m,r=n.shared.interleaved,r!==null){n=r;do o|=n.lane,n=n.next;while(n!==r)}else l===null&&(n.shared.lanes=0);fs|=o,t.lanes=o,t.memoizedState=u}}function Sd(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var a=t[r],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(pe(191,n));n.call(a)}}}var Za={},yr=es(Za),Oa=es(Za),Wa=es(Za);function cs(t){if(t===Za)throw Error(pe(174));return t}function ic(t,r){switch(Ke(Wa,r),Ke(Oa,t),Ke(yr,Za),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:$o(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=$o(r,t)}Ge(yr),Ke(yr,r)}function Qs(){Ge(yr),Ge(Oa),Ge(Wa)}function o0(t){cs(Wa.current);var r=cs(yr.current),s=$o(r,t.type);r!==s&&(Ke(Oa,t),Ke(yr,s))}function cc(t){Oa.current===t&&(Ge(yr),Ge(Oa))}var Xe=es(0);function il(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var po=[];function dc(){for(var t=0;t<po.length;t++)po[t]._workInProgressVersionPrimary=null;po.length=0}var Rn=Pr.ReactCurrentDispatcher,ho=Pr.ReactCurrentBatchConfig,gs=0,Ze=null,xt=null,gt=null,cl=!1,Sa=!1,Ua=0,Kh=0;function Nt(){throw Error(pe(321))}function uc(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!ir(t[s],r[s]))return!1;return!0}function mc(t,r,s,a,n,l){if(gs=l,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Rn.current=t===null||t.memoizedState===null?Xh:Zh,t=s(a,n),Sa){l=0;do{if(Sa=!1,Ua=0,25<=l)throw Error(pe(301));l+=1,gt=xt=null,r.updateQueue=null,Rn.current=eg,t=s(a,n)}while(Sa)}if(Rn.current=dl,r=xt!==null&&xt.next!==null,gs=0,gt=xt=Ze=null,cl=!1,r)throw Error(pe(300));return t}function xc(){var t=Ua!==0;return Ua=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ze.memoizedState=gt=t:gt=gt.next=t,gt}function Xt(){if(xt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var r=gt===null?Ze.memoizedState:gt.next;if(r!==null)gt=r,xt=t;else{if(t===null)throw Error(pe(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},gt===null?Ze.memoizedState=gt=t:gt=gt.next=t}return gt}function Va(t,r){return typeof r=="function"?r(t):r}function go(t){var r=Xt(),s=r.queue;if(s===null)throw Error(pe(311));s.lastRenderedReducer=t;var a=xt,n=a.baseQueue,l=s.pending;if(l!==null){if(n!==null){var o=n.next;n.next=l.next,l.next=o}a.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,a=a.baseState;var c=o=null,d=null,x=l;do{var m=x.lane;if((gs&m)===m)d!==null&&(d=d.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),a=x.hasEagerState?x.eagerState:t(a,x.action);else{var u={lane:m,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};d===null?(c=d=u,o=a):d=d.next=u,Ze.lanes|=m,fs|=m}x=x.next}while(x!==null&&x!==l);d===null?o=a:d.next=c,ir(a,r.memoizedState)||(At=!0),r.memoizedState=a,r.baseState=o,r.baseQueue=d,s.lastRenderedState=a}if(t=s.interleaved,t!==null){n=t;do l=n.lane,Ze.lanes|=l,fs|=l,n=n.next;while(n!==t)}else n===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function fo(t){var r=Xt(),s=r.queue;if(s===null)throw Error(pe(311));s.lastRenderedReducer=t;var a=s.dispatch,n=s.pending,l=r.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do l=t(l,o.action),o=o.next;while(o!==n);ir(l,r.memoizedState)||(At=!0),r.memoizedState=l,r.baseQueue===null&&(r.baseState=l),s.lastRenderedState=l}return[l,a]}function i0(){}function c0(t,r){var s=Ze,a=Xt(),n=r(),l=!ir(a.memoizedState,n);if(l&&(a.memoizedState=n,At=!0),a=a.queue,pc(m0.bind(null,s,a,t),[t]),a.getSnapshot!==r||l||gt!==null&&gt.memoizedState.tag&1){if(s.flags|=2048,Ha(9,u0.bind(null,s,a,n,r),void 0,null),ft===null)throw Error(pe(349));gs&30||d0(s,r,n)}return n}function d0(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function u0(t,r,s,a){r.value=s,r.getSnapshot=a,x0(r)&&p0(t)}function m0(t,r,s){return s(function(){x0(r)&&p0(t)})}function x0(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!ir(t,s)}catch{return!0}}function p0(t){var r=Lr(t,1);r!==null&&or(r,t,1,-1)}function _d(t){var r=hr();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},r.queue=t,t=t.dispatch=Jh.bind(null,Ze,t),[r.memoizedState,t]}function Ha(t,r,s,a){return t={tag:t,create:r,destroy:s,deps:a,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(a=s.next,s.next=t,t.next=a,r.lastEffect=t)),t}function h0(){return Xt().memoizedState}function In(t,r,s,a){var n=hr();Ze.flags|=t,n.memoizedState=Ha(1|r,s,void 0,a===void 0?null:a)}function _l(t,r,s,a){var n=Xt();a=a===void 0?null:a;var l=void 0;if(xt!==null){var o=xt.memoizedState;if(l=o.destroy,a!==null&&uc(a,o.deps)){n.memoizedState=Ha(r,s,l,a);return}}Ze.flags|=t,n.memoizedState=Ha(1|r,s,l,a)}function Md(t,r){return In(8390656,8,t,r)}function pc(t,r){return _l(2048,8,t,r)}function g0(t,r){return _l(4,2,t,r)}function f0(t,r){return _l(4,4,t,r)}function y0(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function v0(t,r,s){return s=s!=null?s.concat([t]):null,_l(4,4,y0.bind(null,r,t),s)}function hc(){}function b0(t,r){var s=Xt();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&uc(r,a[1])?a[0]:(s.memoizedState=[t,r],t)}function j0(t,r){var s=Xt();r=r===void 0?null:r;var a=s.memoizedState;return a!==null&&r!==null&&uc(r,a[1])?a[0]:(t=t(),s.memoizedState=[t,r],t)}function k0(t,r,s){return gs&21?(ir(s,r)||(s=_m(),Ze.lanes|=s,fs|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=s)}function Yh(t,r){var s=qe;qe=s!==0&&4>s?s:4,t(!0);var a=ho.transition;ho.transition={};try{t(!1),r()}finally{qe=s,ho.transition=a}}function w0(){return Xt().memoizedState}function Gh(t,r,s){var a=Kr(t);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},N0(t))C0(r,s);else if(s=n0(t,r,s,a),s!==null){var n=Tt();or(s,t,a,n),S0(s,r,a)}}function Jh(t,r,s){var a=Kr(t),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(N0(t))C0(r,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=r.lastRenderedReducer,l!==null))try{var o=r.lastRenderedState,c=l(o,s);if(n.hasEagerState=!0,n.eagerState=c,ir(c,o)){var d=r.interleaved;d===null?(n.next=n,lc(r)):(n.next=d.next,d.next=n),r.interleaved=n;return}}catch{}finally{}s=n0(t,r,n,a),s!==null&&(n=Tt(),or(s,t,a,n),S0(s,r,a))}}function N0(t){var r=t.alternate;return t===Ze||r!==null&&r===Ze}function C0(t,r){Sa=cl=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function S0(t,r,s){if(s&4194240){var a=r.lanes;a&=t.pendingLanes,s|=a,r.lanes=s,qi(t,s)}}var dl={readContext:Jt,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},Xh={readContext:Jt,useCallback:function(t,r){return hr().memoizedState=[t,r===void 0?null:r],t},useContext:Jt,useEffect:Md,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,In(4194308,4,y0.bind(null,r,t),s)},useLayoutEffect:function(t,r){return In(4194308,4,t,r)},useInsertionEffect:function(t,r){return In(4,2,t,r)},useMemo:function(t,r){var s=hr();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var a=hr();return r=s!==void 0?s(r):r,a.memoizedState=a.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=Gh.bind(null,Ze,t),[a.memoizedState,t]},useRef:function(t){var r=hr();return t={current:t},r.memoizedState=t},useState:_d,useDebugValue:hc,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=_d(!1),r=t[0];return t=Yh.bind(null,t[1]),hr().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var a=Ze,n=hr();if(Je){if(s===void 0)throw Error(pe(407));s=s()}else{if(s=r(),ft===null)throw Error(pe(349));gs&30||d0(a,r,s)}n.memoizedState=s;var l={value:s,getSnapshot:r};return n.queue=l,Md(m0.bind(null,a,l,t),[t]),a.flags|=2048,Ha(9,u0.bind(null,a,l,s,r),void 0,null),s},useId:function(){var t=hr(),r=ft.identifierPrefix;if(Je){var s=Cr,a=Nr;s=(a&~(1<<32-lr(a)-1)).toString(32)+s,r=":"+r+"R"+s,s=Ua++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=Kh++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Zh={readContext:Jt,useCallback:b0,useContext:Jt,useEffect:pc,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:f0,useMemo:j0,useReducer:go,useRef:h0,useState:function(){return go(Va)},useDebugValue:hc,useDeferredValue:function(t){var r=Xt();return k0(r,xt.memoizedState,t)},useTransition:function(){var t=go(Va)[0],r=Xt().memoizedState;return[t,r]},useMutableSource:i0,useSyncExternalStore:c0,useId:w0,unstable_isNewReconciler:!1},eg={readContext:Jt,useCallback:b0,useContext:Jt,useEffect:pc,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:f0,useMemo:j0,useReducer:fo,useRef:h0,useState:function(){return fo(Va)},useDebugValue:hc,useDeferredValue:function(t){var r=Xt();return xt===null?r.memoizedState=t:k0(r,xt.memoizedState,t)},useTransition:function(){var t=fo(Va)[0],r=Xt().memoizedState;return[t,r]},useMutableSource:i0,useSyncExternalStore:c0,useId:w0,unstable_isNewReconciler:!1};function sr(t,r){if(t&&t.defaultProps){r=tt({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function oi(t,r,s,a){r=t.memoizedState,s=s(a,r),s=s==null?r:tt({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ml={isMounted:function(t){return(t=t._reactInternals)?js(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var a=Tt(),n=Kr(t),l=Sr(a,n);l.payload=r,s!=null&&(l.callback=s),r=qr(t,l,n),r!==null&&(or(r,t,n,a),Dn(r,t,n))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var a=Tt(),n=Kr(t),l=Sr(a,n);l.tag=1,l.payload=r,s!=null&&(l.callback=s),r=qr(t,l,n),r!==null&&(or(r,t,n,a),Dn(r,t,n))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Tt(),a=Kr(t),n=Sr(s,a);n.tag=2,r!=null&&(n.callback=r),r=qr(t,n,a),r!==null&&(or(r,t,a,s),Dn(r,t,a))}};function Ld(t,r,s,a,n,l,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,o):r.prototype&&r.prototype.isPureReactComponent?!Ia(s,a)||!Ia(n,l):!0}function _0(t,r,s){var a=!1,n=Xr,l=r.contextType;return typeof l=="object"&&l!==null?l=Jt(l):(n=Rt(r)?ps:Mt.current,a=r.contextTypes,l=(a=a!=null)?Vs(t,n):Xr),r=new r(s,l),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ml,t.stateNode=r,r._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),r}function Td(t,r,s,a){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,a),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,a),r.state!==t&&Ml.enqueueReplaceState(r,r.state,null)}function ii(t,r,s,a){var n=t.stateNode;n.props=s,n.state=t.memoizedState,n.refs={},oc(t);var l=r.contextType;typeof l=="object"&&l!==null?n.context=Jt(l):(l=Rt(r)?ps:Mt.current,n.context=Vs(t,l)),n.state=t.memoizedState,l=r.getDerivedStateFromProps,typeof l=="function"&&(oi(t,r,l,s),n.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(r=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),r!==n.state&&Ml.enqueueReplaceState(n,n.state,null),ol(t,s,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,r){try{var s="",a=r;do s+=Mp(a),a=a.return;while(a);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:r,stack:n,digest:null}}function yo(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function ci(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var tg=typeof WeakMap=="function"?WeakMap:Map;function M0(t,r,s){s=Sr(-1,s),s.tag=3,s.payload={element:null};var a=r.value;return s.callback=function(){ml||(ml=!0,vi=a),ci(t,r)},s}function L0(t,r,s){s=Sr(-1,s),s.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=r.value;s.payload=function(){return a(n)},s.callback=function(){ci(t,r)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){ci(t,r),typeof a!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})}),s}function Pd(t,r,s){var a=t.pingCache;if(a===null){a=t.pingCache=new tg;var n=new Set;a.set(r,n)}else n=a.get(r),n===void 0&&(n=new Set,a.set(r,n));n.has(s)||(n.add(s),t=hg.bind(null,t,r,s),r.then(t,t))}function Ed(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Fd(t,r,s,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=Sr(-1,1),r.tag=2,qr(s,r,1))),s.lanes|=1),t)}var rg=Pr.ReactCurrentOwner,At=!1;function Lt(t,r,s,a){r.child=t===null?a0(r,null,s,a):qs(r,t.child,s,a)}function Ad(t,r,s,a,n){s=s.render;var l=r.ref;return Os(r,n),a=mc(t,r,s,a,l,n),s=xc(),t!==null&&!At?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,Tr(t,r,n)):(Je&&s&&ec(r),r.flags|=1,Lt(t,r,a,n),r.child)}function Dd(t,r,s,a,n){if(t===null){var l=s.type;return typeof l=="function"&&!wc(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=l,T0(t,r,l,a,n)):(t=On(s.type,null,a,r,r.mode,n),t.ref=r.ref,t.return=r,r.child=t)}if(l=t.child,!(t.lanes&n)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:Ia,s(o,a)&&t.ref===r.ref)return Tr(t,r,n)}return r.flags|=1,t=Yr(l,a),t.ref=r.ref,t.return=r,r.child=t}function T0(t,r,s,a,n){if(t!==null){var l=t.memoizedProps;if(Ia(l,a)&&t.ref===r.ref)if(At=!1,r.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(At=!0);else return r.lanes=t.lanes,Tr(t,r,n)}return di(t,r,s,a,n)}function P0(t,r,s){var a=r.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Rs,$t),$t|=s;else{if(!(s&1073741824))return t=l!==null?l.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Ke(Rs,$t),$t|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:s,Ke(Rs,$t),$t|=a}else l!==null?(a=l.baseLanes|s,r.memoizedState=null):a=s,Ke(Rs,$t),$t|=a;return Lt(t,r,n,s),r.child}function E0(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function di(t,r,s,a,n){var l=Rt(s)?ps:Mt.current;return l=Vs(r,l),Os(r,n),s=mc(t,r,s,a,l,n),a=xc(),t!==null&&!At?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~n,Tr(t,r,n)):(Je&&a&&ec(r),r.flags|=1,Lt(t,r,s,n),r.child)}function Rd(t,r,s,a,n){if(Rt(s)){var l=!0;rl(r)}else l=!1;if(Os(r,n),r.stateNode===null)Bn(t,r),_0(r,s,a),ii(r,s,a,n),a=!0;else if(t===null){var o=r.stateNode,c=r.memoizedProps;o.props=c;var d=o.context,x=s.contextType;typeof x=="object"&&x!==null?x=Jt(x):(x=Rt(s)?ps:Mt.current,x=Vs(r,x));var m=s.getDerivedStateFromProps,u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==a||d!==x)&&Td(r,o,a,x),Rr=!1;var f=r.memoizedState;o.state=f,ol(r,a,o,n),d=r.memoizedState,c!==a||f!==d||Dt.current||Rr?(typeof m=="function"&&(oi(r,s,m,a),d=r.memoizedState),(c=Rr||Ld(r,s,c,a,f,d,x))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(r.flags|=4194308)):(typeof o.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=a,r.memoizedState=d),o.props=a,o.state=d,o.context=x,a=c):(typeof o.componentDidMount=="function"&&(r.flags|=4194308),a=!1)}else{o=r.stateNode,l0(t,r),c=r.memoizedProps,x=r.type===r.elementType?c:sr(r.type,c),o.props=x,u=r.pendingProps,f=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=Jt(d):(d=Rt(s)?ps:Mt.current,d=Vs(r,d));var j=s.getDerivedStateFromProps;(m=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==u||f!==d)&&Td(r,o,a,d),Rr=!1,f=r.memoizedState,o.state=f,ol(r,a,o,n);var h=r.memoizedState;c!==u||f!==h||Dt.current||Rr?(typeof j=="function"&&(oi(r,s,j,a),h=r.memoizedState),(x=Rr||Ld(r,s,x,a,f,h,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,h,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,h,d)),typeof o.componentDidUpdate=="function"&&(r.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(r.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(r.flags|=1024),r.memoizedProps=a,r.memoizedState=h),o.props=a,o.state=h,o.context=d,a=x):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(r.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&f===t.memoizedState||(r.flags|=1024),a=!1)}return ui(t,r,s,a,l,n)}function ui(t,r,s,a,n,l){E0(t,r);var o=(r.flags&128)!==0;if(!a&&!o)return n&&jd(r,s,!1),Tr(t,r,l);a=r.stateNode,rg.current=r;var c=o&&typeof s.getDerivedStateFromError!="function"?null:a.render();return r.flags|=1,t!==null&&o?(r.child=qs(r,t.child,null,l),r.child=qs(r,null,c,l)):Lt(t,r,c,l),r.memoizedState=a.state,n&&jd(r,s,!0),r.child}function F0(t){var r=t.stateNode;r.pendingContext?bd(t,r.pendingContext,r.pendingContext!==r.context):r.context&&bd(t,r.context,!1),ic(t,r.containerInfo)}function Id(t,r,s,a,n){return Hs(),rc(n),r.flags|=256,Lt(t,r,s,a),r.child}var mi={dehydrated:null,treeContext:null,retryLane:0};function xi(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,r,s){var a=r.pendingProps,n=Xe.current,l=!1,o=(r.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(n&2)!==0),c?(l=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),Ke(Xe,n&1),t===null)return ni(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(o=a.children,t=a.fallback,l?(a=r.mode,l=r.child,o={mode:"hidden",children:o},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Pl(o,a,0,null),t=ms(t,a,s,null),l.return=r,t.return=r,l.sibling=t,r.child=l,r.child.memoizedState=xi(s),r.memoizedState=mi,t):gc(r,o));if(n=t.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return sg(t,r,o,a,c,n,s);if(l){l=a.fallback,o=r.mode,n=t.child,c=n.sibling;var d={mode:"hidden",children:a.children};return!(o&1)&&r.child!==n?(a=r.child,a.childLanes=0,a.pendingProps=d,r.deletions=null):(a=Yr(n,d),a.subtreeFlags=n.subtreeFlags&14680064),c!==null?l=Yr(c,l):(l=ms(l,o,s,null),l.flags|=2),l.return=r,a.return=r,a.sibling=l,r.child=a,a=l,l=r.child,o=t.child.memoizedState,o=o===null?xi(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=t.childLanes&~s,r.memoizedState=mi,a}return l=t.child,t=l.sibling,a=Yr(l,{mode:"visible",children:a.children}),!(r.mode&1)&&(a.lanes=s),a.return=r,a.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=a,r.memoizedState=null,a}function gc(t,r){return r=Pl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function bn(t,r,s,a){return a!==null&&rc(a),qs(r,t.child,null,s),t=gc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function sg(t,r,s,a,n,l,o){if(s)return r.flags&256?(r.flags&=-257,a=yo(Error(pe(422))),bn(t,r,o,a)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(l=a.fallback,n=r.mode,a=Pl({mode:"visible",children:a.children},n,0,null),l=ms(l,n,o,null),l.flags|=2,a.return=r,l.return=r,a.sibling=l,r.child=a,r.mode&1&&qs(r,t.child,null,o),r.child.memoizedState=xi(o),r.memoizedState=mi,l);if(!(r.mode&1))return bn(t,r,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var c=a.dgst;return a=c,l=Error(pe(419)),a=yo(l,a,void 0),bn(t,r,o,a)}if(c=(o&t.childLanes)!==0,At||c){if(a=ft,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Lr(t,n),or(a,t,n,-1))}return kc(),a=yo(Error(pe(421))),bn(t,r,o,a)}return n.data==="$?"?(r.flags|=128,r.child=t.child,r=gg.bind(null,t),n._reactRetry=r,null):(t=l.treeContext,Ot=Hr(n.nextSibling),Wt=r,Je=!0,nr=null,t!==null&&(qt[Qt++]=Nr,qt[Qt++]=Cr,qt[Qt++]=hs,Nr=t.id,Cr=t.overflow,hs=r),r=gc(r,a.children),r.flags|=4096,r)}function Bd(t,r,s){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r),li(t.return,r,s)}function vo(t,r,s,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(l.isBackwards=r,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=n)}function D0(t,r,s){var a=r.pendingProps,n=a.revealOrder,l=a.tail;if(Lt(t,r,a.children,s),a=Xe.current,a&2)a=a&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bd(t,s,r);else if(t.tag===19)Bd(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Ke(Xe,a),!(r.mode&1))r.memoizedState=null;else switch(n){case"forwards":for(s=r.child,n=null;s!==null;)t=s.alternate,t!==null&&il(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=r.child,r.child=null):(n=s.sibling,s.sibling=null),vo(r,!1,n,s,l);break;case"backwards":for(s=null,n=r.child,r.child=null;n!==null;){if(t=n.alternate,t!==null&&il(t)===null){r.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}vo(r,!0,s,null,l);break;case"together":vo(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bn(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Tr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),fs|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(pe(153));if(r.child!==null){for(t=r.child,s=Yr(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=Yr(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function ag(t,r,s){switch(r.tag){case 3:F0(r),Hs();break;case 5:o0(r);break;case 1:Rt(r.type)&&rl(r);break;case 4:ic(r,r.stateNode.containerInfo);break;case 10:var a=r.type._context,n=r.memoizedProps.value;Ke(nl,a._currentValue),a._currentValue=n;break;case 13:if(a=r.memoizedState,a!==null)return a.dehydrated!==null?(Ke(Xe,Xe.current&1),r.flags|=128,null):s&r.child.childLanes?A0(t,r,s):(Ke(Xe,Xe.current&1),t=Tr(t,r,s),t!==null?t.sibling:null);Ke(Xe,Xe.current&1);break;case 19:if(a=(s&r.childLanes)!==0,t.flags&128){if(a)return D0(t,r,s);r.flags|=128}if(n=r.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ke(Xe,Xe.current),a)break;return null;case 22:case 23:return r.lanes=0,P0(t,r,s)}return Tr(t,r,s)}var R0,pi,I0,B0;R0=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};pi=function(){};I0=function(t,r,s,a){var n=t.memoizedProps;if(n!==a){t=r.stateNode,cs(yr.current);var l=null;switch(s){case"input":n=Ro(t,n),a=Ro(t,a),l=[];break;case"select":n=tt({},n,{value:void 0}),a=tt({},a,{value:void 0}),l=[];break;case"textarea":n=zo(t,n),a=zo(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=el)}Oo(s,a);var o;s=null;for(x in n)if(!a.hasOwnProperty(x)&&n.hasOwnProperty(x)&&n[x]!=null)if(x==="style"){var c=n[x];for(o in c)c.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Ta.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in a){var d=a[x];if(c=n!=null?n[x]:void 0,a.hasOwnProperty(x)&&d!==c&&(d!=null||c!=null))if(x==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(l||(l=[]),l.push(x,s)),s=d;else x==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(x,d)):x==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(x,""+d):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Ta.hasOwnProperty(x)?(d!=null&&x==="onScroll"&&Ye("scroll",t),l||c===d||(l=[])):(l=l||[]).push(x,d))}s&&(l=l||[]).push("style",s);var x=l;(r.updateQueue=x)&&(r.flags|=4)}};B0=function(t,r,s,a){s!==a&&(r.flags|=4)};function ma(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ct(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,a=0;if(r)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=s,r}function ng(t,r,s){var a=r.pendingProps;switch(tc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(r),null;case 1:return Rt(r.type)&&tl(),Ct(r),null;case 3:return a=r.stateNode,Qs(),Ge(Dt),Ge(Mt),dc(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(yn(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,nr!==null&&(ki(nr),nr=null))),pi(t,r),Ct(r),null;case 5:cc(r);var n=cs(Wa.current);if(s=r.type,t!==null&&r.stateNode!=null)I0(t,r,s,a,n),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!a){if(r.stateNode===null)throw Error(pe(166));return Ct(r),null}if(t=cs(yr.current),yn(r)){a=r.stateNode,s=r.type;var l=r.memoizedProps;switch(a[gr]=r,a[$a]=l,t=(r.mode&1)!==0,s){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(n=0;n<ba.length;n++)Ye(ba[n],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Qc(a,l),Ye("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Ye("invalid",a);break;case"textarea":Yc(a,l),Ye("invalid",a)}Oo(s,l),n=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?a.textContent!==c&&(l.suppressHydrationWarning!==!0&&fn(a.textContent,c,t),n=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&fn(a.textContent,c,t),n=["children",""+c]):Ta.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ye("scroll",a)}switch(s){case"input":cn(a),Kc(a,l,!0);break;case"textarea":cn(a),Gc(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=el)}a=n,r.updateQueue=a,a!==null&&(r.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mm(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=o.createElement(s,{is:a.is}):(t=o.createElement(s),s==="select"&&(o=t,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):t=o.createElementNS(t,s),t[gr]=r,t[$a]=a,R0(t,r,!1,!1),r.stateNode=t;e:{switch(o=Wo(s,a),s){case"dialog":Ye("cancel",t),Ye("close",t),n=a;break;case"iframe":case"object":case"embed":Ye("load",t),n=a;break;case"video":case"audio":for(n=0;n<ba.length;n++)Ye(ba[n],t);n=a;break;case"source":Ye("error",t),n=a;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),n=a;break;case"details":Ye("toggle",t),n=a;break;case"input":Qc(t,a),n=Ro(t,a),Ye("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=tt({},a,{value:void 0}),Ye("invalid",t);break;case"textarea":Yc(t,a),n=zo(t,a),Ye("invalid",t);break;default:n=a}Oo(s,n),c=n;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?hm(t,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&xm(t,d)):l==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&Pa(t,d):typeof d=="number"&&Pa(t,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ta.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Ye("scroll",t):d!=null&&$i(t,l,d,o))}switch(s){case"input":cn(t),Kc(t,a,!1);break;case"textarea":cn(t),Gc(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Jr(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?Is(t,!!a.multiple,l,!1):a.defaultValue!=null&&Is(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=el)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ct(r),null;case 6:if(t&&r.stateNode!=null)B0(t,r,t.memoizedProps,a);else{if(typeof a!="string"&&r.stateNode===null)throw Error(pe(166));if(s=cs(Wa.current),cs(yr.current),yn(r)){if(a=r.stateNode,s=r.memoizedProps,a[gr]=r,(l=a.nodeValue!==s)&&(t=Wt,t!==null))switch(t.tag){case 3:fn(a.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fn(a.nodeValue,s,(t.mode&1)!==0)}l&&(r.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[gr]=r,r.stateNode=a}return Ct(r),null;case 13:if(Ge(Xe),a=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Je&&Ot!==null&&r.mode&1&&!(r.flags&128))r0(),Hs(),r.flags|=98560,l=!1;else if(l=yn(r),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(pe(318));if(l=r.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(pe(317));l[gr]=r}else Hs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Ct(r),l=!1}else nr!==null&&(ki(nr),nr=null),l=!0;if(!l)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,r.mode&1&&(t===null||Xe.current&1?pt===0&&(pt=3):kc())),r.updateQueue!==null&&(r.flags|=4),Ct(r),null);case 4:return Qs(),pi(t,r),t===null&&Ba(r.stateNode.containerInfo),Ct(r),null;case 10:return nc(r.type._context),Ct(r),null;case 17:return Rt(r.type)&&tl(),Ct(r),null;case 19:if(Ge(Xe),l=r.memoizedState,l===null)return Ct(r),null;if(a=(r.flags&128)!==0,o=l.rendering,o===null)if(a)ma(l,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(o=il(t),o!==null){for(r.flags|=128,ma(l,!1),a=o.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),r.subtreeFlags=0,a=s,s=r.child;s!==null;)l=s,t=a,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,t=o.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Ke(Xe,Xe.current&1|2),r.child}t=t.sibling}l.tail!==null&&lt()>Ys&&(r.flags|=128,a=!0,ma(l,!1),r.lanes=4194304)}else{if(!a)if(t=il(o),t!==null){if(r.flags|=128,a=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),ma(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return Ct(r),null}else 2*lt()-l.renderingStartTime>Ys&&s!==1073741824&&(r.flags|=128,a=!0,ma(l,!1),r.lanes=4194304);l.isBackwards?(o.sibling=r.child,r.child=o):(s=l.last,s!==null?s.sibling=o:r.child=o,l.last=o)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.renderingStartTime=lt(),r.sibling=null,s=Xe.current,Ke(Xe,a?s&1|2:s&1),r):(Ct(r),null);case 22:case 23:return jc(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&r.mode&1?$t&1073741824&&(Ct(r),r.subtreeFlags&6&&(r.flags|=8192)):Ct(r),null;case 24:return null;case 25:return null}throw Error(pe(156,r.tag))}function lg(t,r){switch(tc(r),r.tag){case 1:return Rt(r.type)&&tl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Qs(),Ge(Dt),Ge(Mt),dc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return cc(r),null;case 13:if(Ge(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(pe(340));Hs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ge(Xe),null;case 4:return Qs(),null;case 10:return nc(r.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var jn=!1,St=!1,og=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Ds(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){st(t,r,a)}else s.current=null}function hi(t,r,s){try{s()}catch(a){st(t,r,a)}}var zd=!1;function ig(t,r){if(Xo=Jn,t=Um(),Zi(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,c=-1,d=-1,x=0,m=0,u=t,f=null;t:for(;;){for(var j;u!==s||n!==0&&u.nodeType!==3||(c=o+n),u!==l||a!==0&&u.nodeType!==3||(d=o+a),u.nodeType===3&&(o+=u.nodeValue.length),(j=u.firstChild)!==null;)f=u,u=j;for(;;){if(u===t)break t;if(f===s&&++x===n&&(c=o),f===l&&++m===a&&(d=o),(j=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=j}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Zo={focusedElem:t,selectionRange:s},Jn=!1,Me=r;Me!==null;)if(r=Me,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Me=t;else for(;Me!==null;){r=Me;try{var h=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,y=h.memoizedState,v=r.stateNode,b=v.getSnapshotBeforeUpdate(r.elementType===r.type?p:sr(r.type,p),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var g=r.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(k){st(r,r.return,k)}if(t=r.sibling,t!==null){t.return=r.return,Me=t;break}Me=r.return}return h=zd,zd=!1,h}function _a(t,r,s){var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&hi(r,s,l)}n=n.next}while(n!==a)}}function Ll(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.create;s.destroy=a()}s=s.next}while(s!==r)}}function gi(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function z0(t){var r=t.alternate;r!==null&&(t.alternate=null,z0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[gr],delete r[$a],delete r[ri],delete r[Vh],delete r[Hh])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $0(t){return t.tag===5||t.tag===3||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fi(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=el));else if(a!==4&&(t=t.child,t!==null))for(fi(t,r,s),t=t.sibling;t!==null;)fi(t,r,s),t=t.sibling}function yi(t,r,s){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(yi(t,r,s),t=t.sibling;t!==null;)yi(t,r,s),t=t.sibling}var jt=null,ar=!1;function Ar(t,r,s){for(s=s.child;s!==null;)O0(t,r,s),s=s.sibling}function O0(t,r,s){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(jl,s)}catch{}switch(s.tag){case 5:St||Ds(s,r);case 6:var a=jt,n=ar;jt=null,Ar(t,r,s),jt=a,ar=n,jt!==null&&(ar?(t=jt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):jt.removeChild(s.stateNode));break;case 18:jt!==null&&(ar?(t=jt,s=s.stateNode,t.nodeType===8?mo(t.parentNode,s):t.nodeType===1&&mo(t,s),Da(t)):mo(jt,s.stateNode));break;case 4:a=jt,n=ar,jt=s.stateNode.containerInfo,ar=!0,Ar(t,r,s),jt=a,ar=n;break;case 0:case 11:case 14:case 15:if(!St&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&hi(s,r,o),n=n.next}while(n!==a)}Ar(t,r,s);break;case 1:if(!St&&(Ds(s,r),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(c){st(s,r,c)}Ar(t,r,s);break;case 21:Ar(t,r,s);break;case 22:s.mode&1?(St=(a=St)||s.memoizedState!==null,Ar(t,r,s),St=a):Ar(t,r,s);break;default:Ar(t,r,s)}}function Od(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new og),r.forEach(function(a){var n=fg.bind(null,t,a);s.has(a)||(s.add(a),a.then(n,n))})}}function rr(t,r){var s=r.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var l=t,o=r,c=o;e:for(;c!==null;){switch(c.tag){case 5:jt=c.stateNode,ar=!1;break e;case 3:jt=c.stateNode.containerInfo,ar=!0;break e;case 4:jt=c.stateNode.containerInfo,ar=!0;break e}c=c.return}if(jt===null)throw Error(pe(160));O0(l,o,n),jt=null,ar=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(x){st(n,r,x)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)W0(r,t),r=r.sibling}function W0(t,r){var s=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(r,t),xr(t),a&4){try{_a(3,t,t.return),Ll(3,t)}catch(p){st(t,t.return,p)}try{_a(5,t,t.return)}catch(p){st(t,t.return,p)}}break;case 1:rr(r,t),xr(t),a&512&&s!==null&&Ds(s,s.return);break;case 5:if(rr(r,t),xr(t),a&512&&s!==null&&Ds(s,s.return),t.flags&32){var n=t.stateNode;try{Pa(n,"")}catch(p){st(t,t.return,p)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,o=s!==null?s.memoizedProps:l,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&dm(n,l),Wo(c,o);var x=Wo(c,l);for(o=0;o<d.length;o+=2){var m=d[o],u=d[o+1];m==="style"?hm(n,u):m==="dangerouslySetInnerHTML"?xm(n,u):m==="children"?Pa(n,u):$i(n,m,u,x)}switch(c){case"input":Io(n,l);break;case"textarea":um(n,l);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?Is(n,!!l.multiple,j,!1):f!==!!l.multiple&&(l.defaultValue!=null?Is(n,!!l.multiple,l.defaultValue,!0):Is(n,!!l.multiple,l.multiple?[]:"",!1))}n[$a]=l}catch(p){st(t,t.return,p)}}break;case 6:if(rr(r,t),xr(t),a&4){if(t.stateNode===null)throw Error(pe(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(p){st(t,t.return,p)}}break;case 3:if(rr(r,t),xr(t),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Da(r.containerInfo)}catch(p){st(t,t.return,p)}break;case 4:rr(r,t),xr(t);break;case 13:rr(r,t),xr(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(vc=lt())),a&4&&Od(t);break;case 22:if(m=s!==null&&s.memoizedState!==null,t.mode&1?(St=(x=St)||m,rr(r,t),St=x):rr(r,t),xr(t),a&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!m&&t.mode&1)for(Me=t,m=t.child;m!==null;){for(u=Me=m;Me!==null;){switch(f=Me,j=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:Ds(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){a=f,s=f.return;try{r=a,h.props=r.memoizedProps,h.state=r.memoizedState,h.componentWillUnmount()}catch(p){st(a,s,p)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){Ud(u);continue}}j!==null?(j.return=f,Me=j):Ud(u)}m=m.sibling}e:for(m=null,u=t;;){if(u.tag===5){if(m===null){m=u;try{n=u.stateNode,x?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=u.stateNode,d=u.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=pm("display",o))}catch(p){st(t,t.return,p)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=x?"":u.memoizedProps}catch(p){st(t,t.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:rr(r,t),xr(t),a&4&&Od(t);break;case 21:break;default:rr(r,t),xr(t)}}function xr(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if($0(s)){var a=s;break e}s=s.return}throw Error(pe(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Pa(n,""),a.flags&=-33);var l=$d(t);yi(t,l,n);break;case 3:case 4:var o=a.stateNode.containerInfo,c=$d(t);fi(t,c,o);break;default:throw Error(pe(161))}}catch(d){st(t,t.return,d)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function cg(t,r,s){Me=t,U0(t)}function U0(t,r,s){for(var a=(t.mode&1)!==0;Me!==null;){var n=Me,l=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||jn;if(!o){var c=n.alternate,d=c!==null&&c.memoizedState!==null||St;c=jn;var x=St;if(jn=o,(St=d)&&!x)for(Me=n;Me!==null;)o=Me,d=o.child,o.tag===22&&o.memoizedState!==null?Vd(n):d!==null?(d.return=o,Me=d):Vd(n);for(;l!==null;)Me=l,U0(l),l=l.sibling;Me=n,jn=c,St=x}Wd(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,Me=l):Wd(t)}}function Wd(t){for(;Me!==null;){var r=Me;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:St||Ll(5,r);break;case 1:var a=r.stateNode;if(r.flags&4&&!St)if(s===null)a.componentDidMount();else{var n=r.elementType===r.type?s.memoizedProps:sr(r.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=r.updateQueue;l!==null&&Sd(r,l,a);break;case 3:var o=r.updateQueue;if(o!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}Sd(r,o,s)}break;case 5:var c=r.stateNode;if(s===null&&r.flags&4){s=c;var d=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var x=r.alternate;if(x!==null){var m=x.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&Da(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}St||r.flags&512&&gi(r)}catch(f){st(r,r.return,f)}}if(r===t){Me=null;break}if(s=r.sibling,s!==null){s.return=r.return,Me=s;break}Me=r.return}}function Ud(t){for(;Me!==null;){var r=Me;if(r===t){Me=null;break}var s=r.sibling;if(s!==null){s.return=r.return,Me=s;break}Me=r.return}}function Vd(t){for(;Me!==null;){var r=Me;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Ll(4,r)}catch(d){st(r,s,d)}break;case 1:var a=r.stateNode;if(typeof a.componentDidMount=="function"){var n=r.return;try{a.componentDidMount()}catch(d){st(r,n,d)}}var l=r.return;try{gi(r)}catch(d){st(r,l,d)}break;case 5:var o=r.return;try{gi(r)}catch(d){st(r,o,d)}}}catch(d){st(r,r.return,d)}if(r===t){Me=null;break}var c=r.sibling;if(c!==null){c.return=r.return,Me=c;break}Me=r.return}}var dg=Math.ceil,ul=Pr.ReactCurrentDispatcher,fc=Pr.ReactCurrentOwner,Gt=Pr.ReactCurrentBatchConfig,Ve=0,ft=null,ut=null,kt=0,$t=0,Rs=es(0),pt=0,qa=null,fs=0,Tl=0,yc=0,Ma=null,Ft=null,vc=0,Ys=1/0,kr=null,ml=!1,vi=null,Qr=null,kn=!1,$r=null,xl=0,La=0,bi=null,zn=-1,$n=0;function Tt(){return Ve&6?lt():zn!==-1?zn:zn=lt()}function Kr(t){return t.mode&1?Ve&2&&kt!==0?kt&-kt:Qh.transition!==null?($n===0&&($n=_m()),$n):(t=qe,t!==0||(t=window.event,t=t===void 0?16:Am(t.type)),t):1}function or(t,r,s,a){if(50<La)throw La=0,bi=null,Error(pe(185));Ga(t,s,a),(!(Ve&2)||t!==ft)&&(t===ft&&(!(Ve&2)&&(Tl|=s),pt===4&&Br(t,kt)),It(t,a),s===1&&Ve===0&&!(r.mode&1)&&(Ys=lt()+500,Sl&&ts()))}function It(t,r){var s=t.callbackNode;Qp(t,r);var a=Gn(t,t===ft?kt:0);if(a===0)s!==null&&Zc(s),t.callbackNode=null,t.callbackPriority=0;else if(r=a&-a,t.callbackPriority!==r){if(s!=null&&Zc(s),r===1)t.tag===0?qh(Hd.bind(null,t)):Zm(Hd.bind(null,t)),Wh(function(){!(Ve&6)&&ts()}),s=null;else{switch(Mm(a)){case 1:s=Hi;break;case 4:s=Cm;break;case 16:s=Yn;break;case 536870912:s=Sm;break;default:s=Yn}s=J0(s,V0.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function V0(t,r){if(zn=-1,$n=0,Ve&6)throw Error(pe(327));var s=t.callbackNode;if(Ws()&&t.callbackNode!==s)return null;var a=Gn(t,t===ft?kt:0);if(a===0)return null;if(a&30||a&t.expiredLanes||r)r=pl(t,a);else{r=a;var n=Ve;Ve|=2;var l=q0();(ft!==t||kt!==r)&&(kr=null,Ys=lt()+500,us(t,r));do try{xg();break}catch(c){H0(t,c)}while(!0);ac(),ul.current=l,Ve=n,ut!==null?r=0:(ft=null,kt=0,r=pt)}if(r!==0){if(r===2&&(n=Qo(t),n!==0&&(a=n,r=ji(t,n))),r===1)throw s=qa,us(t,0),Br(t,a),It(t,lt()),s;if(r===6)Br(t,a);else{if(n=t.current.alternate,!(a&30)&&!ug(n)&&(r=pl(t,a),r===2&&(l=Qo(t),l!==0&&(a=l,r=ji(t,l))),r===1))throw s=qa,us(t,0),Br(t,a),It(t,lt()),s;switch(t.finishedWork=n,t.finishedLanes=a,r){case 0:case 1:throw Error(pe(345));case 2:ls(t,Ft,kr);break;case 3:if(Br(t,a),(a&130023424)===a&&(r=vc+500-lt(),10<r)){if(Gn(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Tt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=ti(ls.bind(null,t,Ft,kr),r);break}ls(t,Ft,kr);break;case 4:if(Br(t,a),(a&4194240)===a)break;for(r=t.eventTimes,n=-1;0<a;){var o=31-lr(a);l=1<<o,o=r[o],o>n&&(n=o),a&=~l}if(a=n,a=lt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*dg(a/1960))-a,10<a){t.timeoutHandle=ti(ls.bind(null,t,Ft,kr),a);break}ls(t,Ft,kr);break;case 5:ls(t,Ft,kr);break;default:throw Error(pe(329))}}}return It(t,lt()),t.callbackNode===s?V0.bind(null,t):null}function ji(t,r){var s=Ma;return t.current.memoizedState.isDehydrated&&(us(t,r).flags|=256),t=pl(t,r),t!==2&&(r=Ft,Ft=s,r!==null&&ki(r)),t}function ki(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function ug(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],l=n.getSnapshot;n=n.value;try{if(!ir(l(),n))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Br(t,r){for(r&=~yc,r&=~Tl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-lr(r),a=1<<s;t[s]=-1,r&=~a}}function Hd(t){if(Ve&6)throw Error(pe(327));Ws();var r=Gn(t,0);if(!(r&1))return It(t,lt()),null;var s=pl(t,r);if(t.tag!==0&&s===2){var a=Qo(t);a!==0&&(r=a,s=ji(t,a))}if(s===1)throw s=qa,us(t,0),Br(t,r),It(t,lt()),s;if(s===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,ls(t,Ft,kr),It(t,lt()),null}function bc(t,r){var s=Ve;Ve|=1;try{return t(r)}finally{Ve=s,Ve===0&&(Ys=lt()+500,Sl&&ts())}}function ys(t){$r!==null&&$r.tag===0&&!(Ve&6)&&Ws();var r=Ve;Ve|=1;var s=Gt.transition,a=qe;try{if(Gt.transition=null,qe=1,t)return t()}finally{qe=a,Gt.transition=s,Ve=r,!(Ve&6)&&ts()}}function jc(){$t=Rs.current,Ge(Rs)}function us(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Oh(s)),ut!==null)for(s=ut.return;s!==null;){var a=s;switch(tc(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&tl();break;case 3:Qs(),Ge(Dt),Ge(Mt),dc();break;case 5:cc(a);break;case 4:Qs();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:nc(a.type._context);break;case 22:case 23:jc()}s=s.return}if(ft=t,ut=t=Yr(t.current,null),kt=$t=r,pt=0,qa=null,yc=Tl=fs=0,Ft=Ma=null,is!==null){for(r=0;r<is.length;r++)if(s=is[r],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,l=s.pending;if(l!==null){var o=l.next;l.next=n,a.next=o}s.pending=a}is=null}return t}function H0(t,r){do{var s=ut;try{if(ac(),Rn.current=dl,cl){for(var a=Ze.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}cl=!1}if(gs=0,gt=xt=Ze=null,Sa=!1,Ua=0,fc.current=null,s===null||s.return===null){pt=1,qa=r,ut=null;break}e:{var l=t,o=s.return,c=s,d=r;if(r=kt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var x=d,m=c,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var j=Ed(o);if(j!==null){j.flags&=-257,Fd(j,o,c,l,r),j.mode&1&&Pd(l,x,r),r=j,d=x;var h=r.updateQueue;if(h===null){var p=new Set;p.add(d),r.updateQueue=p}else h.add(d);break e}else{if(!(r&1)){Pd(l,x,r),kc();break e}d=Error(pe(426))}}else if(Je&&c.mode&1){var y=Ed(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Fd(y,o,c,l,r),rc(Ks(d,c));break e}}l=d=Ks(d,c),pt!==4&&(pt=2),Ma===null?Ma=[l]:Ma.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,r&=-r,l.lanes|=r;var v=M0(l,d,r);Cd(l,v);break e;case 1:c=d;var b=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof b.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qr===null||!Qr.has(g)))){l.flags|=65536,r&=-r,l.lanes|=r;var k=L0(l,c,r);Cd(l,k);break e}}l=l.return}while(l!==null)}K0(s)}catch(N){r=N,ut===s&&s!==null&&(ut=s=s.return);continue}break}while(!0)}function q0(){var t=ul.current;return ul.current=dl,t===null?dl:t}function kc(){(pt===0||pt===3||pt===2)&&(pt=4),ft===null||!(fs&268435455)&&!(Tl&268435455)||Br(ft,kt)}function pl(t,r){var s=Ve;Ve|=2;var a=q0();(ft!==t||kt!==r)&&(kr=null,us(t,r));do try{mg();break}catch(n){H0(t,n)}while(!0);if(ac(),Ve=s,ul.current=a,ut!==null)throw Error(pe(261));return ft=null,kt=0,pt}function mg(){for(;ut!==null;)Q0(ut)}function xg(){for(;ut!==null&&!Bp();)Q0(ut)}function Q0(t){var r=G0(t.alternate,t,$t);t.memoizedProps=t.pendingProps,r===null?K0(t):ut=r,fc.current=null}function K0(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=lg(s,r),s!==null){s.flags&=32767,ut=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ut=null;return}}else if(s=ng(s,r,$t),s!==null){ut=s;return}if(r=r.sibling,r!==null){ut=r;return}ut=r=t}while(r!==null);pt===0&&(pt=5)}function ls(t,r,s){var a=qe,n=Gt.transition;try{Gt.transition=null,qe=1,pg(t,r,s,a)}finally{Gt.transition=n,qe=a}return null}function pg(t,r,s,a){do Ws();while($r!==null);if(Ve&6)throw Error(pe(327));s=t.finishedWork;var n=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var l=s.lanes|s.childLanes;if(Kp(t,l),t===ft&&(ut=ft=null,kt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||kn||(kn=!0,J0(Yn,function(){return Ws(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=Gt.transition,Gt.transition=null;var o=qe;qe=1;var c=Ve;Ve|=4,fc.current=null,ig(t,s),W0(s,t),Ah(Zo),Jn=!!Xo,Zo=Xo=null,t.current=s,cg(s),zp(),Ve=c,qe=o,Gt.transition=l}else t.current=s;if(kn&&(kn=!1,$r=t,xl=n),l=t.pendingLanes,l===0&&(Qr=null),Wp(s.stateNode),It(t,lt()),r!==null)for(a=t.onRecoverableError,s=0;s<r.length;s++)n=r[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(ml)throw ml=!1,t=vi,vi=null,t;return xl&1&&t.tag!==0&&Ws(),l=t.pendingLanes,l&1?t===bi?La++:(La=0,bi=t):La=0,ts(),null}function Ws(){if($r!==null){var t=Mm(xl),r=Gt.transition,s=qe;try{if(Gt.transition=null,qe=16>t?16:t,$r===null)var a=!1;else{if(t=$r,$r=null,xl=0,Ve&6)throw Error(pe(331));var n=Ve;for(Ve|=4,Me=t.current;Me!==null;){var l=Me,o=l.child;if(Me.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var x=c[d];for(Me=x;Me!==null;){var m=Me;switch(m.tag){case 0:case 11:case 15:_a(8,m,l)}var u=m.child;if(u!==null)u.return=m,Me=u;else for(;Me!==null;){m=Me;var f=m.sibling,j=m.return;if(z0(m),m===x){Me=null;break}if(f!==null){f.return=j,Me=f;break}Me=j}}}var h=l.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}Me=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,Me=o;else e:for(;Me!==null;){if(l=Me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:_a(9,l,l.return)}var v=l.sibling;if(v!==null){v.return=l.return,Me=v;break e}Me=l.return}}var b=t.current;for(Me=b;Me!==null;){o=Me;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,Me=g;else e:for(o=b;Me!==null;){if(c=Me,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ll(9,c)}}catch(N){st(c,c.return,N)}if(c===o){Me=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,Me=k;break e}Me=c.return}}if(Ve=n,ts(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(jl,t)}catch{}a=!0}return a}finally{qe=s,Gt.transition=r}}return!1}function qd(t,r,s){r=Ks(s,r),r=M0(t,r,1),t=qr(t,r,1),r=Tt(),t!==null&&(Ga(t,1,r),It(t,r))}function st(t,r,s){if(t.tag===3)qd(t,t,s);else for(;r!==null;){if(r.tag===3){qd(r,t,s);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qr===null||!Qr.has(a))){t=Ks(s,t),t=L0(r,t,1),r=qr(r,t,1),t=Tt(),r!==null&&(Ga(r,1,t),It(r,t));break}}r=r.return}}function hg(t,r,s){var a=t.pingCache;a!==null&&a.delete(r),r=Tt(),t.pingedLanes|=t.suspendedLanes&s,ft===t&&(kt&s)===s&&(pt===4||pt===3&&(kt&130023424)===kt&&500>lt()-vc?us(t,0):yc|=s),It(t,r)}function Y0(t,r){r===0&&(t.mode&1?(r=mn,mn<<=1,!(mn&130023424)&&(mn=4194304)):r=1);var s=Tt();t=Lr(t,r),t!==null&&(Ga(t,r,s),It(t,s))}function gg(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Y0(t,s)}function fg(t,r){var s=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(pe(314))}a!==null&&a.delete(r),Y0(t,s)}var G0;G0=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Dt.current)At=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return At=!1,ag(t,r,s);At=!!(t.flags&131072)}else At=!1,Je&&r.flags&1048576&&e0(r,al,r.index);switch(r.lanes=0,r.tag){case 2:var a=r.type;Bn(t,r),t=r.pendingProps;var n=Vs(r,Mt.current);Os(r,s),n=mc(null,r,a,t,n,s);var l=xc();return r.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Rt(a)?(l=!0,rl(r)):l=!1,r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,oc(r),n.updater=Ml,r.stateNode=n,n._reactInternals=r,ii(r,a,t,s),r=ui(null,r,a,!0,l,s)):(r.tag=0,Je&&l&&ec(r),Lt(null,r,n,s),r=r.child),r;case 16:a=r.elementType;e:{switch(Bn(t,r),t=r.pendingProps,n=a._init,a=n(a._payload),r.type=a,n=r.tag=vg(a),t=sr(a,t),n){case 0:r=di(null,r,a,t,s);break e;case 1:r=Rd(null,r,a,t,s);break e;case 11:r=Ad(null,r,a,t,s);break e;case 14:r=Dd(null,r,a,sr(a.type,t),s);break e}throw Error(pe(306,a,""))}return r;case 0:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:sr(a,n),di(t,r,a,n,s);case 1:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:sr(a,n),Rd(t,r,a,n,s);case 3:e:{if(F0(r),t===null)throw Error(pe(387));a=r.pendingProps,l=r.memoizedState,n=l.element,l0(t,r),ol(r,a,null,s);var o=r.memoizedState;if(a=o.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},r.updateQueue.baseState=l,r.memoizedState=l,r.flags&256){n=Ks(Error(pe(423)),r),r=Id(t,r,a,s,n);break e}else if(a!==n){n=Ks(Error(pe(424)),r),r=Id(t,r,a,s,n);break e}else for(Ot=Hr(r.stateNode.containerInfo.firstChild),Wt=r,Je=!0,nr=null,s=a0(r,null,a,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Hs(),a===n){r=Tr(t,r,s);break e}Lt(t,r,a,s)}r=r.child}return r;case 5:return o0(r),t===null&&ni(r),a=r.type,n=r.pendingProps,l=t!==null?t.memoizedProps:null,o=n.children,ei(a,n)?o=null:l!==null&&ei(a,l)&&(r.flags|=32),E0(t,r),Lt(t,r,o,s),r.child;case 6:return t===null&&ni(r),null;case 13:return A0(t,r,s);case 4:return ic(r,r.stateNode.containerInfo),a=r.pendingProps,t===null?r.child=qs(r,null,a,s):Lt(t,r,a,s),r.child;case 11:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:sr(a,n),Ad(t,r,a,n,s);case 7:return Lt(t,r,r.pendingProps,s),r.child;case 8:return Lt(t,r,r.pendingProps.children,s),r.child;case 12:return Lt(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(a=r.type._context,n=r.pendingProps,l=r.memoizedProps,o=n.value,Ke(nl,a._currentValue),a._currentValue=o,l!==null)if(ir(l.value,o)){if(l.children===n.children&&!Dt.current){r=Tr(t,r,s);break e}}else for(l=r.child,l!==null&&(l.return=r);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===a){if(l.tag===1){d=Sr(-1,s&-s),d.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var m=x.pending;m===null?d.next=d:(d.next=m.next,m.next=d),x.pending=d}}l.lanes|=s,d=l.alternate,d!==null&&(d.lanes|=s),li(l.return,s,r),c.lanes|=s;break}d=d.next}}else if(l.tag===10)o=l.type===r.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(pe(341));o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),li(o,s,r),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===r){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Lt(t,r,n.children,s),r=r.child}return r;case 9:return n=r.type,a=r.pendingProps.children,Os(r,s),n=Jt(n),a=a(n),r.flags|=1,Lt(t,r,a,s),r.child;case 14:return a=r.type,n=sr(a,r.pendingProps),n=sr(a.type,n),Dd(t,r,a,n,s);case 15:return T0(t,r,r.type,r.pendingProps,s);case 17:return a=r.type,n=r.pendingProps,n=r.elementType===a?n:sr(a,n),Bn(t,r),r.tag=1,Rt(a)?(t=!0,rl(r)):t=!1,Os(r,s),_0(r,a,n),ii(r,a,n,s),ui(null,r,a,!0,t,s);case 19:return D0(t,r,s);case 22:return P0(t,r,s)}throw Error(pe(156,r.tag))};function J0(t,r){return Nm(t,r)}function yg(t,r,s,a){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,r,s,a){return new yg(t,r,s,a)}function wc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vg(t){if(typeof t=="function")return wc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wi)return 11;if(t===Ui)return 14}return 2}function Yr(t,r){var s=t.alternate;return s===null?(s=Yt(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function On(t,r,s,a,n,l){var o=2;if(a=t,typeof t=="function")wc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ss:return ms(s.children,n,l,r);case Oi:o=8,n|=8;break;case Eo:return t=Yt(12,s,r,n|2),t.elementType=Eo,t.lanes=l,t;case Fo:return t=Yt(13,s,r,n),t.elementType=Fo,t.lanes=l,t;case Ao:return t=Yt(19,s,r,n),t.elementType=Ao,t.lanes=l,t;case om:return Pl(s,n,l,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nm:o=10;break e;case lm:o=9;break e;case Wi:o=11;break e;case Ui:o=14;break e;case Dr:o=16,a=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return r=Yt(o,s,r,n),r.elementType=t,r.type=a,r.lanes=l,r}function ms(t,r,s,a){return t=Yt(7,t,a,r),t.lanes=s,t}function Pl(t,r,s,a){return t=Yt(22,t,a,r),t.elementType=om,t.lanes=s,t.stateNode={isHidden:!1},t}function bo(t,r,s){return t=Yt(6,t,null,r),t.lanes=s,t}function jo(t,r,s){return r=Yt(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function bg(t,r,s,a,n){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eo(0),this.expirationTimes=eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Nc(t,r,s,a,n,l,o,c,d){return t=new bg(t,r,s,c,d),r===1?(r=1,l===!0&&(r|=8)):r=0,l=Yt(3,null,null,r),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(l),t}function jg(t,r,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:a==null?null:""+a,children:t,containerInfo:r,implementation:s}}function X0(t){if(!t)return Xr;t=t._reactInternals;e:{if(js(t)!==t||t.tag!==1)throw Error(pe(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Rt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(pe(171))}if(t.tag===1){var s=t.type;if(Rt(s))return Xm(t,s,r)}return r}function Z0(t,r,s,a,n,l,o,c,d){return t=Nc(s,a,!0,t,n,l,o,c,d),t.context=X0(null),s=t.current,a=Tt(),n=Kr(s),l=Sr(a,n),l.callback=r??null,qr(s,l,n),t.current.lanes=n,Ga(t,n,a),It(t,a),t}function El(t,r,s,a){var n=r.current,l=Tt(),o=Kr(n);return s=X0(s),r.context===null?r.context=s:r.pendingContext=s,r=Sr(l,o),r.payload={element:t},a=a===void 0?null:a,a!==null&&(r.callback=a),t=qr(n,r,o),t!==null&&(or(t,n,o,l),Dn(t,n,o)),o}function hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function Cc(t,r){Qd(t,r),(t=t.alternate)&&Qd(t,r)}function kg(){return null}var ex=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sc(t){this._internalRoot=t}Fl.prototype.render=Sc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(pe(409));El(t,r,null,null)};Fl.prototype.unmount=Sc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ys(function(){El(null,t,null,null)}),r[Mr]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Pm();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Ir.length&&r!==0&&r<Ir[s].priority;s++);Ir.splice(s,0,t),s===0&&Fm(t)}};function _c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function wg(t,r,s,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var x=hl(o);l.call(x)}}var o=Z0(r,a,t,0,null,!1,!1,"",Kd);return t._reactRootContainer=o,t[Mr]=o.current,Ba(t.nodeType===8?t.parentNode:t),ys(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var c=a;a=function(){var x=hl(d);c.call(x)}}var d=Nc(t,0,!1,null,null,!1,!1,"",Kd);return t._reactRootContainer=d,t[Mr]=d.current,Ba(t.nodeType===8?t.parentNode:t),ys(function(){El(r,d,s,a)}),d}function Dl(t,r,s,a,n){var l=s._reactRootContainer;if(l){var o=l;if(typeof n=="function"){var c=n;n=function(){var d=hl(o);c.call(d)}}El(r,o,t,n)}else o=wg(s,r,t,n,a);return hl(o)}Lm=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=va(r.pendingLanes);s!==0&&(qi(r,s|1),It(r,lt()),!(Ve&6)&&(Ys=lt()+500,ts()))}break;case 13:ys(function(){var a=Lr(t,1);if(a!==null){var n=Tt();or(a,t,1,n)}}),Cc(t,1)}};Qi=function(t){if(t.tag===13){var r=Lr(t,134217728);if(r!==null){var s=Tt();or(r,t,134217728,s)}Cc(t,134217728)}};Tm=function(t){if(t.tag===13){var r=Kr(t),s=Lr(t,r);if(s!==null){var a=Tt();or(s,t,r,a)}Cc(t,r)}};Pm=function(){return qe};Em=function(t,r){var s=qe;try{return qe=t,r()}finally{qe=s}};Vo=function(t,r,s){switch(r){case"input":if(Io(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var a=s[r];if(a!==t&&a.form===t.form){var n=Cl(a);if(!n)throw Error(pe(90));cm(a),Io(a,n)}}}break;case"textarea":um(t,s);break;case"select":r=s.value,r!=null&&Is(t,!!s.multiple,r,!1)}};ym=bc;vm=ys;var Ng={usingClientEntryPoint:!1,Events:[Xa,Ts,Cl,gm,fm,bc]},xa={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cg={bundleType:xa.bundleType,version:xa.version,rendererPackageName:xa.rendererPackageName,rendererConfig:xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=km(t),t===null?null:t.stateNode},findFiberByHostInstance:xa.findFiberByHostInstance||kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wn.isDisabled&&wn.supportsFiber)try{jl=wn.inject(Cg),fr=wn}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ng;Vt.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(r))throw Error(pe(200));return jg(t,r,null,s)};Vt.createRoot=function(t,r){if(!_c(t))throw Error(pe(299));var s=!1,a="",n=ex;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(n=r.onRecoverableError)),r=Nc(t,1,!1,null,null,s,!1,a,n),t[Mr]=r.current,Ba(t.nodeType===8?t.parentNode:t),new Sc(r)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=km(r),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return ys(t)};Vt.hydrate=function(t,r,s){if(!Al(r))throw Error(pe(200));return Dl(null,t,r,!0,s)};Vt.hydrateRoot=function(t,r,s){if(!_c(t))throw Error(pe(405));var a=s!=null&&s.hydratedSources||null,n=!1,l="",o=ex;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),r=Z0(r,null,t,1,s??null,n,!1,l,o),t[Mr]=r.current,Ba(t),a)for(t=0;t<a.length;t++)s=a[t],n=s._getVersion,n=n(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,n]:r.mutableSourceEagerHydrationData.push(s,n);return new Fl(r)};Vt.render=function(t,r,s){if(!Al(r))throw Error(pe(200));return Dl(null,t,r,!1,s)};Vt.unmountComponentAtNode=function(t){if(!Al(t))throw Error(pe(40));return t._reactRootContainer?(ys(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};Vt.unstable_batchedUpdates=bc;Vt.unstable_renderSubtreeIntoContainer=function(t,r,s,a){if(!Al(s))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return Dl(t,r,s,!1,a)};Vt.version="18.3.1-next-f1338f8080-20240426";function tx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tx)}catch(t){console.error(t)}}tx(),tm.exports=Vt;var Sg=tm.exports,Yd=Sg;To.createRoot=Yd.createRoot,To.hydrateRoot=Yd.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Qa.apply(this,arguments)}var Or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Or||(Or={}));const Gd="popstate";function _g(t){t===void 0&&(t={});function r(a,n){let{pathname:l,search:o,hash:c}=a.location;return wi("",{pathname:l,search:o,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:gl(n)}return Lg(r,s,null,t)}function et(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Mc(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Mg(){return Math.random().toString(36).substr(2,8)}function Jd(t,r){return{usr:t.state,key:t.key,idx:r}}function wi(t,r,s,a){return s===void 0&&(s=null),Qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?ta(r):r,{state:s,key:r&&r.key||a||Mg()})}function gl(t){let{pathname:r="/",search:s="",hash:a=""}=t;return s&&s!=="?"&&(r+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function ta(t){let r={};if(t){let s=t.indexOf("#");s>=0&&(r.hash=t.substr(s),t=t.substr(0,s));let a=t.indexOf("?");a>=0&&(r.search=t.substr(a),t=t.substr(0,a)),t&&(r.pathname=t)}return r}function Lg(t,r,s,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,o=n.history,c=Or.Pop,d=null,x=m();x==null&&(x=0,o.replaceState(Qa({},o.state,{idx:x}),""));function m(){return(o.state||{idx:null}).idx}function u(){c=Or.Pop;let y=m(),v=y==null?null:y-x;x=y,d&&d({action:c,location:p.location,delta:v})}function f(y,v){c=Or.Push;let b=wi(p.location,y,v);x=m()+1;let g=Jd(b,x),k=p.createHref(b);try{o.pushState(g,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(k)}l&&d&&d({action:c,location:p.location,delta:1})}function j(y,v){c=Or.Replace;let b=wi(p.location,y,v);x=m();let g=Jd(b,x),k=p.createHref(b);o.replaceState(g,"",k),l&&d&&d({action:c,location:p.location,delta:0})}function h(y){let v=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof y=="string"?y:gl(y);return b=b.replace(/ $/,"%20"),et(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let p={get action(){return c},get location(){return t(n,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Gd,u),d=y,()=>{n.removeEventListener(Gd,u),d=null}},createHref(y){return r(n,y)},createURL:h,encodeLocation(y){let v=h(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:j,go(y){return o.go(y)}};return p}var Xd;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Xd||(Xd={}));function Tg(t,r,s){return s===void 0&&(s="/"),Pg(t,r,s)}function Pg(t,r,s,a){let n=typeof r=="string"?ta(r):r,l=Gs(n.pathname||"/",s);if(l==null)return null;let o=rx(t);Eg(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let x=Ug(l);c=Og(o[d],x)}return c}function rx(t,r,s,a){r===void 0&&(r=[]),s===void 0&&(s=[]),a===void 0&&(a="");let n=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(et(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let x=Gr([a,d.relativePath]),m=s.concat(d);l.children&&l.children.length>0&&(et(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),rx(l.children,r,m,x)),!(l.path==null&&!l.index)&&r.push({path:x,score:zg(x,l.index),routesMeta:m})};return t.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))n(l,o);else for(let d of sx(l.path))n(l,o,d)}),r}function sx(t){let r=t.split("/");if(r.length===0)return[];let[s,...a]=r,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let o=sx(a.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),n&&c.push(...o),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Eg(t){t.sort((r,s)=>r.score!==s.score?s.score-r.score:$g(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const Fg=/^:[\w-]+$/,Ag=3,Dg=2,Rg=1,Ig=10,Bg=-2,Zd=t=>t==="*";function zg(t,r){let s=t.split("/"),a=s.length;return s.some(Zd)&&(a+=Bg),r&&(a+=Dg),s.filter(n=>!Zd(n)).reduce((n,l)=>n+(Fg.test(l)?Ag:l===""?Rg:Ig),a)}function $g(t,r){return t.length===r.length&&t.slice(0,-1).every((a,n)=>a===r[n])?t[t.length-1]-r[r.length-1]:0}function Og(t,r,s){let{routesMeta:a}=t,n={},l="/",o=[];for(let c=0;c<a.length;++c){let d=a[c],x=c===a.length-1,m=l==="/"?r:r.slice(l.length)||"/",u=Ni({path:d.relativePath,caseSensitive:d.caseSensitive,end:x},m),f=d.route;if(!u)return null;Object.assign(n,u.params),o.push({params:n,pathname:Gr([l,u.pathname]),pathnameBase:Kg(Gr([l,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(l=Gr([l,u.pathnameBase]))}return o}function Ni(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,a]=Wg(t.path,t.caseSensitive,t.end),n=r.match(s);if(!n)return null;let l=n[0],o=l.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:a.reduce((x,m,u)=>{let{paramName:f,isOptional:j}=m;if(f==="*"){let p=c[u]||"";o=l.slice(0,l.length-p.length).replace(/(.)\/+$/,"$1")}const h=c[u];return j&&!h?x[f]=void 0:x[f]=(h||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:o,pattern:t}}function Wg(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!0),Mc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(a.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,r?void 0:"i"),a]}function Ug(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Mc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function Gs(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=t.charAt(s);return a&&a!=="/"?null:t.slice(s)||"/"}const Vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hg=t=>Vg.test(t);function qg(t,r){r===void 0&&(r="/");let{pathname:s,search:a="",hash:n=""}=typeof t=="string"?ta(t):t,l;if(s)if(Hg(s))l=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Mc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?l=eu(s.substring(1),"/"):l=eu(s,r)}else l=r;return{pathname:l,search:Yg(a),hash:Gg(n)}}function eu(t,r){let s=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function ko(t,r,s,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qg(t){return t.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function Lc(t,r){let s=Qg(t);return r?s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Tc(t,r,s,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=ta(t):(n=Qa({},t),et(!n.pathname||!n.pathname.includes("?"),ko("?","pathname","search",n)),et(!n.pathname||!n.pathname.includes("#"),ko("#","pathname","hash",n)),et(!n.search||!n.search.includes("#"),ko("#","search","hash",n)));let l=t===""||n.pathname==="",o=l?"/":n.pathname,c;if(o==null)c=s;else{let u=r.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;n.pathname=f.join("/")}c=u>=0?r[u]:"/"}let d=qg(n,c),x=o&&o!=="/"&&o.endsWith("/"),m=(l||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(x||m)&&(d.pathname+="/"),d}const Gr=t=>t.join("/").replace(/\/\/+/g,"/"),Kg=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yg=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gg=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Jg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ax=["post","put","patch","delete"];new Set(ax);const Xg=["get",...ax];new Set(Xg);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Ka.apply(this,arguments)}const Rl=i.createContext(null),nx=i.createContext(null),Er=i.createContext(null),Il=i.createContext(null),Fr=i.createContext({outlet:null,matches:[],isDataRoute:!1}),lx=i.createContext(null);function Zg(t,r){let{relative:s}=r===void 0?{}:r;ra()||et(!1);let{basename:a,navigator:n}=i.useContext(Er),{hash:l,pathname:o,search:c}=Bl(t,{relative:s}),d=o;return a!=="/"&&(d=o==="/"?a:Gr([a,o])),n.createHref({pathname:d,search:c,hash:l})}function ra(){return i.useContext(Il)!=null}function Zt(){return ra()||et(!1),i.useContext(Il).location}function ox(t){i.useContext(Er).static||i.useLayoutEffect(t)}function yt(){let{isDataRoute:t}=i.useContext(Fr);return t?xf():ef()}function ef(){ra()||et(!1);let t=i.useContext(Rl),{basename:r,future:s,navigator:a}=i.useContext(Er),{matches:n}=i.useContext(Fr),{pathname:l}=Zt(),o=JSON.stringify(Lc(n,s.v7_relativeSplatPath)),c=i.useRef(!1);return ox(()=>{c.current=!0}),i.useCallback(function(x,m){if(m===void 0&&(m={}),!c.current)return;if(typeof x=="number"){a.go(x);return}let u=Tc(x,JSON.parse(o),l,m.relative==="path");t==null&&r!=="/"&&(u.pathname=u.pathname==="/"?r:Gr([r,u.pathname])),(m.replace?a.replace:a.push)(u,m.state,m)},[r,a,o,l,t])}function Pc(){let{matches:t}=i.useContext(Fr),r=t[t.length-1];return r?r.params:{}}function Bl(t,r){let{relative:s}=r===void 0?{}:r,{future:a}=i.useContext(Er),{matches:n}=i.useContext(Fr),{pathname:l}=Zt(),o=JSON.stringify(Lc(n,a.v7_relativeSplatPath));return i.useMemo(()=>Tc(t,JSON.parse(o),l,s==="path"),[t,o,l,s])}function tf(t,r){return rf(t,r)}function rf(t,r,s,a){ra()||et(!1);let{navigator:n}=i.useContext(Er),{matches:l}=i.useContext(Fr),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let x=Zt(),m;if(r){var u;let y=typeof r=="string"?ta(r):r;d==="/"||(u=y.pathname)!=null&&u.startsWith(d)||et(!1),m=y}else m=x;let f=m.pathname||"/",j=f;if(d!=="/"){let y=d.replace(/^\//,"").split("/");j="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let h=Tg(t,{pathname:j}),p=of(h&&h.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Gr([d,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Gr([d,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),l,s,a);return r&&p?i.createElement(Il.Provider,{value:{location:Ka({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Or.Pop}},p):p}function sf(){let t=mf(),r=Jg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},r),s?i.createElement("pre",{style:n},s):null,null)}const af=i.createElement(sf,null);class nf extends i.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,s){return s.location!==r.location||s.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:s.error,location:s.location,revalidation:r.revalidation||s.revalidation}}componentDidCatch(r,s){console.error("React Router caught the following error during render",r,s)}render(){return this.state.error!==void 0?i.createElement(Fr.Provider,{value:this.props.routeContext},i.createElement(lx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lf(t){let{routeContext:r,match:s,children:a}=t,n=i.useContext(Rl);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),i.createElement(Fr.Provider,{value:r},a)}function of(t,r,s,a){var n;if(r===void 0&&(r=[]),s===void 0&&(s=null),a===void 0&&(a=null),t==null){var l;if(!s)return null;if(s.errors)t=s.matches;else if((l=a)!=null&&l.v7_partialHydration&&r.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,c=(n=s)==null?void 0:n.errors;if(c!=null){let m=o.findIndex(u=>u.route.id&&(c==null?void 0:c[u.route.id])!==void 0);m>=0||et(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,x=-1;if(s&&a&&a.v7_partialHydration)for(let m=0;m<o.length;m++){let u=o[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(x=m),u.route.id){let{loaderData:f,errors:j}=s,h=u.route.loader&&f[u.route.id]===void 0&&(!j||j[u.route.id]===void 0);if(u.route.lazy||h){d=!0,x>=0?o=o.slice(0,x+1):o=[o[0]];break}}}return o.reduceRight((m,u,f)=>{let j,h=!1,p=null,y=null;s&&(j=c&&u.route.id?c[u.route.id]:void 0,p=u.route.errorElement||af,d&&(x<0&&f===0?(pf("route-fallback"),h=!0,y=null):x===f&&(h=!0,y=u.route.hydrateFallbackElement||null)));let v=r.concat(o.slice(0,f+1)),b=()=>{let g;return j?g=p:h?g=y:u.route.Component?g=i.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=m,i.createElement(lf,{match:u,routeContext:{outlet:m,matches:v,isDataRoute:s!=null},children:g})};return s&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?i.createElement(nf,{location:s.location,revalidation:s.revalidation,component:p,error:j,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var ix=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ix||{}),cx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cx||{});function cf(t){let r=i.useContext(Rl);return r||et(!1),r}function df(t){let r=i.useContext(nx);return r||et(!1),r}function uf(t){let r=i.useContext(Fr);return r||et(!1),r}function dx(t){let r=uf(),s=r.matches[r.matches.length-1];return s.route.id||et(!1),s.route.id}function mf(){var t;let r=i.useContext(lx),s=df(),a=dx();return r!==void 0?r:(t=s.errors)==null?void 0:t[a]}function xf(){let{router:t}=cf(ix.UseNavigateStable),r=dx(cx.UseNavigateStable),s=i.useRef(!1);return ox(()=>{s.current=!0}),i.useCallback(function(n,l){l===void 0&&(l={}),s.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Ka({fromRouteId:r},l)))},[t,r])}const tu={};function pf(t,r,s){tu[t]||(tu[t]=!0)}function hf(t,r){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fl(t){let{to:r,replace:s,state:a,relative:n}=t;ra()||et(!1);let{future:l,static:o}=i.useContext(Er),{matches:c}=i.useContext(Fr),{pathname:d}=Zt(),x=yt(),m=Tc(r,Lc(c,l.v7_relativeSplatPath),d,n==="path"),u=JSON.stringify(m);return i.useEffect(()=>x(JSON.parse(u),{replace:s,state:a,relative:n}),[x,u,n,s,a]),null}function rt(t){et(!1)}function gf(t){let{basename:r="/",children:s=null,location:a,navigationType:n=Or.Pop,navigator:l,static:o=!1,future:c}=t;ra()&&et(!1);let d=r.replace(/^\/*/,"/"),x=i.useMemo(()=>({basename:d,navigator:l,static:o,future:Ka({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);typeof a=="string"&&(a=ta(a));let{pathname:m="/",search:u="",hash:f="",state:j=null,key:h="default"}=a,p=i.useMemo(()=>{let y=Gs(m,d);return y==null?null:{location:{pathname:y,search:u,hash:f,state:j,key:h},navigationType:n}},[d,m,u,f,j,h,n]);return p==null?null:i.createElement(Er.Provider,{value:x},i.createElement(Il.Provider,{children:s,value:p}))}function ff(t){let{children:r,location:s}=t;return tf(Ci(r),s)}new Promise(()=>{});function Ci(t,r){r===void 0&&(r=[]);let s=[];return i.Children.forEach(t,(a,n)=>{if(!i.isValidElement(a))return;let l=[...r,n];if(a.type===i.Fragment){s.push.apply(s,Ci(a.props.children,l));return}a.type!==rt&&et(!1),!a.props.index||!a.props.children||et(!1);let o={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Ci(a.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},yl.apply(this,arguments)}function ux(t,r){if(t==null)return{};var s={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(r.indexOf(n)>=0)&&(s[n]=t[n]);return s}function yf(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vf(t,r){return t.button===0&&(!r||r==="_self")&&!yf(t)}function Si(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,s)=>{let a=t[s];return r.concat(Array.isArray(a)?a.map(n=>[s,n]):[[s,a]])},[]))}function bf(t,r){let s=Si(t);return r&&r.forEach((a,n)=>{s.has(n)||r.getAll(n).forEach(l=>{s.append(n,l)})}),s}const jf=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kf=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wf="6";try{window.__reactRouterVersion=wf}catch{}const Nf=i.createContext({isTransitioning:!1}),Cf="startTransition",ru=hp[Cf];function Sf(t){let{basename:r,children:s,future:a,window:n}=t,l=i.useRef();l.current==null&&(l.current=_g({window:n,v5Compat:!0}));let o=l.current,[c,d]=i.useState({action:o.action,location:o.location}),{v7_startTransition:x}=a||{},m=i.useCallback(u=>{x&&ru?ru(()=>d(u)):d(u)},[d,x]);return i.useLayoutEffect(()=>o.listen(m),[o,m]),i.useEffect(()=>hf(a),[a]),i.createElement(gf,{basename:r,children:s,location:c.location,navigationType:c.action,navigator:o,future:a})}const _f=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lf=i.forwardRef(function(r,s){let{onClick:a,relative:n,reloadDocument:l,replace:o,state:c,target:d,to:x,preventScrollReset:m,viewTransition:u}=r,f=ux(r,jf),{basename:j}=i.useContext(Er),h,p=!1;if(typeof x=="string"&&Mf.test(x)&&(h=x,_f))try{let g=new URL(window.location.href),k=x.startsWith("//")?new URL(g.protocol+x):new URL(x),N=Gs(k.pathname,j);k.origin===g.origin&&N!=null?x=N+k.search+k.hash:p=!0}catch{}let y=Zg(x,{relative:n}),v=Pf(x,{replace:o,state:c,target:d,preventScrollReset:m,relative:n,viewTransition:u});function b(g){a&&a(g),g.defaultPrevented||v(g)}return i.createElement("a",yl({},f,{href:h||y,onClick:p||l?a:b,ref:s,target:d}))}),su=i.forwardRef(function(r,s){let{"aria-current":a="page",caseSensitive:n=!1,className:l="",end:o=!1,style:c,to:d,viewTransition:x,children:m}=r,u=ux(r,kf),f=Bl(d,{relative:u.relative}),j=Zt(),h=i.useContext(nx),{navigator:p,basename:y}=i.useContext(Er),v=h!=null&&Ef(f)&&x===!0,b=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,g=j.pathname,k=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(g=g.toLowerCase(),k=k?k.toLowerCase():null,b=b.toLowerCase()),k&&y&&(k=Gs(k,y)||k);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let E=g===b||!o&&g.startsWith(b)&&g.charAt(N)==="/",F=k!=null&&(k===b||!o&&k.startsWith(b)&&k.charAt(b.length)==="/"),_={isActive:E,isPending:F,isTransitioning:v},q=E?a:void 0,R;typeof l=="function"?R=l(_):R=[l,E?"active":null,F?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let se=typeof c=="function"?c(_):c;return i.createElement(Lf,yl({},u,{"aria-current":q,className:R,ref:s,style:se,to:d,viewTransition:x}),typeof m=="function"?m(_):m)});var _i;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_i||(_i={}));var au;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(au||(au={}));function Tf(t){let r=i.useContext(Rl);return r||et(!1),r}function Pf(t,r){let{target:s,replace:a,state:n,preventScrollReset:l,relative:o,viewTransition:c}=r===void 0?{}:r,d=yt(),x=Zt(),m=Bl(t,{relative:o});return i.useCallback(u=>{if(vf(u,s)){u.preventDefault();let f=a!==void 0?a:gl(x)===gl(m);d(t,{replace:f,state:n,preventScrollReset:l,relative:o,viewTransition:c})}},[x,d,m,a,n,s,t,l,o,c])}function zl(t){let r=i.useRef(Si(t)),s=i.useRef(!1),a=Zt(),n=i.useMemo(()=>bf(a.search,s.current?null:r.current),[a.search]),l=yt(),o=i.useCallback((c,d)=>{const x=Si(typeof c=="function"?c(n):c);s.current=!0,l("?"+x,d)},[l,n]);return[n,o]}function Ef(t,r){r===void 0&&(r={});let s=i.useContext(Nf);s==null&&et(!1);let{basename:a}=Tf(_i.useViewTransitionState),n=Bl(t,{relative:r.relative});if(!s.isTransitioning)return!1;let l=Gs(s.currentLocation.pathname,a)||s.currentLocation.pathname,o=Gs(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Ni(n.pathname,o)!=null||Ni(n.pathname,l)!=null}function mx(t,r){return function(){return t.apply(r,arguments)}}const{toString:Ff}=Object.prototype,{getPrototypeOf:Ec}=Object,{iterator:$l,toStringTag:xx}=Symbol,Ol=(t=>r=>{const s=Ff.call(r);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),dr=t=>(t=t.toLowerCase(),r=>Ol(r)===t),Wl=t=>r=>typeof r===t,{isArray:sa}=Array,Js=Wl("undefined");function en(t){return t!==null&&!Js(t)&&t.constructor!==null&&!Js(t.constructor)&&Bt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const px=dr("ArrayBuffer");function Af(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&px(t.buffer),r}const Df=Wl("string"),Bt=Wl("function"),hx=Wl("number"),tn=t=>t!==null&&typeof t=="object",Rf=t=>t===!0||t===!1,Wn=t=>{if(Ol(t)!=="object")return!1;const r=Ec(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(xx in t)&&!($l in t)},If=t=>{if(!tn(t)||en(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Bf=dr("Date"),zf=dr("File"),$f=dr("Blob"),Of=dr("FileList"),Wf=t=>tn(t)&&Bt(t.pipe),Uf=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||Bt(t.append)&&((r=Ol(t))==="formdata"||r==="object"&&Bt(t.toString)&&t.toString()==="[object FormData]"))},Vf=dr("URLSearchParams"),[Hf,qf,Qf,Kf]=["ReadableStream","Request","Response","Headers"].map(dr),Yf=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rn(t,r,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let a,n;if(typeof t!="object"&&(t=[t]),sa(t))for(a=0,n=t.length;a<n;a++)r.call(null,t[a],a,t);else{if(en(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),o=l.length;let c;for(a=0;a<o;a++)c=l[a],r.call(null,t[c],c,t)}}function gx(t,r){if(en(t))return null;r=r.toLowerCase();const s=Object.keys(t);let a=s.length,n;for(;a-- >0;)if(n=s[a],r===n.toLowerCase())return n;return null}const ds=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fx=t=>!Js(t)&&t!==ds;function Mi(){const{caseless:t,skipUndefined:r}=fx(this)&&this||{},s={},a=(n,l)=>{const o=t&&gx(s,l)||l;Wn(s[o])&&Wn(n)?s[o]=Mi(s[o],n):Wn(n)?s[o]=Mi({},n):sa(n)?s[o]=n.slice():(!r||!Js(n))&&(s[o]=n)};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&rn(arguments[n],a);return s}const Gf=(t,r,s,{allOwnKeys:a}={})=>(rn(r,(n,l)=>{s&&Bt(n)?t[l]=mx(n,s):t[l]=n},{allOwnKeys:a}),t),Jf=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Xf=(t,r,s,a)=>{t.prototype=Object.create(r.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),s&&Object.assign(t.prototype,s)},Zf=(t,r,s,a)=>{let n,l,o;const c={};if(r=r||{},t==null)return r;do{for(n=Object.getOwnPropertyNames(t),l=n.length;l-- >0;)o=n[l],(!a||a(o,t,r))&&!c[o]&&(r[o]=t[o],c[o]=!0);t=s!==!1&&Ec(t)}while(t&&(!s||s(t,r))&&t!==Object.prototype);return r},ey=(t,r,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=r.length;const a=t.indexOf(r,s);return a!==-1&&a===s},ty=t=>{if(!t)return null;if(sa(t))return t;let r=t.length;if(!hx(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=t[r];return s},ry=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&Ec(Uint8Array)),sy=(t,r)=>{const a=(t&&t[$l]).call(t);let n;for(;(n=a.next())&&!n.done;){const l=n.value;r.call(t,l[0],l[1])}},ay=(t,r)=>{let s;const a=[];for(;(s=t.exec(r))!==null;)a.push(s);return a},ny=dr("HTMLFormElement"),ly=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,n){return a.toUpperCase()+n}),nu=(({hasOwnProperty:t})=>(r,s)=>t.call(r,s))(Object.prototype),oy=dr("RegExp"),yx=(t,r)=>{const s=Object.getOwnPropertyDescriptors(t),a={};rn(s,(n,l)=>{let o;(o=r(n,l,t))!==!1&&(a[l]=o||n)}),Object.defineProperties(t,a)},iy=t=>{yx(t,(r,s)=>{if(Bt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=t[s];if(Bt(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},cy=(t,r)=>{const s={},a=n=>{n.forEach(l=>{s[l]=!0})};return sa(t)?a(t):a(String(t).split(r)),s},dy=()=>{},uy=(t,r)=>t!=null&&Number.isFinite(t=+t)?t:r;function my(t){return!!(t&&Bt(t.append)&&t[xx]==="FormData"&&t[$l])}const xy=t=>{const r=new Array(10),s=(a,n)=>{if(tn(a)){if(r.indexOf(a)>=0)return;if(en(a))return a;if(!("toJSON"in a)){r[n]=a;const l=sa(a)?[]:{};return rn(a,(o,c)=>{const d=s(o,n+1);!Js(d)&&(l[c]=d)}),r[n]=void 0,l}}return a};return s(t,0)},py=dr("AsyncFunction"),hy=t=>t&&(tn(t)||Bt(t))&&Bt(t.then)&&Bt(t.catch),vx=((t,r)=>t?setImmediate:r?((s,a)=>(ds.addEventListener("message",({source:n,data:l})=>{n===ds&&l===s&&a.length&&a.shift()()},!1),n=>{a.push(n),ds.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Bt(ds.postMessage)),gy=typeof queueMicrotask<"u"?queueMicrotask.bind(ds):typeof process<"u"&&process.nextTick||vx,fy=t=>t!=null&&Bt(t[$l]),ee={isArray:sa,isArrayBuffer:px,isBuffer:en,isFormData:Uf,isArrayBufferView:Af,isString:Df,isNumber:hx,isBoolean:Rf,isObject:tn,isPlainObject:Wn,isEmptyObject:If,isReadableStream:Hf,isRequest:qf,isResponse:Qf,isHeaders:Kf,isUndefined:Js,isDate:Bf,isFile:zf,isBlob:$f,isRegExp:oy,isFunction:Bt,isStream:Wf,isURLSearchParams:Vf,isTypedArray:ry,isFileList:Of,forEach:rn,merge:Mi,extend:Gf,trim:Yf,stripBOM:Jf,inherits:Xf,toFlatObject:Zf,kindOf:Ol,kindOfTest:dr,endsWith:ey,toArray:ty,forEachEntry:sy,matchAll:ay,isHTMLForm:ny,hasOwnProperty:nu,hasOwnProp:nu,reduceDescriptors:yx,freezeMethods:iy,toObjectSet:cy,toCamelCase:ly,noop:dy,toFiniteNumber:uy,findKey:gx,global:ds,isContextDefined:fx,isSpecCompliantForm:my,toJSONObject:xy,isAsyncFn:py,isThenable:hy,setImmediate:vx,asap:gy,isIterable:fy};function We(t,r,s,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}ee.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const bx=We.prototype,jx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{jx[t]={value:t}});Object.defineProperties(We,jx);Object.defineProperty(bx,"isAxiosError",{value:!0});We.from=(t,r,s,a,n,l)=>{const o=Object.create(bx);ee.toFlatObject(t,o,function(m){return m!==Error.prototype},x=>x!=="isAxiosError");const c=t&&t.message?t.message:"Error",d=r==null&&t?t.code:r;return We.call(o,c,d,s,a,n),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",l&&Object.assign(o,l),o};const yy=null;function Li(t){return ee.isPlainObject(t)||ee.isArray(t)}function kx(t){return ee.endsWith(t,"[]")?t.slice(0,-2):t}function lu(t,r,s){return t?t.concat(r).map(function(n,l){return n=kx(n),!s&&l?"["+n+"]":n}).join(s?".":""):r}function vy(t){return ee.isArray(t)&&!t.some(Li)}const by=ee.toFlatObject(ee,{},null,function(r){return/^is[A-Z]/.test(r)});function Ul(t,r,s){if(!ee.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,s=ee.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,y){return!ee.isUndefined(y[p])});const a=s.metaTokens,n=s.visitor||m,l=s.dots,o=s.indexes,d=(s.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(r);if(!ee.isFunction(n))throw new TypeError("visitor must be a function");function x(h){if(h===null)return"";if(ee.isDate(h))return h.toISOString();if(ee.isBoolean(h))return h.toString();if(!d&&ee.isBlob(h))throw new We("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(h)||ee.isTypedArray(h)?d&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function m(h,p,y){let v=h;if(h&&!y&&typeof h=="object"){if(ee.endsWith(p,"{}"))p=a?p:p.slice(0,-2),h=JSON.stringify(h);else if(ee.isArray(h)&&vy(h)||(ee.isFileList(h)||ee.endsWith(p,"[]"))&&(v=ee.toArray(h)))return p=kx(p),v.forEach(function(g,k){!(ee.isUndefined(g)||g===null)&&r.append(o===!0?lu([p],k,l):o===null?p:p+"[]",x(g))}),!1}return Li(h)?!0:(r.append(lu(y,p,l),x(h)),!1)}const u=[],f=Object.assign(by,{defaultVisitor:m,convertValue:x,isVisitable:Li});function j(h,p){if(!ee.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(h),ee.forEach(h,function(v,b){(!(ee.isUndefined(v)||v===null)&&n.call(r,v,ee.isString(b)?b.trim():b,p,f))===!0&&j(v,p?p.concat(b):[b])}),u.pop()}}if(!ee.isObject(t))throw new TypeError("data must be an object");return j(t),r}function ou(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function Fc(t,r){this._pairs=[],t&&Ul(t,this,r)}const wx=Fc.prototype;wx.append=function(r,s){this._pairs.push([r,s])};wx.toString=function(r){const s=r?function(a){return r.call(this,a,ou)}:ou;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function jy(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Nx(t,r,s){if(!r)return t;const a=s&&s.encode||jy;ee.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let l;if(n?l=n(r,s):l=ee.isURLSearchParams(r)?r.toString():new Fc(r,s).toString(a),l){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class iu{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){ee.forEach(this.handlers,function(a){a!==null&&r(a)})}}const Cx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ky=typeof URLSearchParams<"u"?URLSearchParams:Fc,wy=typeof FormData<"u"?FormData:null,Ny=typeof Blob<"u"?Blob:null,Cy={isBrowser:!0,classes:{URLSearchParams:ky,FormData:wy,Blob:Ny},protocols:["http","https","file","blob","url","data"]},Ac=typeof window<"u"&&typeof document<"u",Ti=typeof navigator=="object"&&navigator||void 0,Sy=Ac&&(!Ti||["ReactNative","NativeScript","NS"].indexOf(Ti.product)<0),_y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",My=Ac&&window.location.href||"http://localhost",Ly=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ac,hasStandardBrowserEnv:Sy,hasStandardBrowserWebWorkerEnv:_y,navigator:Ti,origin:My},Symbol.toStringTag,{value:"Module"})),_t={...Ly,...Cy};function Ty(t,r){return Ul(t,new _t.classes.URLSearchParams,{visitor:function(s,a,n,l){return _t.isNode&&ee.isBuffer(s)?(this.append(a,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...r})}function Py(t){return ee.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Ey(t){const r={},s=Object.keys(t);let a;const n=s.length;let l;for(a=0;a<n;a++)l=s[a],r[l]=t[l];return r}function Sx(t){function r(s,a,n,l){let o=s[l++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),d=l>=s.length;return o=!o&&ee.isArray(n)?n.length:o,d?(ee.hasOwnProp(n,o)?n[o]=[n[o],a]:n[o]=a,!c):((!n[o]||!ee.isObject(n[o]))&&(n[o]=[]),r(s,a,n[o],l)&&ee.isArray(n[o])&&(n[o]=Ey(n[o])),!c)}if(ee.isFormData(t)&&ee.isFunction(t.entries)){const s={};return ee.forEachEntry(t,(a,n)=>{r(Py(a),n,s,0)}),s}return null}function Fy(t,r,s){if(ee.isString(t))try{return(r||JSON.parse)(t),ee.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(t)}const sn={transitional:Cx,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",n=a.indexOf("application/json")>-1,l=ee.isObject(r);if(l&&ee.isHTMLForm(r)&&(r=new FormData(r)),ee.isFormData(r))return n?JSON.stringify(Sx(r)):r;if(ee.isArrayBuffer(r)||ee.isBuffer(r)||ee.isStream(r)||ee.isFile(r)||ee.isBlob(r)||ee.isReadableStream(r))return r;if(ee.isArrayBufferView(r))return r.buffer;if(ee.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let c;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ty(r,this.formSerializer).toString();if((c=ee.isFileList(r))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ul(c?{"files[]":r}:r,d&&new d,this.formSerializer)}}return l||n?(s.setContentType("application/json",!1),Fy(r)):r}],transformResponse:[function(r){const s=this.transitional||sn.transitional,a=s&&s.forcedJSONParsing,n=this.responseType==="json";if(ee.isResponse(r)||ee.isReadableStream(r))return r;if(r&&ee.isString(r)&&(a&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(r,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?We.from(c,We.ERR_BAD_RESPONSE,this,null,this.response):c}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_t.classes.FormData,Blob:_t.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],t=>{sn.headers[t]={}});const Ay=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Dy=t=>{const r={};let s,a,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),a=o.substring(n+1).trim(),!(!s||r[s]&&Ay[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},cu=Symbol("internals");function pa(t){return t&&String(t).trim().toLowerCase()}function Un(t){return t===!1||t==null?t:ee.isArray(t)?t.map(Un):String(t)}function Ry(t){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(t);)r[a[1]]=a[2];return r}const Iy=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wo(t,r,s,a,n){if(ee.isFunction(a))return a.call(this,r,s);if(n&&(r=s),!!ee.isString(r)){if(ee.isString(a))return r.indexOf(a)!==-1;if(ee.isRegExp(a))return a.test(r)}}function By(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function zy(t,r){const s=ee.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+s,{value:function(n,l,o){return this[a].call(this,r,n,l,o)},configurable:!0})})}let zt=class{constructor(r){r&&this.set(r)}set(r,s,a){const n=this;function l(c,d,x){const m=pa(d);if(!m)throw new Error("header name must be a non-empty string");const u=ee.findKey(n,m);(!u||n[u]===void 0||x===!0||x===void 0&&n[u]!==!1)&&(n[u||d]=Un(c))}const o=(c,d)=>ee.forEach(c,(x,m)=>l(x,m,d));if(ee.isPlainObject(r)||r instanceof this.constructor)o(r,s);else if(ee.isString(r)&&(r=r.trim())&&!Iy(r))o(Dy(r),s);else if(ee.isObject(r)&&ee.isIterable(r)){let c={},d,x;for(const m of r){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[x=m[0]]=(d=c[x])?ee.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}o(c,s)}else r!=null&&l(s,r,a);return this}get(r,s){if(r=pa(r),r){const a=ee.findKey(this,r);if(a){const n=this[a];if(!s)return n;if(s===!0)return Ry(n);if(ee.isFunction(s))return s.call(this,n,a);if(ee.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=pa(r),r){const a=ee.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||wo(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let n=!1;function l(o){if(o=pa(o),o){const c=ee.findKey(a,o);c&&(!s||wo(a,a[c],c,s))&&(delete a[c],n=!0)}}return ee.isArray(r)?r.forEach(l):l(r),n}clear(r){const s=Object.keys(this);let a=s.length,n=!1;for(;a--;){const l=s[a];(!r||wo(this,this[l],l,r,!0))&&(delete this[l],n=!0)}return n}normalize(r){const s=this,a={};return ee.forEach(this,(n,l)=>{const o=ee.findKey(a,l);if(o){s[o]=Un(n),delete s[l];return}const c=r?By(l):String(l).trim();c!==l&&delete s[l],s[c]=Un(n),a[c]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return ee.forEach(this,(a,n)=>{a!=null&&a!==!1&&(s[n]=r&&ee.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(n=>a.set(n)),a}static accessor(r){const a=(this[cu]=this[cu]={accessors:{}}).accessors,n=this.prototype;function l(o){const c=pa(o);a[c]||(zy(n,o),a[c]=!0)}return ee.isArray(r)?r.forEach(l):l(r),this}};zt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(zt.prototype,({value:t},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(a){this[s]=a}}});ee.freezeMethods(zt);function No(t,r){const s=this||sn,a=r||s,n=zt.from(a.headers);let l=a.data;return ee.forEach(t,function(c){l=c.call(s,l,n.normalize(),r?r.status:void 0)}),n.normalize(),l}function _x(t){return!!(t&&t.__CANCEL__)}function aa(t,r,s){We.call(this,t??"canceled",We.ERR_CANCELED,r,s),this.name="CanceledError"}ee.inherits(aa,We,{__CANCEL__:!0});function Mx(t,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?t(s):r(new We("Request failed with status code "+s.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function $y(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Oy(t,r){t=t||10;const s=new Array(t),a=new Array(t);let n=0,l=0,o;return r=r!==void 0?r:1e3,function(d){const x=Date.now(),m=a[l];o||(o=x),s[n]=d,a[n]=x;let u=l,f=0;for(;u!==n;)f+=s[u++],u=u%t;if(n=(n+1)%t,n===l&&(l=(l+1)%t),x-o<r)return;const j=m&&x-m;return j?Math.round(f*1e3/j):void 0}}function Wy(t,r){let s=0,a=1e3/r,n,l;const o=(x,m=Date.now())=>{s=m,n=null,l&&(clearTimeout(l),l=null),t(...x)};return[(...x)=>{const m=Date.now(),u=m-s;u>=a?o(x,m):(n=x,l||(l=setTimeout(()=>{l=null,o(n)},a-u)))},()=>n&&o(n)]}const vl=(t,r,s=3)=>{let a=0;const n=Oy(50,250);return Wy(l=>{const o=l.loaded,c=l.lengthComputable?l.total:void 0,d=o-a,x=n(d),m=o<=c;a=o;const u={loaded:o,total:c,progress:c?o/c:void 0,bytes:d,rate:x||void 0,estimated:x&&c&&m?(c-o)/x:void 0,event:l,lengthComputable:c!=null,[r?"download":"upload"]:!0};t(u)},s)},du=(t,r)=>{const s=t!=null;return[a=>r[0]({lengthComputable:s,total:t,loaded:a}),r[1]]},uu=t=>(...r)=>ee.asap(()=>t(...r)),Uy=_t.hasStandardBrowserEnv?((t,r)=>s=>(s=new URL(s,_t.origin),t.protocol===s.protocol&&t.host===s.host&&(r||t.port===s.port)))(new URL(_t.origin),_t.navigator&&/(msie|trident)/i.test(_t.navigator.userAgent)):()=>!0,Vy=_t.hasStandardBrowserEnv?{write(t,r,s,a,n,l,o){if(typeof document>"u")return;const c=[`${t}=${encodeURIComponent(r)}`];ee.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),ee.isString(a)&&c.push(`path=${a}`),ee.isString(n)&&c.push(`domain=${n}`),l===!0&&c.push("secure"),ee.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(t){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Hy(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qy(t,r){return r?t.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):t}function Lx(t,r,s){let a=!Hy(r);return t&&(a||s==!1)?qy(t,r):r}const mu=t=>t instanceof zt?{...t}:t;function vs(t,r){r=r||{};const s={};function a(x,m,u,f){return ee.isPlainObject(x)&&ee.isPlainObject(m)?ee.merge.call({caseless:f},x,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function n(x,m,u,f){if(ee.isUndefined(m)){if(!ee.isUndefined(x))return a(void 0,x,u,f)}else return a(x,m,u,f)}function l(x,m){if(!ee.isUndefined(m))return a(void 0,m)}function o(x,m){if(ee.isUndefined(m)){if(!ee.isUndefined(x))return a(void 0,x)}else return a(void 0,m)}function c(x,m,u){if(u in r)return a(x,m);if(u in t)return a(void 0,x)}const d={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(x,m,u)=>n(mu(x),mu(m),u,!0)};return ee.forEach(Object.keys({...t,...r}),function(m){const u=d[m]||n,f=u(t[m],r[m],m);ee.isUndefined(f)&&u!==c||(s[m]=f)}),s}const Tx=t=>{const r=vs({},t);let{data:s,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:l,headers:o,auth:c}=r;if(r.headers=o=zt.from(o),r.url=Nx(Lx(r.baseURL,r.url,r.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ee.isFormData(s)){if(_t.hasStandardBrowserEnv||_t.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(s.getHeaders)){const d=s.getHeaders(),x=["content-type","content-length"];Object.entries(d).forEach(([m,u])=>{x.includes(m.toLowerCase())&&o.set(m,u)})}}if(_t.hasStandardBrowserEnv&&(a&&ee.isFunction(a)&&(a=a(r)),a||a!==!1&&Uy(r.url))){const d=n&&l&&Vy.read(l);d&&o.set(n,d)}return r},Qy=typeof XMLHttpRequest<"u",Ky=Qy&&function(t){return new Promise(function(s,a){const n=Tx(t);let l=n.data;const o=zt.from(n.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:x}=n,m,u,f,j,h;function p(){j&&j(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function v(){if(!y)return;const g=zt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:g,config:t,request:y};Mx(function(F){s(F),p()},function(F){a(F),p()},N),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(a(new We("Request aborted",We.ECONNABORTED,t,y)),y=null)},y.onerror=function(k){const N=k&&k.message?k.message:"Network Error",E=new We(N,We.ERR_NETWORK,t,y);E.event=k||null,a(E),y=null},y.ontimeout=function(){let k=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||Cx;n.timeoutErrorMessage&&(k=n.timeoutErrorMessage),a(new We(k,N.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,t,y)),y=null},l===void 0&&o.setContentType(null),"setRequestHeader"in y&&ee.forEach(o.toJSON(),function(k,N){y.setRequestHeader(N,k)}),ee.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),c&&c!=="json"&&(y.responseType=n.responseType),x&&([f,h]=vl(x,!0),y.addEventListener("progress",f)),d&&y.upload&&([u,j]=vl(d),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",j)),(n.cancelToken||n.signal)&&(m=g=>{y&&(a(!g||g.type?new aa(null,t,y):g),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const b=$y(n.url);if(b&&_t.protocols.indexOf(b)===-1){a(new We("Unsupported protocol "+b+":",We.ERR_BAD_REQUEST,t));return}y.send(l||null)})},Yy=(t,r)=>{const{length:s}=t=t?t.filter(Boolean):[];if(r||s){let a=new AbortController,n;const l=function(x){if(!n){n=!0,c();const m=x instanceof Error?x:this.reason;a.abort(m instanceof We?m:new aa(m instanceof Error?m.message:m))}};let o=r&&setTimeout(()=>{o=null,l(new We(`timeout ${r} of ms exceeded`,We.ETIMEDOUT))},r);const c=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(x=>{x.unsubscribe?x.unsubscribe(l):x.removeEventListener("abort",l)}),t=null)};t.forEach(x=>x.addEventListener("abort",l));const{signal:d}=a;return d.unsubscribe=()=>ee.asap(c),d}},Gy=function*(t,r){let s=t.byteLength;if(s<r){yield t;return}let a=0,n;for(;a<s;)n=a+r,yield t.slice(a,n),a=n},Jy=async function*(t,r){for await(const s of Xy(t))yield*Gy(s,r)},Xy=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const r=t.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},xu=(t,r,s,a)=>{const n=Jy(t,r);let l=0,o,c=d=>{o||(o=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:x,value:m}=await n.next();if(x){c(),d.close();return}let u=m.byteLength;if(s){let f=l+=u;s(f)}d.enqueue(new Uint8Array(m))}catch(x){throw c(x),x}},cancel(d){return c(d),n.return()}},{highWaterMark:2})},pu=64*1024,{isFunction:Nn}=ee,Zy=(({Request:t,Response:r})=>({Request:t,Response:r}))(ee.global),{ReadableStream:hu,TextEncoder:gu}=ee.global,fu=(t,...r)=>{try{return!!t(...r)}catch{return!1}},ev=t=>{t=ee.merge.call({skipUndefined:!0},Zy,t);const{fetch:r,Request:s,Response:a}=t,n=r?Nn(r):typeof fetch=="function",l=Nn(s),o=Nn(a);if(!n)return!1;const c=n&&Nn(hu),d=n&&(typeof gu=="function"?(h=>p=>h.encode(p))(new gu):async h=>new Uint8Array(await new s(h).arrayBuffer())),x=l&&c&&fu(()=>{let h=!1;const p=new s(_t.origin,{body:new hu,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!p}),m=o&&c&&fu(()=>ee.isReadableStream(new a("").body)),u={stream:m&&(h=>h.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!u[h]&&(u[h]=(p,y)=>{let v=p&&p[h];if(v)return v.call(p);throw new We(`Response type '${h}' is not supported`,We.ERR_NOT_SUPPORT,y)})});const f=async h=>{if(h==null)return 0;if(ee.isBlob(h))return h.size;if(ee.isSpecCompliantForm(h))return(await new s(_t.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(h)||ee.isArrayBuffer(h))return h.byteLength;if(ee.isURLSearchParams(h)&&(h=h+""),ee.isString(h))return(await d(h)).byteLength},j=async(h,p)=>{const y=ee.toFiniteNumber(h.getContentLength());return y??f(p)};return async h=>{let{url:p,method:y,data:v,signal:b,cancelToken:g,timeout:k,onDownloadProgress:N,onUploadProgress:E,responseType:F,headers:_,withCredentials:q="same-origin",fetchOptions:R}=Tx(h),se=r||fetch;F=F?(F+"").toLowerCase():"text";let V=Yy([b,g&&g.toAbortSignal()],k),Q=null;const te=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let J;try{if(E&&x&&y!=="get"&&y!=="head"&&(J=await j(_,v))!==0){let z=new s(p,{method:"POST",body:v,duplex:"half"}),G;if(ee.isFormData(v)&&(G=z.headers.get("content-type"))&&_.setContentType(G),z.body){const[Z,de]=du(J,vl(uu(E)));v=xu(z.body,pu,Z,de)}}ee.isString(q)||(q=q?"include":"omit");const ce=l&&"credentials"in s.prototype,$={...R,signal:V,method:y.toUpperCase(),headers:_.normalize().toJSON(),body:v,duplex:"half",credentials:ce?q:void 0};Q=l&&new s(p,$);let U=await(l?se(Q,R):se(p,$));const X=m&&(F==="stream"||F==="response");if(m&&(N||X&&te)){const z={};["status","statusText","headers"].forEach(ye=>{z[ye]=U[ye]});const G=ee.toFiniteNumber(U.headers.get("content-length")),[Z,de]=N&&du(G,vl(uu(N),!0))||[];U=new a(xu(U.body,pu,Z,()=>{de&&de(),te&&te()}),z)}F=F||"text";let T=await u[ee.findKey(u,F)||"text"](U,h);return!X&&te&&te(),await new Promise((z,G)=>{Mx(z,G,{data:T,headers:zt.from(U.headers),status:U.status,statusText:U.statusText,config:h,request:Q})})}catch(ce){throw te&&te(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,h,Q),{cause:ce.cause||ce}):We.from(ce,ce&&ce.code,h,Q)}}},tv=new Map,Px=t=>{let r=t&&t.env||{};const{fetch:s,Request:a,Response:n}=r,l=[a,n,s];let o=l.length,c=o,d,x,m=tv;for(;c--;)d=l[c],x=m.get(d),x===void 0&&m.set(d,x=c?new Map:ev(r)),m=x;return x};Px();const Dc={http:yy,xhr:Ky,fetch:{get:Px}};ee.forEach(Dc,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const yu=t=>`- ${t}`,rv=t=>ee.isFunction(t)||t===null||t===!1;function sv(t,r){t=ee.isArray(t)?t:[t];const{length:s}=t;let a,n;const l={};for(let o=0;o<s;o++){a=t[o];let c;if(n=a,!rv(a)&&(n=Dc[(c=String(a)).toLowerCase()],n===void 0))throw new We(`Unknown adapter '${c}'`);if(n&&(ee.isFunction(n)||(n=n.get(r))))break;l[c||"#"+o]=n}if(!n){const o=Object.entries(l).map(([d,x])=>`adapter ${d} `+(x===!1?"is not supported by the environment":"is not available in the build"));let c=s?o.length>1?`since :
`+o.map(yu).join(`
`):" "+yu(o[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const Ex={getAdapter:sv,adapters:Dc};function Co(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new aa(null,t)}function vu(t){return Co(t),t.headers=zt.from(t.headers),t.data=No.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ex.getAdapter(t.adapter||sn.adapter,t)(t).then(function(a){return Co(t),a.data=No.call(t,t.transformResponse,a),a.headers=zt.from(a.headers),a},function(a){return _x(a)||(Co(t),a&&a.response&&(a.response.data=No.call(t,t.transformResponse,a.response),a.response.headers=zt.from(a.response.headers))),Promise.reject(a)})}const Fx="1.13.2",Vl={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{Vl[t]=function(a){return typeof a===t||"a"+(r<1?"n ":" ")+t}});const bu={};Vl.transitional=function(r,s,a){function n(l,o){return"[Axios v"+Fx+"] Transitional option '"+l+"'"+o+(a?". "+a:"")}return(l,o,c)=>{if(r===!1)throw new We(n(o," has been removed"+(s?" in "+s:"")),We.ERR_DEPRECATED);return s&&!bu[o]&&(bu[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(l,o,c):!0}};Vl.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function av(t,r,s){if(typeof t!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const l=a[n],o=r[l];if(o){const c=t[l],d=c===void 0||o(c,l,t);if(d!==!0)throw new We("option "+l+" must be "+d,We.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new We("Unknown option "+l,We.ERR_BAD_OPTION)}}const Vn={assertOptions:av,validators:Vl},pr=Vn.validators;let xs=class{constructor(r){this.defaults=r||{},this.interceptors={request:new iu,response:new iu}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const l=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?l&&!String(a.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+l):a.stack=l}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=vs(this.defaults,s);const{transitional:a,paramsSerializer:n,headers:l}=s;a!==void 0&&Vn.assertOptions(a,{silentJSONParsing:pr.transitional(pr.boolean),forcedJSONParsing:pr.transitional(pr.boolean),clarifyTimeoutError:pr.transitional(pr.boolean)},!1),n!=null&&(ee.isFunction(n)?s.paramsSerializer={serialize:n}:Vn.assertOptions(n,{encode:pr.function,serialize:pr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Vn.assertOptions(s,{baseUrl:pr.spelling("baseURL"),withXsrfToken:pr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=l&&ee.merge(l.common,l[s.method]);l&&ee.forEach(["delete","get","head","post","put","patch","common"],h=>{delete l[h]}),s.headers=zt.concat(o,l);const c=[];let d=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(s)===!1||(d=d&&p.synchronous,c.unshift(p.fulfilled,p.rejected))});const x=[];this.interceptors.response.forEach(function(p){x.push(p.fulfilled,p.rejected)});let m,u=0,f;if(!d){const h=[vu.bind(this),void 0];for(h.unshift(...c),h.push(...x),f=h.length,m=Promise.resolve(s);u<f;)m=m.then(h[u++],h[u++]);return m}f=c.length;let j=s;for(;u<f;){const h=c[u++],p=c[u++];try{j=h(j)}catch(y){p.call(this,y);break}}try{m=vu.call(this,j)}catch(h){return Promise.reject(h)}for(u=0,f=x.length;u<f;)m=m.then(x[u++],x[u++]);return m}getUri(r){r=vs(this.defaults,r);const s=Lx(r.baseURL,r.url,r.allowAbsoluteUrls);return Nx(s,r.params,r.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(r){xs.prototype[r]=function(s,a){return this.request(vs(a||{},{method:r,url:s,data:(a||{}).data}))}});ee.forEach(["post","put","patch"],function(r){function s(a){return function(l,o,c){return this.request(vs(c||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}xs.prototype[r]=s(),xs.prototype[r+"Form"]=s(!0)});let nv=class Ax{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const a=this;this.promise.then(n=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](n);a._listeners=null}),this.promise.then=n=>{let l;const o=new Promise(c=>{a.subscribe(c),l=c}).then(n);return o.cancel=function(){a.unsubscribe(l)},o},r(function(l,o,c){a.reason||(a.reason=new aa(l,o,c),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new Ax(function(n){r=n}),cancel:r}}};function lv(t){return function(s){return t.apply(null,s)}}function ov(t){return ee.isObject(t)&&t.isAxiosError===!0}const Pi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Pi).forEach(([t,r])=>{Pi[r]=t});function Dx(t){const r=new xs(t),s=mx(xs.prototype.request,r);return ee.extend(s,xs.prototype,r,{allOwnKeys:!0}),ee.extend(s,r,null,{allOwnKeys:!0}),s.create=function(n){return Dx(vs(t,n))},s}const ot=Dx(sn);ot.Axios=xs;ot.CanceledError=aa;ot.CancelToken=nv;ot.isCancel=_x;ot.VERSION=Fx;ot.toFormData=Ul;ot.AxiosError=We;ot.Cancel=ot.CanceledError;ot.all=function(r){return Promise.all(r)};ot.spread=lv;ot.isAxiosError=ov;ot.mergeConfig=vs;ot.AxiosHeaders=zt;ot.formToJSON=t=>Sx(ee.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=Ex.getAdapter;ot.HttpStatusCode=Pi;ot.default=ot;const{Axios:Ub,AxiosError:Vb,CanceledError:Hb,isCancel:qb,CancelToken:Qb,VERSION:Kb,all:Yb,Cancel:Gb,isAxiosError:Jb,spread:Xb,toFormData:Zb,AxiosHeaders:e1,HttpStatusCode:t1,formToJSON:r1,getAdapter:s1,mergeConfig:a1}=ot,iv=()=>{const t=new URLSearchParams(window.location.search),r=t.get("apiPort")||localStorage.getItem("apiPort")||"5055";return t.get("apiPort")&&localStorage.setItem("apiPort",r),`http://${window.location.hostname}:${r}/api`},Rc=iv();console.log("API URL:",Rc);class cv{constructor(){$c(this,"client");this.client=ot.create({baseURL:Rc,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(r=>{const s=localStorage.getItem("token");return s&&(r.headers.Authorization=`Bearer ${s}`),r}),this.client.interceptors.response.use(r=>r,r=>{var s;return((s=r.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(r)})}async login(r,s){return(await this.client.post("/auth/login",{username:r,password:s})).data}async register(r,s,a){return(await this.client.post("/auth/register",{username:r,email:s,password:a})).data}async getMe(){return(await this.client.get("/auth/me")).data}async generateApiKey(){return(await this.client.post("/auth/api-key")).data}async getHealth(){return(await this.client.get("/system/health")).data}async getStatus(){return(await this.client.get("/system/status")).data}async browseFolders(r="/"){return(await this.client.get("/system/browse",{params:{path:r}})).data}async searchAll(r,s=1){return(await this.client.get("/search/all",{params:{query:r,page:s}})).data}async searchMovies(r,s,a=1){const n={query:r,page:a};return s&&(n.year=s),(await this.client.get("/search/movies",{params:n})).data}async fixMovieMatch(r,s){return(await this.client.post(`/library/movies/${r}/fix-match`,{tmdb_id:s})).data}async searchTV(r,s=1){return(await this.client.get("/search/tv",{params:{query:r,page:s}})).data}async getTrending(r="all",s="week"){return(await this.client.get("/search/trending",{params:{type:r,timeWindow:s}})).data}async getPopular(r="all",s=1){return(await this.client.get("/search/popular",{params:{type:r,page:s}})).data}async getMovieDetails(r){return(await this.client.get(`/search/movie/${r}`)).data}async getTVDetails(r){return(await this.client.get(`/search/tv/${r}`)).data}async getSeasonDetails(r,s){return(await this.client.get(`/search/tv/${r}/season/${s}`)).data}async getMovieCredits(r){return(await this.client.get(`/search/movie/${r}/credits`)).data}async getTVCredits(r){return(await this.client.get(`/search/tv/${r}/credits`)).data}async getPersonDetails(r){return(await this.client.get(`/search/person/${r}`)).data}async getSimilarMovies(r){return(await this.client.get(`/search/movie/${r}/similar`)).data}async getSimilarTV(r){return(await this.client.get(`/search/tv/${r}/similar`)).data}async lookupByTVDBId(r){return(await this.client.get(`/search/tvdb/${r}`)).data}async discoverMoviesPopular(r=1){return(await this.client.get("/search/popular",{params:{type:"movie",page:r}})).data}async discoverMoviesTopRated(r=1){return(await this.client.get("/search/top-rated",{params:{type:"movie",page:r}})).data}async discoverMoviesUpcoming(r=1){return(await this.client.get("/search/upcoming",{params:{page:r,type:"movie"}})).data}async discoverTVUpcoming(r=1){return(await this.client.get("/search/upcoming",{params:{page:r,type:"tv"}})).data}async discoverTVPopular(r=1){return(await this.client.get("/search/popular",{params:{type:"tv",page:r}})).data}async discover(r,s=1,a="popularity.desc",n={}){var c,d,x,m,u,f;const l={type:r,page:s,sort_by:a};return(c=n.genres)!=null&&c.length&&(l.genres=n.genres.join(",")),n.releaseDateFrom&&(l.release_date_from=n.releaseDateFrom),n.releaseDateTo&&(l.release_date_to=n.releaseDateTo),n.language&&(l.language=n.language),n.runtimeMin!==void 0&&n.runtimeMin>0&&(l.runtime_min=n.runtimeMin),n.runtimeMax!==void 0&&n.runtimeMax<400&&(l.runtime_max=n.runtimeMax),n.voteAverageMin!==void 0&&n.voteAverageMin>1&&(l.vote_average_min=n.voteAverageMin),n.voteAverageMax!==void 0&&n.voteAverageMax<10&&(l.vote_average_max=n.voteAverageMax),n.voteCountMin!==void 0&&n.voteCountMin>0&&(l.vote_count_min=n.voteCountMin),n.voteCountMax!==void 0&&n.voteCountMax<1e3&&(l.vote_count_max=n.voteCountMax),(d=n.certifications)!=null&&d.length&&(l.certifications=n.certifications.join(",")),(x=n.keywords)!=null&&x.length&&(l.keywords=n.keywords.join(",")),(m=n.excludeKeywords)!=null&&m.length&&(l.exclude_keywords=n.excludeKeywords.join(",")),(u=n.companies)!=null&&u.length&&(l.companies=n.companies.join(",")),(f=n.networks)!=null&&f.length&&(l.networks=n.networks.join(",")),(await this.client.get("/search/discover",{params:l})).data}async getGenres(r="movie"){return(await this.client.get("/search/genres",{params:{type:r}})).data}async getLanguages(){return(await this.client.get("/search/languages")).data}async searchKeywords(r){return(await this.client.get("/search/keywords",{params:{query:r}})).data}async searchCompanies(r){return(await this.client.get("/search/companies",{params:{query:r}})).data}async createRequest(r){return(await this.client.post("/requests",r)).data}async getMyRequests(){return(await this.client.get("/requests/my")).data}async getAllRequests(r){return(await this.client.get("/requests",{params:{status:r}})).data}async updateRequestStatus(r,s,a){return(await this.client.patch(`/requests/${r}/status`,{status:s,note:a})).data}async deleteRequest(r){return(await this.client.delete(`/requests/${r}`)).data}async getSettings(){return(await this.client.get("/settings")).data}async updateSetting(r,s){return(await this.client.put("/settings",{key:r,value:s})).data}async updateSettings(r){for(const[s,a]of Object.entries(r))await this.client.put("/settings",{key:s,value:a});return{success:!0}}async getStats(){return(await this.client.get("/settings/stats")).data}async testTmdbKey(r){return(await this.client.post("/settings/test-tmdb",{apiKey:r})).data}async testTvdbKey(r){return(await this.client.post("/settings/test-tvdb",{apiKey:r})).data}async testOmdbKey(r){return(await this.client.post("/settings/test-omdb",{apiKey:r})).data}async getMovieFolderName(r,s,a){return(await this.client.post("/settings/naming/movie-folder",{title:r,year:s,tmdbId:a})).data.folderName}async getSeriesFolderName(r,s,a){return(await this.client.post("/settings/naming/series-folder",{title:r,year:s,tmdbId:a})).data.folderName}async getIndexers(){return(await this.client.get("/automation/indexers")).data}async addIndexer(r){return(await this.client.post("/automation/indexers",r)).data}async updateIndexer(r,s){return(await this.client.put(`/automation/indexers/${r}`,s)).data}async deleteIndexer(r){return(await this.client.delete(`/automation/indexers/${r}`)).data}async testIndexer(r){return(await this.client.post("/automation/indexers/test",r)).data}async previewIndexerRss(r){return(await this.client.get(`/automation/indexers/${r}/rss-preview`)).data}async getDownloadClients(){return(await this.client.get("/automation/download-clients")).data}async addDownloadClient(r){return(await this.client.post("/automation/download-clients",r)).data}async updateDownloadClient(r,s){return(await this.client.put(`/automation/download-clients/${r}`,s)).data}async deleteDownloadClient(r){return(await this.client.delete(`/automation/download-clients/${r}`)).data}async testDownloadClient(r){return(await this.client.post("/automation/download-clients/test",r)).data}async testQbittorrent(r,s,a){return(await this.client.post("/automation/download-client/test/qbittorrent",{url:r,username:s,password:a})).data}async testSabnzbd(r,s){return(await this.client.post("/automation/download-client/test/sabnzbd",{url:r,apiKey:s})).data}async getImportLists(){return(await this.client.get("/automation/import-lists")).data}async getImportListTypes(){return(await this.client.get("/automation/import-lists/types")).data}async getImportListById(r){return(await this.client.get(`/automation/import-lists/${r}`)).data}async addImportList(r){return(await this.client.post("/automation/import-lists",r)).data}async updateImportList(r,s){return(await this.client.put(`/automation/import-lists/${r}`,s)).data}async deleteImportList(r){return(await this.client.delete(`/automation/import-lists/${r}`)).data}async syncImportList(r){return(await this.client.post(`/automation/import-lists/${r}/sync`)).data}async previewImportList(r){return(await this.client.get(`/automation/import-lists/${r}/preview`)).data}async syncAllImportLists(){return(await this.client.post("/automation/import-lists/sync-all")).data}async searchReleases(r,s,a,n,l){return(await this.client.get("/automation/search",{params:{title:r,year:s,type:a,season:n,episode:l}})).data}async getDownloads(r){return(await this.client.get("/automation/downloads",{params:{status:r}})).data}async clearDownloads(r){return(await this.client.delete("/automation/downloads/clear",{params:{status:r}})).data}async getMovies(r,s){const a=await this.client.get("/library/movies",{params:{monitored:r,missing:s}});return Array.isArray(a.data)?{items:a.data,total:a.data.length}:{items:a.data.items||[],total:a.data.total||0}}async getRecentlyAdded(r=12){return(await this.client.get("/library/recently-added",{params:{limit:r}})).data}async getRecentActivity(r=10){return(await this.client.get("/library/activity",{params:{limit:r}})).data}async searchLibraryMovies(r){const{items:s}=await this.getMovies(),a=r.toLowerCase();return s.filter(n=>{var l,o;return((l=n.title)==null?void 0:l.toLowerCase().includes(a))||((o=n.original_title)==null?void 0:o.toLowerCase().includes(a))}).slice(0,10)}async searchLibrarySeries(r){const{items:s}=await this.getSeries(),a=r.toLowerCase();return s.filter(n=>{var l,o,c;return((l=n.name)==null?void 0:l.toLowerCase().includes(a))||((o=n.title)==null?void 0:o.toLowerCase().includes(a))||((c=n.original_name)==null?void 0:c.toLowerCase().includes(a))}).slice(0,10)}async getMovieById(r){return(await this.client.get(`/library/movies/${r}`)).data}async getMovieFiles(r){return(await this.client.get(`/library/movies/${r}/files`)).data}async getMovieActivity(r,s=50){return(await this.client.get(`/library/movies/${r}/activity`,{params:{limit:s}})).data}async getRelatedMovies(r,s=10){return(await this.client.get(`/library/movies/${r}/related`,{params:{limit:s}})).data}async refreshMovieMetadata(r){return(await this.client.post(`/library/movies/${r}/refresh-metadata`)).data}async addMovieFile(r,s){return(await this.client.post(`/library/movies/${r}/files`,s)).data}async deleteMovieFile(r,s){return(await this.client.delete(`/library/movies/${r}/files/${s}`)).data}async browseFiles(r="/data"){return(await this.client.get("/library/browse",{params:{path:r}})).data}async manualImportMovie(r,s,a=!1){return(await this.client.post(`/library/movies/${r}/manual-import`,{sourcePath:s,deleteSource:a})).data}async manualImportEpisode(r,s,a,n,l=!1){return(await this.client.post(`/library/series/${r}/manual-import`,{sourcePath:s,seasonNumber:a,episodeNumber:n,deleteSource:l})).data}async addMovie(r){return(await this.client.post("/library/movies",r)).data}async updateMovie(r,s){return(await this.client.put(`/library/movies/${r}`,s)).data}async deleteMovie(r,s=!1,a=!1){return(await this.client.delete(`/library/movies/${r}`,{params:{deleteFiles:s,addExclusion:a}})).data}async bulkUpdateMovies(r,s){return(await this.client.put("/library/movies/bulk/update",{ids:r,updates:s})).data}async bulkDeleteMovies(r,s=!1){return(await this.client.delete("/library/movies/bulk/delete",{data:{ids:r,deleteFiles:s}})).data}async searchMovie(r){return(await this.client.post(`/library/movies/${r}/search`)).data}async bulkSearchMovies(r){return(await this.client.post("/library/movies/bulk/search",{ids:r})).data}async previewMovieFolderRename(r){return(await this.client.get(`/library/movies/${r}/folder-rename`)).data}async executeMovieFolderRename(r){return(await this.client.post(`/library/movies/${r}/folder-rename`)).data}async previewAllMovieFolderRenames(){return(await this.client.get("/library/movies/folder-rename/preview")).data}async executeAllMovieFolderRenames(){return(await this.client.post("/library/movies/folder-rename/execute")).data}async previewMovieRename(r){return(await this.client.get(`/library/movies/${r}/rename`)).data}async executeMovieRename(r,s){return(await this.client.post(`/library/movies/${r}/rename`,{files:s})).data}async getSeries(r){const s=await this.client.get("/library/series",{params:{monitored:r}});return Array.isArray(s.data)?{items:s.data,total:s.data.length}:{items:s.data.items||[],total:s.data.total||0}}async getSeriesById(r){return(await this.client.get(`/library/series/${r}`)).data}async getSeriesActivity(r,s=50){return(await this.client.get(`/library/series/${r}/activity`,{params:{limit:s}})).data}async getRelatedSeries(r,s=10){return(await this.client.get(`/library/series/${r}/related`,{params:{limit:s}})).data}async refreshSeriesMetadata(r){return(await this.client.post(`/library/series/${r}/refresh-metadata`)).data}async addSeries(r){return(await this.client.post("/library/series",r)).data}async updateSeries(r,s){return(await this.client.put(`/library/series/${r}`,s)).data}async deleteSeries(r,s=!1,a=!1){return(await this.client.delete(`/library/series/${r}`,{params:{deleteFiles:s,addExclusion:a}})).data}async bulkUpdateSeries(r,s){return(await this.client.put("/library/series/bulk/update",{ids:r,updates:s})).data}async bulkDeleteSeries(r,s=!1){return(await this.client.delete("/library/series/bulk/delete",{data:{ids:r,deleteFiles:s}})).data}async searchSeries(r){return(await this.client.post(`/library/series/${r}/search`)).data}async bulkSearchSeries(r){return(await this.client.post("/library/series/bulk/search",{ids:r})).data}async previewSeriesRename(r){return(await this.client.get(`/library/series/${r}/rename`)).data}async executeSeriesRename(r,s){return(await this.client.post(`/library/series/${r}/rename`,{files:s})).data}async getSeasons(r){return(await this.client.get(`/library/series/${r}/seasons`)).data}async getEpisodes(r,s){return(await this.client.get(`/library/series/${r}/episodes`,{params:{season:s}})).data}async updateSeason(r,s,a){return(await this.client.put(`/library/series/${r}/seasons/${s}`,a)).data}async updateEpisode(r,s){return(await this.client.put(`/library/episodes/${r}`,s)).data}async deleteEpisodeFile(r){return(await this.client.delete(`/library/episodes/${r}/file`)).data}async deleteSeasonFiles(r,s){return(await this.client.delete(`/library/series/${r}/seasons/${s}/files`)).data}async getUpcomingEpisodes(r,s){return(await this.client.get("/calendar/upcoming",{params:{start:r,end:s}})).data}async getMissingEpisodes(){return(await this.client.get("/calendar/missing")).data}async getLibraryStats(){return(await this.client.get("/library/stats")).data}async scanLibrary(r,s){return(await this.client.post("/scanner/scan",{path:r,type:s})).data}async getLibraryPaths(r){return(await this.client.get("/scanner/library-paths",{params:{type:r}})).data}async getScannerSuggestions(r,s){return(await this.client.get("/scanner/suggestions",{params:{filename:r,type:s}})).data}async scanSeriesEpisodes(r){return(await this.client.post(`/scanner/series/${r}/episodes`)).data}async manualImportSeries(r){return(await this.client.post(`/scanner/series/${r}/manual-import`)).data}async searchMovieReleases(r,s){var n;console.log("[API] searchMovieReleases:",{title:r,year:s});const a=await this.client.get("/search/releases/movie",{params:{title:r,year:s}});return console.log("[API] searchMovieReleases response:",a.status,((n=a.data)==null?void 0:n.length)||0,"results"),a.data}async searchTVReleases(r,s,a){var l;console.log("[API] searchTVReleases:",{title:r,season:s,episode:a});const n=await this.client.get("/search/releases/tv",{params:{title:r,season:s,episode:a}});return console.log("[API] searchTVReleases response:",n.status,((l=n.data)==null?void 0:l.length)||0,"results"),n.data}async startDownload(r){return(await this.client.post("/automation/downloads",r)).data}async getEnabledDownloadClients(){return(await this.client.get("/automation/download-clients/enabled")).data}async syncDownloads(){return(await this.client.post("/automation/downloads/sync")).data}async cancelDownload(r,s=!1){return(await this.client.delete(`/automation/downloads/${r}`,{data:{deleteFiles:s}})).data}async getBlacklist(){return(await this.client.get("/automation/blacklist")).data}async removeFromBlacklist(r){return(await this.client.delete(`/automation/blacklist/${r}`)).data}async clearMovieBlacklist(r){return(await this.client.delete(`/automation/blacklist/movie/${r}`)).data}async clearSeriesBlacklist(r){return(await this.client.delete(`/automation/blacklist/series/${r}`)).data}async getIndexerStatus(){return(await this.client.get("/automation/indexers/status")).data}async getQualityDefinitions(){return(await this.client.get("/mediamanagement/quality/definitions")).data}async getQualityProfiles(){return(await this.client.get("/mediamanagement/quality/profiles")).data}async getQualityProfile(r){return(await this.client.get(`/mediamanagement/quality/profiles/${r}`)).data}async createQualityProfile(r){return(await this.client.post("/mediamanagement/quality/profiles",r)).data}async updateQualityProfile(r,s){return(await this.client.put(`/mediamanagement/quality/profiles/${r}`,s)).data}async deleteQualityProfile(r){return(await this.client.delete(`/mediamanagement/quality/profiles/${r}`)).data}async getNamingConfig(){return(await this.client.get("/mediamanagement/naming")).data}async updateNamingConfig(r){return(await this.client.put("/mediamanagement/naming",r)).data}async getNamingTokens(){return(await this.client.get("/mediamanagement/naming/tokens")).data}async previewNaming(r,s){return(await this.client.post("/mediamanagement/naming/preview",{type:r,format:s})).data}async getFileManagementSettings(){return(await this.client.get("/mediamanagement/file-management")).data}async updateFileManagementSettings(r){return(await this.client.put("/mediamanagement/file-management",r)).data}async scanMovie(r){return(await this.client.post(`/scanner/movies/${r}/scan`)).data}async scanSeries(r){return(await this.client.post(`/scanner/series/${r}/episodes`)).data}async getWorkers(){return(await this.client.get("/system/workers")).data}async getWorker(r){return(await this.client.get(`/system/workers/${r}`)).data}async startWorker(r){return(await this.client.post(`/system/workers/${r}/start`)).data}async stopWorker(r){return(await this.client.post(`/system/workers/${r}/stop`)).data}async restartWorker(r){return(await this.client.post(`/system/workers/${r}/restart`)).data}async updateWorkerInterval(r,s){return(await this.client.put(`/system/workers/${r}/interval`,{interval:s})).data}async runWorkerNow(r){return(await this.client.post(`/system/workers/${r}/run`)).data}async getBackupInfo(){return(await this.client.get("/system/backup/info")).data}async createBackup(){return(await this.client.get("/system/backup",{responseType:"blob"})).data}async previewBackup(r){return(await this.client.post("/system/backup/preview",r)).data}async restoreBackup(r,s){return(await this.client.post("/system/backup/restore",{backupData:r,selectedTables:s})).data}async getScheduledBackups(){return(await this.client.get("/system/backup/scheduled")).data}async deleteScheduledBackup(r){return(await this.client.delete(`/system/backup/scheduled/${encodeURIComponent(r)}`)).data}async downloadScheduledBackup(r){return(await this.client.get(`/system/backup/scheduled/${encodeURIComponent(r)}`,{responseType:"blob"})).data}async getExclusions(r){return(await this.client.get("/settings/exclusions",{params:{mediaType:r}})).data}async addExclusion(r){return(await this.client.post("/settings/exclusions",r)).data}async removeExclusion(r){return(await this.client.delete(`/settings/exclusions/${r}`)).data}async clearExclusions(r){return(await this.client.delete("/settings/exclusions",{params:{mediaType:r}})).data}async getCustomFormats(){return(await this.client.get("/customformats")).data}async getCustomFormat(r){return(await this.client.get(`/customformats/${r}`)).data}async createCustomFormat(r){return(await this.client.post("/customformats",r)).data}async updateCustomFormat(r,s){return(await this.client.put(`/customformats/${r}`,s)).data}async deleteCustomFormat(r){return(await this.client.delete(`/customformats/${r}`)).data}async importCustomFormat(r,s,a,n){return(await this.client.post("/customformats/import",{json:r,profileId:s,score:a,mediaType:n})).data}async bulkImportCustomFormats(r,s,a,n){return(await this.client.post("/customformats/import/bulk",{formats:r,profileId:s,useDefaultScores:a,mediaType:n})).data}async testReleaseAgainstFormats(r,s,a){return(await this.client.post("/customformats/test",{title:r,profileId:s,size:a})).data}async scoreReleases(r,s){return(await this.client.post("/customformats/score",{releases:r,profileId:s})).data}async getProfileCustomFormatScores(r){return(await this.client.get(`/customformats/profile/${r}/scores`)).data}async setProfileCustomFormatScores(r,s){return(await this.client.put(`/customformats/profile/${r}/scores`,{scores:s})).data}async setProfileCustomFormatScore(r,s,a){return(await this.client.put(`/customformats/profile/${r}/format/${s}/score`,{score:a})).data}async removeProfileCustomFormatScore(r,s){return(await this.client.delete(`/customformats/profile/${r}/format/${s}/score`)).data}async getUISettings(){return(await this.client.get("/settings/ui")).data}async updateUISettings(r){return(await this.client.put("/settings/ui",{value:r})).data}async getImageCacheStats(){return(await this.client.get("/images/cache/stats")).data}async clearImageCache(){return(await this.client.delete("/images/cache")).data}async testRadarr(r,s){return(await this.client.post("/arr/radarr/test",{url:r,apiKey:s})).data}async testSonarr(r,s){return(await this.client.post("/arr/sonarr/test",{url:r,apiKey:s})).data}async getRadarrMovies(r,s){return(await this.client.post("/arr/radarr/movies",{url:r,apiKey:s})).data}async getSonarrSeries(r,s){return(await this.client.post("/arr/sonarr/series",{url:r,apiKey:s})).data}async getRadarrProfiles(r,s){return(await this.client.post("/arr/radarr/profiles",{url:r,apiKey:s})).data}async getSonarrProfiles(r,s){return(await this.client.post("/arr/sonarr/profiles",{url:r,apiKey:s})).data}async getReportFilterOptions(){return(await this.client.get("/reports/filters")).data}async searchReportMovies(r){const s={};return r.quality&&(s.quality=r.quality),r.resolution&&(s.resolution=r.resolution),r.videoCodec&&(s.videoCodec=r.videoCodec),r.audioCodec&&(s.audioCodec=r.audioCodec),r.hdrType&&(s.hdrType=r.hdrType),r.audioChannels&&(s.audioChannels=r.audioChannels),r.releaseGroup&&(s.releaseGroup=r.releaseGroup),r.yearFrom&&(s.yearFrom=r.yearFrom),r.yearTo&&(s.yearTo=r.yearTo),r.ratingFrom&&(s.ratingFrom=r.ratingFrom),r.ratingTo&&(s.ratingTo=r.ratingTo),r.sizeFrom&&(s.sizeFrom=r.sizeFrom),r.sizeTo&&(s.sizeTo=r.sizeTo),r.hasFile!==void 0&&(s.hasFile=r.hasFile),r.monitored!==void 0&&(s.monitored=r.monitored),r.titleMismatch&&(s.titleMismatch=r.titleMismatch),r.multipleFiles&&(s.multipleFiles=r.multipleFiles),r.missingFile&&(s.missingFile=r.missingFile),r.noRating&&(s.noRating=r.noRating),r.sortBy&&(s.sortBy=r.sortBy),r.sortDir&&(s.sortDir=r.sortDir),r.limit&&(s.limit=r.limit),(await this.client.get("/reports/movies",{params:s})).data}async searchReportEpisodes(r){const s={};return r.quality&&(s.quality=r.quality),r.videoCodec&&(s.videoCodec=r.videoCodec),r.audioCodec&&(s.audioCodec=r.audioCodec),r.sizeFrom&&(s.sizeFrom=r.sizeFrom),r.sizeTo&&(s.sizeTo=r.sizeTo),r.hasFile!==void 0&&(s.hasFile=r.hasFile),r.monitored!==void 0&&(s.monitored=r.monitored),r.sortBy&&(s.sortBy=r.sortBy),r.sortDir&&(s.sortDir=r.sortDir),r.limit&&(s.limit=r.limit),(await this.client.get("/reports/episodes",{params:s})).data}async getReportStats(){return(await this.client.get("/reports/stats")).data}async getNotifications(){return(await this.client.get("/notifications")).data}async getNotificationById(r){return(await this.client.get(`/notifications/${r}`)).data}async createNotification(r){return(await this.client.post("/notifications",r)).data}async updateNotification(r,s){return(await this.client.put(`/notifications/${r}`,s)).data}async deleteNotification(r){return(await this.client.delete(`/notifications/${r}`)).data}async testNotification(r){return(await this.client.post("/notifications/test",r)).data}async getPushbulletDevices(r){return(await this.client.post("/notifications/pushbullet/devices",{accessToken:r})).data}}function Kt(t,r="w342"){return t?`${Rc}/images/cache/${r}${t}`:null}const C=new cv,Rx=i.createContext(void 0),ju={id:"1",username:"admin",email:"admin@localhost",role:"admin"};function dv({children:t}){const[r,s]=i.useState(()=>{const m=localStorage.getItem("user"),u=localStorage.getItem("auth_token");return u==="auth-disabled"&&m||u&&m&&u!=="auth-disabled"?JSON.parse(m):null}),[a,n]=i.useState(!0),[l,o]=i.useState(()=>localStorage.getItem("auth_token")==="auth-disabled");i.useEffect(()=>{let m=!1;return(async()=>{try{const p=await(await fetch("/api/auth/status")).json();if(m)return;if(p.authDisabled){o(!0),s(ju),localStorage.setItem("auth_token","auth-disabled"),localStorage.setItem("user",JSON.stringify(ju)),n(!1);return}localStorage.getItem("auth_token")==="auth-disabled"&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),s(null))}catch{console.log("Could not check auth status, assuming auth enabled")}if(m)return;const f=localStorage.getItem("token")||localStorage.getItem("auth_token"),j=localStorage.getItem("user");if(f&&j&&f!=="auth-disabled")try{const h=await C.getMe();m||(s(h),localStorage.setItem("user",JSON.stringify(h)))}catch{m||(localStorage.removeItem("token"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),s(null))}m||n(!1)})(),()=>{m=!0}},[]);const c=async(m,u)=>{const f=await C.login(m,u);localStorage.setItem("token",f.token),localStorage.setItem("auth_token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),s(f.user)},d=async(m,u,f)=>{const j=await C.register(m,u,f);localStorage.setItem("token",j.token),localStorage.setItem("auth_token",j.token),localStorage.setItem("user",JSON.stringify(j.user)),s(j.user)},x=()=>{l||(localStorage.removeItem("token"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),s(null))};return e.jsx(Rx.Provider,{value:{user:r,loading:a,login:c,register:d,logout:x,isAuthenticated:!!r,authDisabled:l},children:t})}function an(){const t=i.useContext(Rx);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function uv(){const[t,r]=i.useState("light");i.useEffect(()=>{const l=localStorage.getItem("theme");if(l)r(l),s(l);else{const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(c),s(c)}},[]);const s=l=>{l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return{theme:t,toggleTheme:()=>{const l=t==="light"?"dark":"light";r(l),localStorage.setItem("theme",l),s(l)},setThemeMode:l=>{r(l),localStorage.setItem("theme",l),s(l)}}}const Hn={successDuration:5e3,infoDuration:5e3,warningDuration:5e3,errorDuration:8e3},Ix=()=>{try{const t=localStorage.getItem("toast_settings");if(t){const r=JSON.parse(t);return r.defaultDuration!==void 0&&r.successDuration===void 0?{successDuration:r.defaultDuration,infoDuration:r.defaultDuration,warningDuration:r.defaultDuration,errorDuration:r.errorDuration||Hn.errorDuration}:{...Hn,...r}}}catch{}return Hn},mv=t=>{const s={...Ix(),...t};localStorage.setItem("toast_settings",JSON.stringify(s))},Bx=i.createContext(null);function xv({children:t}){const[r,s]=i.useState([]),[a,n]=i.useState(Hn);i.useEffect(()=>{n(Ix())},[]);const l=i.useCallback(m=>{n(u=>{const f={...u,...m};return mv(f),f})},[]),o=i.useCallback(m=>{const u=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f=()=>{switch(m.type){case"success":return a.successDuration;case"info":return a.infoDuration;case"warning":return a.warningDuration;case"error":return a.errorDuration;case"progress":return 0;default:return a.infoDuration}};let j=m.duration;if(j===void 0&&(j=f()),j===-1)return u;const h={id:u,dismissible:!0,...m,duration:j};return s(p=>[...p,h]),h.duration&&h.duration>0&&setTimeout(()=>{s(p=>p.filter(y=>y.id!==u))},h.duration),u},[a]),c=i.useCallback(m=>{s(u=>u.filter(f=>f.id!==m))},[]),d=i.useCallback((m,u)=>{s(f=>{if(!f.find(p=>p.id===m))return f;const h=f.map(p=>p.id===m?{...p,...u}:p);return u.duration&&u.duration>0&&setTimeout(()=>{s(p=>p.filter(y=>y.id!==m))},u.duration),h})},[]),x=i.useCallback(()=>{s([])},[]);return e.jsxs(Bx.Provider,{value:{toasts:r,addToast:o,removeToast:c,updateToast:d,clearAll:x,settings:a,updateSettings:l},children:[t,e.jsx(pv,{toasts:r,onDismiss:c})]})}function vr(){const t=i.useContext(Bx);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function pv({toasts:t,onDismiss:r}){return t.length===0?null:e.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(s=>e.jsx(hv,{toast:s,onDismiss:r},s.id))})}function hv({toast:t,onDismiss:r}){const s=()=>{switch(t.type){case"success":return{backgroundColor:"var(--toast-success-bg)",color:"var(--toast-text)",borderColor:"var(--toast-border)"};case"error":return{backgroundColor:"var(--toast-error-bg)",color:"var(--toast-text)",borderColor:"var(--toast-border)"};case"warning":return{backgroundColor:"var(--toast-warning-bg)",color:"var(--toast-text)",borderColor:"var(--toast-border)"};default:return{backgroundColor:"var(--toast-bg)",color:"var(--toast-text)",borderColor:"var(--toast-border)"}}},a=()=>"currentColor",n="bg-white/30",l="rgba(255,255,255,0.5)",o=()=>{const x=a();switch(t.type){case"success":return e.jsx("svg",{className:"w-5 h-5",fill:x,viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})});case"error":return e.jsx("svg",{className:"w-5 h-5",fill:x,viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})});case"warning":return e.jsx("svg",{className:"w-5 h-5",fill:x,viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})});case"info":return e.jsx("svg",{className:"w-5 h-5",fill:x,viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})});case"progress":return e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2",style:{borderColor:x}})}},c=t.type!=="progress"&&t.duration&&t.duration>0,d=t.type==="progress"&&t.progress&&t.progress.total>0&&t.progress.current>0;return e.jsxs("div",{className:"shadow-lg border min-w-[300px] animate-slide-in overflow-hidden",style:s(),children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(o,{}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",style:{color:"var(--navbar-text)"},children:t.message}),d&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full rounded-full h-1.5",style:{backgroundColor:"var(--navbar-hover)"},children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${n}`,style:{width:`${t.progress.current/t.progress.total*100}%`}})}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"var(--navbar-text)",opacity:.7},children:[t.progress.current," / ",t.progress.total]})]})]}),t.dismissible!==!1&&e.jsx("button",{onClick:()=>r(t.id),className:"p-1 -m-1 opacity-60 hover:opacity-100 transition-opacity",style:{color:"var(--navbar-text)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c&&e.jsx("div",{className:"h-1 w-full",style:{backgroundColor:"var(--navbar-hover)"},children:e.jsx("div",{className:"h-full",style:{backgroundColor:l,width:"100%",animation:`countdown ${t.duration}ms linear forwards`}})}),e.jsx("style",{children:`
    @keyframes countdown {
     from { width: 100%; }
     to { width: 0%; }
    }
   `})]})}const Ei=[{id:"coral",name:"Coral",color:"#FF595E"},{id:"orange",name:"Orange",color:"#FF924C"},{id:"yellow",name:"Yellow",color:"#FFCA3A"},{id:"lime",name:"Lime",color:"#C5CA30"},{id:"green",name:"Green",color:"#8AC926"},{id:"teal",name:"Teal",color:"#36949D"},{id:"blue",name:"Blue",color:"#1982C4"},{id:"indigo",name:"Indigo",color:"#4267AC"},{id:"purple",name:"Purple",color:"#565AA0"},{id:"violet",name:"Violet",color:"#6A4C93"},{id:"cyan",name:"Cyan",color:"#55DDE0"},{id:"emerald",name:"Emerald",color:"#06D6A0"},{id:"lavender",name:"Lavender",color:"#9067C6"}],ku=[{id:"dark",name:"Dark",isDark:!0,background:"oklch(0.21 0.01 285.89)",cardBg:"oklch(0.27 0.01 286.03)",navbarBg:"#565AA0",hoverBg:"oklch(0.37 0.01 285.81)",rowHoverBg:"oklch(0.37 0.03 259.73)"},{id:"light",name:"Light",isDark:!1,background:"oklch(0.97 0 0)",cardBg:"oklch(1 0 0)",navbarBg:"#565AA0",hoverBg:"oklch(0.92 0.02 250)",rowHoverBg:"oklch(0.95 0.01 250)"}],jr={theme:"dark",accentColor:"purple",posterSize:5,showRecentlyAdded:!0,showCast:!0,showSimilar:!0,viewMode:"poster",sidebarCollapsed:!1,episodeColumns:{filename:!1,format:!0,size:!0},movieFileColumns:{path:!0,videoInfo:!0,audioInfo:!0,audioLanguages:!0,size:!0,languages:!0,quality:!0},movieTableColumns:{year:!0,quality:!0,size:!0,monitored:!0,availability:!1,qualityProfile:!1,runtime:!1,rating:!1,added:!1},dashboardWidgets:{trending:!0,popularMovies:!0,movieGenres:!0,upcomingMovies:!0,popularSeries:!0,seriesGenres:!0,upcomingSeries:!0},dashboardLanguages:["en"]},zx=i.createContext(void 0);function gv(t,r){const s=document.documentElement,a=t.isDark,n=r,l=a?"oklch(0.35 0.02 260)":"oklch(0.92 0.02 260)",o=a?"oklch(0.32 0.04 260)":"oklch(0.96 0.02 260)",c=a?"oklch(0.95 0 0)":"oklch(0.15 0 0)",d=a?"oklch(0.7 0 0)":"oklch(0.4 0 0)",x=a?"oklch(0.55 0 0)":"oklch(0.5 0 0)",m="oklch(0.98 0 0)",u="oklch(0.98 0 0)",f="oklch(0.55 0.2 25)",j=a?"oklch(0.35 0.01 260)":"oklch(0.85 0.01 260)",h=a?"rgba(0,0,0,0.5)":"rgba(0,0,0,0.1)",p=t.background,y=a?"rgba(0,0,0,0.75)":"rgba(0,0,0,0.5)",v=a?"oklch(0.9 0 0)":"oklch(0.2 0 0)",b=a?"oklch(0.1 0 0)":"oklch(0.95 0 0)";s.style.setProperty("--page-bg",t.background),s.style.setProperty("--card-bg",t.cardBg),s.style.setProperty("--navbar-bg",n),s.style.setProperty("--hover-bg",l),s.style.setProperty("--row-hover-bg",o),s.style.setProperty("--navbar-text",m),s.style.setProperty("--navbar-hover",l),s.style.setProperty("--navbar-active",l),s.style.setProperty("--navbar-border",j),s.style.setProperty("--navbar-brand",m),s.style.setProperty("--btn-primary-bg",n),s.style.setProperty("--btn-primary-text",u),s.style.setProperty("--btn-primary-hover",l),s.style.setProperty("--btn-primary-border",n),s.style.setProperty("--btn-primary-focus",n),s.style.setProperty("--btn-secondary-bg",t.cardBg),s.style.setProperty("--btn-secondary-text",c),s.style.setProperty("--btn-secondary-hover",o),s.style.setProperty("--btn-secondary-border",j),s.style.setProperty("--btn-secondary-focus",j),s.style.setProperty("--btn-danger-bg",f),s.style.setProperty("--btn-danger-text","oklch(0.95 0 0)"),s.style.setProperty("--btn-danger-hover","oklch(0.45 0.2 25)"),s.style.setProperty("--btn-danger-border",f),s.style.setProperty("--btn-danger-focus",f),s.style.setProperty("--text-primary",c),s.style.setProperty("--text-secondary",d),s.style.setProperty("--text-muted",x),s.style.setProperty("--text-link",n),s.style.setProperty("--text-link-hover",l),s.style.setProperty("--heading-text",c),s.style.setProperty("--card-title",c),s.style.setProperty("--border-color",j),s.style.setProperty("--border-light",a?"oklch(0.35 0 0)":"oklch(0.85 0 0)"),s.style.setProperty("--border-focus",n),s.style.setProperty("--surface-bg",t.cardBg),s.style.setProperty("--surface-hover",o),s.style.setProperty("--surface-border",j),s.style.setProperty("--card-border",j),s.style.setProperty("--card-border-width","1px"),s.style.setProperty("--card-selected-border-width","2px"),s.style.setProperty("--card-selected-border",n),s.style.setProperty("--card-shadow",h),s.style.setProperty("--input-bg",p),s.style.setProperty("--input-text",c),s.style.setProperty("--input-placeholder",x),s.style.setProperty("--input-border",j),s.style.setProperty("--input-focus-border",n),s.style.setProperty("--input-focus-ring",n),s.style.setProperty("--table-bg",t.cardBg),s.style.setProperty("--table-header-bg",t.background),s.style.setProperty("--table-row-hover",o),s.style.setProperty("--table-border",j),s.style.setProperty("--table-text",c),s.style.setProperty("--modal-bg",t.cardBg),s.style.setProperty("--modal-overlay",y),s.style.setProperty("--modal-border",j),s.style.setProperty("--dropdown-bg",t.cardBg),s.style.setProperty("--dropdown-hover",o),s.style.setProperty("--dropdown-border",j),s.style.setProperty("--dropdown-text",c),s.style.setProperty("--selected-bg",n),s.style.setProperty("--selected-text",u),s.style.setProperty("--active-bg",l),s.style.setProperty("--focus-ring",n),s.style.setProperty("--scrollbar-track",t.background),s.style.setProperty("--scrollbar-thumb",l),s.style.setProperty("--scrollbar-thumb-hover",o),s.style.setProperty("--badge-bg",l),s.style.setProperty("--badge-text",m),s.style.setProperty("--tooltip-bg",v),s.style.setProperty("--tooltip-text",b);const g=n,k=l,N=m,E="oklch(0.45 0.15 145)",F="oklch(0.45 0.2 25)",_="oklch(0.55 0.18 85)";s.style.setProperty("--toast-bg",g),s.style.setProperty("--toast-border",k),s.style.setProperty("--toast-text",N),s.style.setProperty("--toast-success-bg",E),s.style.setProperty("--toast-error-bg",F),s.style.setProperty("--toast-warning-bg",_),s.style.setProperty("--spinner-color",n),s.style.setProperty("--skeleton-bg",l),s.style.setProperty("--progress-bg",l),s.style.setProperty("--progress-fill",n),s.style.setProperty("--tab-bg",t.cardBg),s.style.setProperty("--tab-active-bg",n),s.style.setProperty("--tab-active-text",u),s.style.setProperty("--tab-hover",o),s.style.setProperty("--tab-text",c),s.style.setProperty("--tab-border",j),s.style.setProperty("--toggle-bg",l),s.style.setProperty("--toggle-active-bg",n),s.style.setProperty("--toggle-thumb","oklch(0.95 0 0)"),s.style.setProperty("--primary-color",n),s.style.setProperty("--primary-color-alpha","rgba(100, 100, 200, 0.1)"),a?(s.classList.add("dark"),s.classList.remove("light")):(s.classList.add("light"),s.classList.remove("dark")),s.classList.add("theme-ready")}function fv({children:t}){const r=(p,y)=>{var v,b,g,k,N,E,F,_,q,R,se,V,Q,te,J,ce,$,U,X,T,z,G,Z,de,ye,je,Le,fe,Ne,ie,_e,K,Fe,Se,Re,Ie,Oe,De,I,Ce,Te,Pe,Ae,O,ve,W,he,me,D,ue,ge,H;return{...p,...y,episodeColumns:{filename:((v=y.episodeColumns)==null?void 0:v.filename)??((b=p.episodeColumns)==null?void 0:b.filename)??!1,format:((g=y.episodeColumns)==null?void 0:g.format)??((k=p.episodeColumns)==null?void 0:k.format)??!0,size:((N=y.episodeColumns)==null?void 0:N.size)??((E=p.episodeColumns)==null?void 0:E.size)??!0},movieFileColumns:{path:((F=y.movieFileColumns)==null?void 0:F.path)??((_=p.movieFileColumns)==null?void 0:_.path)??!0,videoInfo:((q=y.movieFileColumns)==null?void 0:q.videoInfo)??((R=p.movieFileColumns)==null?void 0:R.videoInfo)??!0,audioInfo:((se=y.movieFileColumns)==null?void 0:se.audioInfo)??((V=p.movieFileColumns)==null?void 0:V.audioInfo)??!0,audioLanguages:((Q=y.movieFileColumns)==null?void 0:Q.audioLanguages)??((te=p.movieFileColumns)==null?void 0:te.audioLanguages)??!0,size:((J=y.movieFileColumns)==null?void 0:J.size)??((ce=p.movieFileColumns)==null?void 0:ce.size)??!0,languages:(($=y.movieFileColumns)==null?void 0:$.languages)??((U=p.movieFileColumns)==null?void 0:U.languages)??!0,quality:((X=y.movieFileColumns)==null?void 0:X.quality)??((T=p.movieFileColumns)==null?void 0:T.quality)??!0},movieTableColumns:{year:((z=y.movieTableColumns)==null?void 0:z.year)??((G=p.movieTableColumns)==null?void 0:G.year)??!0,quality:((Z=y.movieTableColumns)==null?void 0:Z.quality)??((de=p.movieTableColumns)==null?void 0:de.quality)??!0,size:((ye=y.movieTableColumns)==null?void 0:ye.size)??((je=p.movieTableColumns)==null?void 0:je.size)??!0,monitored:((Le=y.movieTableColumns)==null?void 0:Le.monitored)??((fe=p.movieTableColumns)==null?void 0:fe.monitored)??!0,availability:((Ne=y.movieTableColumns)==null?void 0:Ne.availability)??((ie=p.movieTableColumns)==null?void 0:ie.availability)??!1,qualityProfile:((_e=y.movieTableColumns)==null?void 0:_e.qualityProfile)??((K=p.movieTableColumns)==null?void 0:K.qualityProfile)??!1,runtime:((Fe=y.movieTableColumns)==null?void 0:Fe.runtime)??((Se=p.movieTableColumns)==null?void 0:Se.runtime)??!1,rating:((Re=y.movieTableColumns)==null?void 0:Re.rating)??((Ie=p.movieTableColumns)==null?void 0:Ie.rating)??!1,added:((Oe=y.movieTableColumns)==null?void 0:Oe.added)??((De=p.movieTableColumns)==null?void 0:De.added)??!1},dashboardWidgets:{trending:((I=y.dashboardWidgets)==null?void 0:I.trending)??((Ce=p.dashboardWidgets)==null?void 0:Ce.trending)??!0,popularMovies:((Te=y.dashboardWidgets)==null?void 0:Te.popularMovies)??((Pe=p.dashboardWidgets)==null?void 0:Pe.popularMovies)??!0,movieGenres:((Ae=y.dashboardWidgets)==null?void 0:Ae.movieGenres)??((O=p.dashboardWidgets)==null?void 0:O.movieGenres)??!0,upcomingMovies:((ve=y.dashboardWidgets)==null?void 0:ve.upcomingMovies)??((W=p.dashboardWidgets)==null?void 0:W.upcomingMovies)??!0,popularSeries:((he=y.dashboardWidgets)==null?void 0:he.popularSeries)??((me=p.dashboardWidgets)==null?void 0:me.popularSeries)??!0,seriesGenres:((D=y.dashboardWidgets)==null?void 0:D.seriesGenres)??((ue=p.dashboardWidgets)==null?void 0:ue.seriesGenres)??!0,upcomingSeries:((ge=y.dashboardWidgets)==null?void 0:ge.upcomingSeries)??((H=p.dashboardWidgets)==null?void 0:H.upcomingSeries)??!0}}},[s,a]=i.useState(()=>{try{const p=localStorage.getItem("ui_settings");if(p)return r(jr,JSON.parse(p))}catch(p){console.error("Failed to parse stored settings:",p)}return jr}),[n,l]=i.useState(!1),[o,c]=i.useState(!1),[d,x]=i.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches);i.useEffect(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)"),y=v=>x(v.matches);return p.addEventListener("change",y),()=>p.removeEventListener("change",y)},[]);const m=()=>s.theme==="system"?d?"dark":"light":s.theme==="light"?"light":"dark",u=ku.find(p=>p.id===m())||ku[0],f=()=>{const p=Ei.find(y=>y.id===s.accentColor);return(p==null?void 0:p.color)||Ei[0].color};i.useEffect(()=>{gv(u,f())},[u,s.accentColor,d]),i.useEffect(()=>{let p=!1;return(async()=>{try{const v=localStorage.getItem("auth_token");if(!v){p||(a(jr),localStorage.setItem("ui_settings",JSON.stringify(jr)),l(!0),c(!0));return}const b=await fetch("/api/settings/ui",{headers:{Authorization:`Bearer ${v}`}});if(p)return;if(b.ok){const g=await b.json();if(g!=null&&g.ui_settings&&Object.keys(g.ui_settings).length>0){const k=r(jr,g.ui_settings);a(k),localStorage.setItem("ui_settings",JSON.stringify(k))}else a(jr),localStorage.setItem("ui_settings",JSON.stringify(jr))}else(b.status===401||b.status===403)&&(a(jr),localStorage.setItem("ui_settings",JSON.stringify(jr)));c(!0)}catch{console.log("Could not load settings from database, using local cache")}finally{p||l(!0)}})(),()=>{p=!0}},[]);const j=i.useRef("");i.useEffect(()=>{const p=JSON.stringify(s);if(localStorage.setItem("ui_settings",p),n&&o&&p!==j.current){j.current=p;const y=setTimeout(async()=>{try{const v=localStorage.getItem("auth_token");if(!v)return;await fetch("/api/settings/ui",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({value:s})})}catch{console.log("Could not save settings to database")}},500);return()=>clearTimeout(y)}},[s,n,o]);const h=p=>{a(y=>({...y,...p}))};return e.jsx(zx.Provider,{value:{settings:s,updateSettings:h,currentTheme:u,getAccentColor:f},children:t})}function br(){const t=i.useContext(zx);if(!t)throw new Error("useUISettings must be used within UISettingsProvider");return t}const $x=i.createContext(void 0);function ha(t){if(!t)return null;const r=t.includes("Z")||t.includes("+")||t.includes("T")?t:t.replace(" ","T")+"Z";return new Date(r)}function yv({children:t}){const[r,s]=i.useState(()=>localStorage.getItem("app_timezone")||Intl.DateTimeFormat().resolvedOptions().timeZone);i.useEffect(()=>{let d=!1;return(async()=>{var m;try{if(!localStorage.getItem("auth_token"))return;const f=await C.getSettings();!d&&f.timezone&&(s(f.timezone),localStorage.setItem("app_timezone",f.timezone))}catch(u){((m=u==null?void 0:u.response)==null?void 0:m.status)!==401&&console.error("Failed to load timezone setting:",u)}})(),()=>{d=!0}},[]);const a=d=>{s(d),localStorage.setItem("app_timezone",d)},n=d=>{const x=ha(d);if(!x)return"";const u=new Date().getTime()-x.getTime(),f=Math.floor(u/6e4),j=Math.floor(f/60),h=Math.floor(j/24);return f<1?"Just now":f<60?`${f}m ago`:j<24?`${j}h ago`:h<7?`${h}d ago`:l(d)},l=(d,x)=>{const m=ha(d);if(!m)return"";const u={month:"short",day:"numeric",year:"numeric",timeZone:r};return m.toLocaleDateString("en-US",{...u,...x})},o=(d,x)=>{const m=ha(d);if(!m)return"";const u={hour:"numeric",minute:"2-digit",timeZone:r};return m.toLocaleTimeString("en-US",{...u,...x})},c=(d,x)=>{const m=ha(d);if(!m)return"";const u={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",timeZone:r};return m.toLocaleString("en-US",{...u,...x})};return e.jsx($x.Provider,{value:{timezone:r,setTimezone:a,formatRelativeTime:n,formatDate:l,formatTime:o,formatDateTime:c,parseUTCDate:ha},children:t})}function rs(){const t=i.useContext($x);if(!t)throw new Error("useTimezone must be used within a TimezoneProvider");return t}const Ox=i.createContext(void 0),vv=new Set(["grabbed","downloaded","imported","unmonitored","scan_completed","failed","deleted"]),bv=t=>{switch(t){case"imported":case"downloaded":return"success";case"failed":case"deleted":return"error";case"unmonitored":return"warning";case"grabbed":case"scan_completed":return"info";default:return"info"}},jv=(t,r)=>{if(r)return r;switch(t){case"grabbed":return"Release Grabbed";case"downloaded":return"Download Complete";case"imported":return"Download Imported";case"scan_completed":return"Library Scan Complete";case"unmonitored":return"Auto-Unmonitored";case"failed":return"Download Failed";case"deleted":return"Deleted";default:return t.replace(/_/g," ")}};function kv({children:t}){const[r,s]=i.useState([]),a=i.useRef(new Set),n=i.useRef(0),l=i.useRef(!1);i.useEffect(()=>{try{const h=localStorage.getItem("mediastack_notifications");if(h){const p=JSON.parse(h);s(p),p.forEach(y=>a.current.add(y.id))}}catch(h){console.error("Failed to load notifications:",h)}l.current=!0},[]),i.useEffect(()=>{l.current&&localStorage.setItem("mediastack_notifications",JSON.stringify(r))},[r]);const o=i.useCallback(async()=>{var p;if(localStorage.getItem("auth_token"))try{const y=await C.getRecentActivity(30);if(!y||y.length===0)return;const v=Math.max(...y.map(g=>g.id));if(n.current===0){n.current=v;return}const b=y.filter(g=>{const k=vv.has(g.event_type),N=g.id>n.current,E=!a.current.has(g.id);return k&&N&&E});if(v>n.current&&(n.current=v),b.length>0){const g=b.map(k=>({id:k.id,type:bv(k.event_type),title:jv(k.event_type,k.event_label),message:k.message,timestamp:k.created_at,read:!1,entity_type:k.entity_type,entity_id:k.entity_id}));b.forEach(k=>a.current.add(k.id)),s(k=>[...g.reverse(),...k].slice(0,50))}}catch(y){((p=y==null?void 0:y.response)==null?void 0:p.status)!==401&&console.error("[Notifications] Poll error:",y)}},[]);i.useEffect(()=>{if(!localStorage.getItem("auth_token"))return;const p=setTimeout(()=>{o();const y=setInterval(o,5e3);return()=>clearInterval(y)},1e3);return()=>clearTimeout(p)},[o]);const c=i.useCallback(async()=>{await o()},[o]),d=i.useCallback(h=>{const p={...h,id:Date.now(),timestamp:new Date().toISOString(),read:!1};s(y=>[p,...y].slice(0,50))},[]),x=i.useCallback(h=>{s(p=>p.map(y=>y.id===h?{...y,read:!0}:y))},[]),m=i.useCallback(()=>{s(h=>h.map(p=>({...p,read:!0})))},[]),u=i.useCallback(h=>{s(p=>p.filter(y=>y.id!==h))},[]),f=i.useCallback(()=>{s([]),a.current.clear(),n.current=0,localStorage.removeItem("mediastack_notifications")},[]),j=r.filter(h=>!h.read).length;return e.jsx(Ox.Provider,{value:{notifications:r,unreadCount:j,addNotification:d,markAsRead:x,markAllAsRead:m,clearNotification:u,clearAll:f,refreshNotifications:c},children:t})}function wv(){const t=i.useContext(Ox);if(!t)throw new Error("useNotifications must be used within NotificationProvider");return t}function Ee({variant:t="primary",size:r="md",children:s,className:a="",style:n,...l}){const c=`font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[r]}`,d={primary:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--btn-primary-border)"},secondary:{backgroundColor:"var(--btn-secondary-bg)",color:"var(--btn-secondary-text)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--btn-secondary-border)"},danger:{backgroundColor:"var(--btn-danger-bg)",color:"var(--btn-danger-text)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--btn-danger-border)"}},[x,m]=Ii.useState(!1),u={primary:{backgroundColor:"var(--btn-primary-hover)"},secondary:{backgroundColor:"var(--btn-secondary-hover)"},danger:{backgroundColor:"var(--btn-danger-hover)"}},f={...d[t],...x&&!l.disabled?u[t]:{},...n};return e.jsx("button",{className:`${c} ${a}`,style:f,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),...l,children:s})}const Ic="1.0.0";function Nv(){const[t,r]=i.useState(""),[s,a]=i.useState(""),[n,l]=i.useState(""),[o,c]=i.useState(!1),{login:d}=an(),x=yt(),m=async u=>{var f,j;u.preventDefault(),l(""),c(!0);try{await d(t,s),x("/dashboard")}catch(h){l(((j=(f=h.response)==null?void 0:f.data)==null?void 0:j.error)||"Login failed")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mt-6 text-center text-4xl font-extrabold text-white flex items-center justify-center gap-3",children:["MediaStack",e.jsxs("span",{className:"text-sm font-medium px-2 py-1 bg-blue-600 text-white rounded-md",children:["v",Ic]})]}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Sign in to your account"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-gray-800 p-8 shadow-xl border border-gray-700",onSubmit:m,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:t,onChange:u=>r(u.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:s,onChange:u=>a(u.target.value),required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter password"})]})]}),n&&e.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded",children:n}),e.jsx(Ee,{type:"submit",className:"w-full",disabled:o,children:o?"Signing in...":"Sign in"}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/register",className:"text-sm text-primary-400 hover:text-primary-300",children:"Need an account? Register here"})})]})]})})}function Cv(){const[t,r]=i.useState(""),[s,a]=i.useState(""),[n,l]=i.useState(""),[o,c]=i.useState(""),[d,x]=i.useState(""),[m,u]=i.useState(!1),{register:f}=an(),j=yt(),h=async p=>{var y,v;if(p.preventDefault(),x(""),n!==o){x("Passwords do not match");return}if(n.length<8){x("Password must be at least 8 characters");return}u(!0);try{await f(t,s,n),j("/dashboard")}catch(b){x(((v=(y=b.response)==null?void 0:y.data)==null?void 0:v.error)||"Registration failed")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mt-6 text-center text-4xl font-extrabold text-white flex items-center justify-center gap-3",children:["MediaStack",e.jsxs("span",{className:"text-sm font-medium px-2 py-1 bg-blue-600 text-white rounded-md",children:["v",Ic]})]}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-400",children:"Create your account"})]}),e.jsxs("form",{className:"mt-8 space-y-6 bg-gray-800 p-8 shadow-xl border border-gray-700",onSubmit:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),e.jsx("input",{type:"text",value:t,onChange:p=>r(p.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Choose a username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:s,onChange:p=>a(p.target.value),required:!0,autoComplete:"email",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:n,onChange:p=>l(p.target.value),required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Min 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:"password",value:o,onChange:p=>c(p.target.value),required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Confirm password"})]})]}),d&&e.jsx("div",{className:"text-red-400 text-sm text-center bg-red-900/20 py-2 rounded",children:d}),e.jsx(Ee,{type:"submit",className:"w-full",disabled:m,children:m?"Creating account...":"Register"}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/login",className:"text-sm text-primary-400 hover:text-primary-300",children:"Already have an account? Sign in"})})]})]})})}const Sv=[{id:"home",label:"Home",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),children:[{id:"dashboard",label:"Dashboard",path:"/"},{id:"recent-activity",label:"Recent Activity",path:"/recent-activity"}]},{id:"library",label:"Library",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),children:[{id:"movies",label:"Movies",path:"/movies"},{id:"series",label:"TV Series",path:"/series"}]},{id:"calendar",label:"Calendar",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),path:"/calendar"},{id:"discover",label:"Discover",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),path:"/discover"},{id:"downloads",label:"Downloads",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),path:"/downloads"}],_v=[{id:"reports",label:"Reports",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),path:"/reports"},{id:"settings",label:"Settings",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),path:"/settings"}];function Mv({onClose:t}){var j;const r=Zt(),{user:s,authDisabled:a}=an(),{settings:n,updateSettings:l}=br(),[o,c]=i.useState(new Set(["home","library"])),d=n.sidebarCollapsed??!1,x=h=>l({sidebarCollapsed:h}),m=h=>{c(p=>{const y=new Set(p);return y.has(h)?y.delete(h):y.add(h),y})},u=h=>h==="/"?r.pathname==="/":r.pathname.startsWith(h),f=h=>{var b,g;const p=h.children&&h.children.length>0,y=o.has(h.id),v=h.path?u(h.path):(b=h.children)==null?void 0:b.some(k=>u(k.path));return p?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>m(h.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group ${v?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("span",{className:v?"text-gray-900":"text-gray-500 group-hover:text-gray-700",children:h.icon}),!d&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-left text-sm font-medium",children:h.label}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${y?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),!d&&y&&e.jsx("div",{className:"mt-1 ml-4 pl-4 border-l border-gray-200 space-y-1",children:(g=h.children)==null?void 0:g.map(k=>e.jsx(su,{to:k.path,onClick:t,className:({isActive:N})=>`
          block px-3 py-2 rounded-lg text-sm transition-all duration-200
          ${N?"text-emerald-600 font-medium bg-emerald-50":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}
         `,children:k.label},k.id))})]},h.id):e.jsx(su,{to:h.path||"/",onClick:t,className:({isActive:k})=>`
     flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group
     ${k?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}
    `,children:({isActive:k})=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:k?"text-gray-900":"text-gray-500 group-hover:text-gray-700",children:h.icon}),!d&&e.jsx("span",{className:"text-sm font-medium",children:h.label})]})},h.id)};return e.jsxs("aside",{className:`h-screen bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ${d?"w-16":"w-60"}`,style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),!d&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-gray-900",children:"MediaStack"}),e.jsxs("p",{className:"text-[10px] text-gray-400",children:["v",Ic]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t&&e.jsx("button",{onClick:t,className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors lg:hidden",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:()=>x(!d),className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-colors hidden lg:block",children:e.jsx("svg",{className:`w-4 h-4 transition-transform ${d?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:[e.jsx("div",{className:"space-y-1",children:Sv.map(f)}),!d&&e.jsx("p",{className:"px-3 mt-6 mb-2 text-[10px] font-semibold uppercase tracking-wider text-gray-400",children:"Management"}),e.jsx("div",{className:"space-y-1 mt-2",children:_v.map(f)})]}),!a&&s&&e.jsx("div",{className:"p-3 border-t border-gray-100",children:e.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors ${d?"justify-center":""}`,children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center text-white text-sm font-semibold",children:((j=s.username)==null?void 0:j.charAt(0).toUpperCase())||"U"}),!d&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.username}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email||"Administrator"})]}),!d&&e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})}const Lv={"/":"Home","/movies":"Movies","/series":"TV Series","/discover":"Discover","/discover/movie":"Movie","/discover/tv":"TV","/calendar":"Calendar","/downloads":"Downloads","/recent-activity":"Recent Activity","/recently-added":"Recently Added","/settings":"Settings"};function Tv(){const t=Zt(),r=yt(),{updateSettings:s,currentTheme:a}=br(),{notifications:n,unreadCount:l,markAllAsRead:o,clearAll:c,clearNotification:d}=wv(),{formatRelativeTime:x}=rs(),[m,u]=i.useState(!1),[f,j]=i.useState(!1),[h,p]=i.useState(""),[y,v]=i.useState({library:{movies:[],series:[],episodes:[]},tmdb:[]}),[b,g]=i.useState(!1),k=i.useRef(null),N=i.useRef(null),E=i.useRef(null);i.useEffect(()=>{const $=U=>{N.current&&!N.current.contains(U.target)&&j(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const[F,_]=i.useState(null),[q,R]=i.useState(!1);i.useEffect(()=>{(async()=>{const U=t.pathname.match(/^\/movies\/([^/]+)$/),X=t.pathname.match(/^\/series\/([^/]+)$/),T=t.pathname.match(/^\/discover\/movie\/(\d+)$/),z=t.pathname.match(/^\/discover\/tv\/(\d+)$/),G=t.pathname.match(/^\/(movie|tv)\/(\d+)\/cast-crew$/);if(U){R(!0);try{const Z=await C.getMovieById(U[1]);Z!=null&&Z.title?_(Z.title):_(null)}catch(Z){console.error("Failed to fetch movie title:",Z),_(null)}finally{R(!1)}}else if(X){R(!0);try{const Z=await C.getSeriesById(X[1]);Z!=null&&Z.name||Z!=null&&Z.title?_(Z.name||Z.title):_(null)}catch(Z){console.error("Failed to fetch series title:",Z),_(null)}finally{R(!1)}}else if(T){R(!0);try{const Z=await C.getMovieDetails(parseInt(T[1]));Z!=null&&Z.title?_(Z.title):_(null)}catch(Z){console.error("Failed to fetch movie title:",Z),_(null)}finally{R(!1)}}else if(z){R(!0);try{const Z=await C.getTVDetails(parseInt(z[1]));Z!=null&&Z.name||Z!=null&&Z.title?_(Z.name||Z.title):_(null)}catch(Z){console.error("Failed to fetch series title:",Z),_(null)}finally{R(!1)}}else if(G){R(!0);try{const Z=G[1],de=parseInt(G[2]);if(Z==="movie"){const ye=await C.getMovieDetails(de);_((ye==null?void 0:ye.title)||null)}else{const ye=await C.getTVDetails(de);_((ye==null?void 0:ye.name)||(ye==null?void 0:ye.title)||null)}}catch(Z){console.error("Failed to fetch title for cast/crew page:",Z),_(null)}finally{R(!1)}}else{const Z=t.pathname.match(/^\/person\/(\d+)$/);if(Z){R(!0);try{const de=await C.getPersonDetails(parseInt(Z[1]));_((de==null?void 0:de.name)||null)}catch(de){console.error("Failed to fetch person name:",de),_(null)}finally{R(!1)}}else _(null),R(!1)}})()},[t.pathname]);const V=(()=>{if(t.pathname==="/")return[{label:"Home"}];const $=[{label:"Home",path:"/"}],U=t.pathname.split("/").filter(Boolean),X=t.pathname.match(/^\/(movie|tv)\/(\d+)\/cast-crew$/);if(X){const G=X[1],Z=X[2];return $.push({label:G==="movie"?"Movies":"TV Series",path:G==="movie"?"/movies":"/series"}),$.push({label:q?"...":F||"...",path:`/discover/${G}/${Z}`}),$.push({label:"Cast & Crew"}),$}if(t.pathname.match(/^\/person\/(\d+)$/))return $.push({label:q?"...":F||"..."}),$;let z="";return U.forEach((G,Z)=>{z+=`/${G}`;const de=Z===U.length-1,ye=z.match(/^\/movies\/[^/]+$/)&&de,je=z.match(/^\/series\/[^/]+$/)&&de,Le=z.match(/^\/discover\/movie\/\d+$/)&&de,fe=z.match(/^\/discover\/tv\/\d+$/)&&de,Ne=z.match(/^\/person\/\d+$/)&&de;let ie,_e;ye||je||Le||fe||Ne?(q?ie="...":F?ie=F:ie="...",_e=void 0):z==="/discover/movie"?(ie="Movie",_e="/discover?type=movie"):z==="/discover/tv"?(ie="TV",_e="/discover?type=tv"):(ie=Lv[z]||G.charAt(0).toUpperCase()+G.slice(1),_e=Z<U.length-1?z:void 0),$.push({label:ie,path:_e})}),$})();i.useEffect(()=>{const $=U=>{(U.metaKey||U.ctrlKey)&&U.key==="k"&&(U.preventDefault(),u(!0),setTimeout(()=>{var X;return(X=k.current)==null?void 0:X.focus()},100)),U.key==="Escape"&&(u(!1),p(""))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[]);const Q=$=>{$.preventDefault(),h.trim()&&(r(`/discover?search=${encodeURIComponent(h.trim())}`),u(!1),p(""),v({library:{movies:[],series:[],episodes:[]},tmdb:[]}))},te=async $=>{var U,X;if($.length<2){v({library:{movies:[],series:[],episodes:[]},tmdb:[]});return}g(!0);try{const[T,z,G]=await Promise.all([C.searchLibraryMovies($).catch(()=>[]),C.searchLibrarySeries($).catch(()=>[]),C.searchAll($).catch(()=>({results:[]}))]);v({library:{movies:(T==null?void 0:T.slice(0,5))||[],series:(z==null?void 0:z.slice(0,5))||[],episodes:[]},tmdb:((X=(U=G==null?void 0:G.results)==null?void 0:U.filter(Z=>Z.media_type==="movie"||Z.media_type==="tv"))==null?void 0:X.slice(0,5))||[]})}catch(T){console.error("Search failed:",T)}finally{g(!1)}};i.useEffect(()=>(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{h.trim()?te(h.trim()):v({library:{movies:[],series:[],episodes:[]},tmdb:[]})},300),()=>{E.current&&clearTimeout(E.current)}),[h]);const J=y.library.movies.length>0||y.library.series.length>0||y.tmdb.length>0,ce=()=>{const $=a.isDark?"light":"dark";s({theme:$})};return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 pl-16 lg:pl-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400 hidden lg:block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),e.jsx("nav",{className:"flex items-center gap-1 text-sm",children:V.map(($,U)=>e.jsxs("div",{className:"flex items-center gap-1",children:[U>0&&e.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),$.path?e.jsx("button",{onClick:()=>r($.path),className:"text-gray-500 hover:text-gray-900 transition-colors",children:$.label}):e.jsx("span",{className:"text-gray-900 font-medium",children:$.label})]},U))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{u(!0),setTimeout(()=>{var $;return($=k.current)==null?void 0:$.focus()},100)},className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-lg text-sm text-gray-500 hover:bg-gray-200 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:"Search"}),e.jsx("kbd",{className:"hidden sm:inline-block px-1.5 py-0.5 text-[10px] bg-white rounded border border-gray-200 text-gray-400",children:"K"})]}),e.jsxs("button",{onClick:()=>r("/discover"),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Media"})]}),e.jsx("div",{className:"w-px h-6 bg-gray-200"}),e.jsx("button",{onClick:ce,className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors",title:a.isDark?"Light mode":"Dark mode",children:a.isDark?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsxs("div",{className:"relative",ref:N,children:[e.jsxs("button",{onClick:()=>j(!f),className:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-700 transition-colors relative",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),l>0&&e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),f&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 rounded-xl shadow-xl border overflow-hidden z-50",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[l>0&&e.jsx("button",{onClick:o,className:"text-xs hover:opacity-80",style:{color:"var(--navbar-bg)"},children:"Mark all read"}),n.length>0&&e.jsx("button",{onClick:c,className:"text-xs hover:opacity-80",style:{color:"var(--text-secondary)"},children:"Clear all"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?e.jsxs("div",{className:"p-6 text-center",style:{color:"var(--text-muted)"},children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):n.slice(0,10).map($=>e.jsx("div",{className:"px-4 py-3 border-b cursor-pointer",style:{borderColor:"var(--border-color)",backgroundColor:$.read?"transparent":"var(--hover-bg)"},onClick:()=>{$.entity_type==="movie"&&$.entity_id?r(`/movies/${$.entity_id}`):$.entity_type==="series"&&$.entity_id&&r(`/series/${$.entity_id}`),j(!1)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${$.type==="success"?"bg-emerald-100 text-emerald-600":$.type==="error"?"bg-red-100 text-red-600":$.type==="warning"?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"}`,children:$.type==="success"?e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):$.type==="error"?e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:$.title}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:$.message}),e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:x($.timestamp)})]}),e.jsx("button",{onClick:U=>{U.stopPropagation(),d($.id)},className:"p-1 rounded hover:opacity-80",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},$.id))}),n.length>10&&e.jsx("div",{className:"px-4 py-2 border-t",style:{borderColor:"var(--border-color)"},children:e.jsx("button",{onClick:()=>{r("/recent-activity"),j(!1)},className:"text-sm font-medium hover:opacity-80",style:{color:"var(--navbar-bg)"},children:"View all activity "})})]})]})]})]}),m&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:()=>{u(!1),p(""),v({library:{movies:[],series:[],episodes:[]},tmdb:[]})}}),e.jsxs("div",{className:"relative w-full max-w-2xl mx-4 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden max-h-[70vh] flex flex-col",children:[e.jsx("form",{onSubmit:Q,children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-gray-100",children:[b?e.jsxs("svg",{className:"w-5 h-5 text-gray-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:k,type:"text",value:h,onChange:$=>p($.target.value),placeholder:"Search library and discover...",className:"flex-1 text-base outline-none text-gray-900 placeholder-gray-400"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 rounded text-gray-400 border border-gray-200",children:"ESC"})]})}),e.jsxs("div",{className:"overflow-y-auto flex-1",children:[y.library.movies.length>0&&e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsx("div",{className:"px-4 py-2 bg-gray-50",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Movies in Library"})}),y.library.movies.map($=>e.jsxs("button",{onClick:()=>{r(`/movies/${$.id}`),u(!1),p(""),v({library:{movies:[],series:[],episodes:[]},tmdb:[]})},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-50 text-left",children:[$.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${$.poster_path}`,alt:"",className:"w-10 h-14 rounded object-cover"}):e.jsx("div",{className:"w-10 h-14 rounded bg-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$.title}),e.jsx("p",{className:"text-xs text-gray-500",children:$.year||"Unknown year"})]}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-emerald-100 text-emerald-700",children:"In Library"})]},`lib-movie-${$.id}`))]}),y.library.series.length>0&&e.jsxs("div",{className:"border-b border-gray-100",children:[e.jsx("div",{className:"px-4 py-2 bg-gray-50",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"TV Series in Library"})}),y.library.series.map($=>{var U;return e.jsxs("button",{onClick:()=>{r(`/series/${$.id}`),u(!1),p(""),v({library:{movies:[],series:[],episodes:[]},tmdb:[]})},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-50 text-left",children:[$.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${$.poster_path}`,alt:"",className:"w-10 h-14 rounded object-cover"}):e.jsx("div",{className:"w-10 h-14 rounded bg-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$.name||$.title}),e.jsx("p",{className:"text-xs text-gray-500",children:((U=$.first_air_date)==null?void 0:U.slice(0,4))||$.year||"Unknown year"})]}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-emerald-100 text-emerald-700",children:"In Library"})]},`lib-series-${$.id}`)})]}),y.tmdb.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 bg-gray-50",children:e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Discover on TMDB"})}),y.tmdb.map($=>{var U;return e.jsxs("button",{onClick:()=>{r(`/discover/${$.media_type}/${$.id}`),u(!1),p(""),v({library:{movies:[],series:[],episodes:[]},tmdb:[]})},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-50 text-left",children:[$.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${$.poster_path}`,alt:"",className:"w-10 h-14 rounded object-cover"}):e.jsx("div",{className:"w-10 h-14 rounded bg-gray-200 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$.title||$.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[$.media_type==="movie"?"Movie":"TV Series","  ",((U=$.release_date||$.first_air_date)==null?void 0:U.slice(0,4))||"Unknown year"]})]}),e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700",children:"TMDB"})]},`tmdb-${$.media_type}-${$.id}`)})]}),h.length>=2&&!b&&!J&&e.jsxs("div",{className:"p-6 text-center text-gray-400",children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsxs("p",{className:"text-sm",children:['No results found for "',h,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Press Enter to search in Discover"})]}),h.length<2&&e.jsxs("div",{className:"p-4 text-sm text-gray-500",children:[e.jsx("p",{children:"Type at least 2 characters to search..."}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Press Enter to search in Discover"})]})]})]})]})]})}function at({children:t}){const{settings:r}=br(),s=r.sidebarCollapsed??!1,[a,n]=i.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("button",{onClick:()=>n(!0),className:"fixed top-4 left-4 z-50 p-2 rounded-lg bg-white border border-gray-200 shadow-sm lg:hidden",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:e.jsx("svg",{className:"w-6 h-6",style:{color:"var(--text-primary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>n(!1)}),e.jsx("div",{className:`
    fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 lg:transform-none
    ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
   `,children:e.jsx(Mv,{onClose:()=>n(!1)})}),e.jsxs("div",{className:`min-h-screen transition-all duration-300 ${s?"lg:ml-16":"lg:ml-60"}`,children:[e.jsx(Tv,{}),e.jsx("main",{className:"p-6",children:t})]})]})}function Cn({title:t,value:r,onClick:s}){return e.jsxs("button",{onClick:s,className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 hover:border-gray-200 hover:shadow-sm transition-all duration-200 text-left group w-full",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:r})]})}function ga({title:t,description:r,icon:s,color:a,onClick:n}){return e.jsxs("button",{onClick:n,className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-100 hover:border-gray-200 hover:shadow-sm transition-all duration-200 text-left group",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${a} flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`,children:s}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r})]})}function Pv({title:t,subtitle:r,time:s,icon:a,color:n}){return e.jsxs("div",{className:"flex items-start gap-3 py-3 border-b border-gray-50 last:border-0",children:[e.jsx("div",{className:`w-9 h-9 rounded-lg ${n} flex items-center justify-center flex-shrink-0`,children:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-words",children:r})]}),e.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0",children:s})]})}function Ns({item:t,onClick:r}){var n,l,o;const s=t.title||t.name||"Unknown",a=((n=t.release_date)==null?void 0:n.substring(0,4))||((l=t.first_air_date)==null?void 0:l.substring(0,4))||t.year;return e.jsxs("div",{onClick:r,className:"cursor-pointer group flex-shrink-0",role:"button",tabIndex:0,onKeyDown:c=>c.key==="Enter"&&r(),children:[e.jsxs("div",{className:"w-[130px] aspect-[2/3] rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-800 relative shadow-sm group-hover:shadow-lg transition-all duration-200",children:[t.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w342${t.poster_path}`,alt:s,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-700",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),t.vote_average>0&&e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-0.5 bg-black/70 backdrop-blur-sm rounded-md text-white text-xs font-medium pointer-events-none",children:[" ",(o=t.vote_average)==null?void 0:o.toFixed(1)]})]}),e.jsx("p",{className:"mt-2 text-sm font-medium truncate w-[130px]",style:{color:"var(--text-primary)"},children:s}),a&&e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:a})]})}function Ev(){var T,z,G,Z,de,ye,je,Le,fe,Ne;const t=yt(),{settings:r}=br(),{formatRelativeTime:s}=rs(),{addToast:a}=vr(),[n,l]=i.useState({movies:{total:0},series:{total:0}}),[o,c]=i.useState([]),[d,x]=i.useState([]),[m,u]=i.useState(0),[f,j]=i.useState([]),[h,p]=i.useState(!1),[y,v]=i.useState([]),[b,g]=i.useState([]),[k,N]=i.useState([]),[E,F]=i.useState([]),[_,q]=i.useState([]),[R,se]=i.useState([]),[V,Q]=i.useState(new Map),[te,J]=i.useState(new Map),ce=i.useMemo(()=>r.dashboardLanguages||["en"],[r.dashboardLanguages]),$=(ie,_e)=>{if(_e==="movie"){const K=V.get(ie);return K?`/movies/${K}`:`/discover/movie/${ie}`}else{const K=te.get(ie);return K?`/series/${K}`:`/discover/tv/${ie}`}},U=i.useCallback(async()=>{var ie;try{const[_e,K,Fe,Se,Re,Ie,Oe]=await Promise.all([C.getLibraryStats().catch(()=>({movies:{total:0},series:{total:0}})),C.getRecentlyAdded(8).catch(()=>[]),C.getTrending("all","week").catch(()=>({results:[]})),C.getDownloads().catch(()=>[]),C.getRecentActivity(4).catch(()=>[]),C.getMovies().catch(()=>({items:[]})),C.getSeries().catch(()=>({items:[]}))]);l(_e),c(K||[]);const De=new Map;((Ie==null?void 0:Ie.items)||[]).forEach(me=>{me.tmdb_id&&De.set(me.tmdb_id,me.id)}),Q(De);const I=new Map;((Oe==null?void 0:Oe.items)||[]).forEach(me=>{me.tmdb_id&&I.set(me.tmdb_id,me.id)}),J(I);const Ce=((Fe==null?void 0:Fe.results)||[]).filter(me=>ce.length===0||ce.includes(me.original_language)).slice(0,10);x(Ce),u(((ie=Se==null?void 0:Se.filter(me=>me.status==="downloading"))==null?void 0:ie.length)||0),j(Re||[]);const[Te,Pe,Ae,O,ve,W]=await Promise.all([C.discoverMoviesPopular(1).catch(()=>({results:[]})),C.discoverTVPopular(1).catch(()=>({results:[]})),C.discoverMoviesUpcoming(1).catch(()=>({results:[]})),C.discoverTVUpcoming(1).catch(()=>({results:[]})),C.getGenres("movie").catch(()=>({genres:[]})),C.getGenres("tv").catch(()=>({genres:[]}))]),he=me=>ce.length===0?me:me.filter(D=>ce.includes(D.original_language));v(he((Te==null?void 0:Te.results)||[]).slice(0,10)),g(he((Pe==null?void 0:Pe.results)||[]).slice(0,10)),N(he((Ae==null?void 0:Ae.results)||[]).slice(0,10)),F(he((O==null?void 0:O.results)||[]).slice(0,10)),q((ve==null?void 0:ve.genres)||[]),se((W==null?void 0:W.genres)||[])}catch(_e){console.error("Failed to load dashboard data:",_e)}},[ce]);i.useEffect(()=>{U()},[U]);const X=ie=>{const _e={added:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),color:"bg-emerald-500"},grabbed:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),color:"bg-violet-500"},downloaded:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),color:"bg-blue-500"},imported:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),color:"bg-green-500"},renamed:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),color:"bg-indigo-500"},deleted:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),color:"bg-red-500"},scan_completed:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),color:"bg-amber-500"},metadata_refreshed:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),color:"bg-cyan-500"},unmonitored:{icon:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),color:"bg-gray-500"}};return _e[ie]||_e.added};return e.jsx(at,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Overview of your media library"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:async()=>{p(!0);try{await C.runWorkerNow("library-refresh"),a({type:"success",message:"Library refresh started"}),setTimeout(()=>U(),2e3)}catch{a({type:"error",message:"Failed to start library refresh"})}finally{p(!1)}},disabled:h,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx("svg",{className:`w-4 h-4 ${h?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),h?"Refreshing...":"Refresh Library"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Cn,{title:"Total Movies",value:((T=n==null?void 0:n.movies)==null?void 0:T.total)||0,onClick:()=>t("/movies")}),e.jsx(Cn,{title:"TV Series",value:((z=n==null?void 0:n.series)==null?void 0:z.total)||0,onClick:()=>t("/series")}),e.jsx(Cn,{title:"Active Downloads",value:m,onClick:()=>t("/downloads")}),e.jsx(Cn,{title:"Missing",value:((G=n==null?void 0:n.movies)==null?void 0:G.missing)||0,onClick:()=>t("/movies?filter=missing")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[e.jsx(ga,{title:"Add Movie",description:"Search & add to library",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),color:"bg-emerald-500",onClick:()=>t("/discover?type=movie")}),e.jsx(ga,{title:"Add TV Show",description:"Search & add series",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),color:"bg-violet-500",onClick:()=>t("/discover?type=tv")}),e.jsx(ga,{title:"Import Files",description:"Scan existing media",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),color:"bg-blue-500",onClick:()=>t("/settings?tab=import")}),e.jsx(ga,{title:"Manage Lists",description:"Import lists & sources",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),color:"bg-amber-500",onClick:()=>t("/settings?tab=lists")}),e.jsx(ga,{title:"Scheduled Tasks",description:"Background jobs & automation",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"bg-indigo-500",onClick:()=>t("/settings?tab=jobs")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.showRecentlyAdded!==!1&&e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recently Added"}),e.jsx("button",{onClick:()=>t("/recently-added"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),o.length>0?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:o.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t(ie.type==="movie"?`/movies/${ie.id}`:`/series/${ie.id}`)},`${ie.type}-${ie.id}`))}):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("p",{className:"text-sm",children:"No items in library yet"}),e.jsx("button",{onClick:()=>t("/discover"),className:"mt-3 text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"Start adding media "})]})]}),e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5 ${r.showRecentlyAdded===!1?"lg:col-span-3":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),e.jsx("button",{onClick:()=>t("/recent-activity"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),e.jsx("div",{className:"space-y-1",children:f.length>0?f.map(ie=>{const _e=X(ie.event_type);return e.jsx(Pv,{title:ie.event_label||ie.event_type,subtitle:ie.message,time:s(ie.created_at),icon:_e.icon,color:_e.color},ie.id)}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("p",{className:"text-sm",children:"No recent activity"})]})})]})]}),((Z=r.dashboardWidgets)==null?void 0:Z.trending)!==!1&&d.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Trending This Week"}),e.jsx("button",{onClick:()=>t("/discover"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"Discover more "})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:d.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t($(ie.id,ie.media_type))},`trending-${ie.id}-${ie.media_type}`))})]}),((de=r.dashboardWidgets)==null?void 0:de.popularMovies)!==!1&&y.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Popular Movies"}),e.jsx("button",{onClick:()=>t("/discover?type=movie"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:y.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t($(ie.id,"movie"))},`popular-movie-${ie.id}`))})]}),((ye=r.dashboardWidgets)==null?void 0:ye.upcomingMovies)!==!1&&k.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Upcoming Movies"}),e.jsx("button",{onClick:()=>t("/discover?type=movie"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:k.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t($(ie.id,"movie"))},`upcoming-movie-${ie.id}`))})]}),((je=r.dashboardWidgets)==null?void 0:je.movieGenres)!==!1&&_.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Movie Genres"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:_.map(ie=>e.jsx("button",{onClick:()=>t(`/discover?type=movie&genres=${ie.id}`),className:"px-3 py-1.5 text-sm rounded-full border border-gray-200 hover:border-emerald-500 hover:bg-emerald-50 hover:text-emerald-700 transition-colors",children:ie.name},`movie-genre-${ie.id}`))})]}),((Le=r.dashboardWidgets)==null?void 0:Le.popularSeries)!==!1&&b.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" Popular Series"}),e.jsx("button",{onClick:()=>t("/discover?type=tv"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:b.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t($(ie.id,"tv"))},`popular-series-${ie.id}`))})]}),((fe=r.dashboardWidgets)==null?void 0:fe.upcomingSeries)!==!1&&E.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" On The Air"}),e.jsx("button",{onClick:()=>t("/discover?type=tv"),className:"text-sm font-medium",style:{color:"var(--navbar-bg)"},children:"View all "})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:E.map(ie=>e.jsx(Ns,{item:ie,onClick:()=>t($(ie.id,"tv"))},`on-the-air-${ie.id}`))})]}),((Ne=r.dashboardWidgets)==null?void 0:Ne.seriesGenres)!==!1&&R.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 p-5",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" TV Genres"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:R.map(ie=>e.jsx("button",{onClick:()=>t(`/discover?type=tv&genres=${ie.id}`),className:"px-3 py-1.5 text-sm rounded-full border border-gray-200 hover:border-emerald-500 hover:bg-emerald-50 hover:text-emerald-700 transition-colors",children:ie.name},`tv-genre-${ie.id}`))})]})]})})}const Sn=["Remux-2160p","2160p","Bluray-2160p","WEBDL-2160p","WEBRip-2160p","Remux-1080p","1080p","Bluray-1080p","WEBDL-1080p","WEBRip-1080p","Bluray-720p","720p","WEBDL-720p","WEBRip-720p","Bluray-576p","576p","Bluray-480p","480p","HDTV-2160p","HDTV-1080p","HDTV-720p","DVD","SDTV","Unknown"];function wu(t){let r=0;if(t.cutoff_quality){const s=Sn.indexOf(t.cutoff_quality);s!==-1&&(r=Sn.length-s)}if(t.items){for(const s of t.items)if(s.allowed){const a=Sn.indexOf(s.quality);if(a!==-1){const n=Sn.length-a;n>r&&(r=n)}}}return r}const Fv={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western",10759:"Action & Adventure",10762:"Kids",10763:"News",10764:"Reality",10765:"Sci-Fi & Fantasy",10766:"Soap",10767:"Talk",10768:"War & Politics"};function Wx({isOpen:t,item:r,mediaType:s,onClose:a,onSuccess:n,onError:l}){var ce,$,U,X,T,z;const[o,c]=i.useState([]),[d,x]=i.useState(""),[m,u]=i.useState("released"),[f,j]=i.useState(!1),[h,p]=i.useState(!0),[y,v]=i.useState("all"),[b,g]=i.useState(!1),[k,N]=i.useState(!1);i.useEffect(()=>{t&&(F(),E())},[t,s]);const E=async()=>{try{const G=await C.getSettings();G.minimum_availability&&u(G.minimum_availability)}catch(G){console.error("Failed to load settings:",G)}},F=async()=>{g(!0);try{const G=await C.getQualityProfiles(),Z=s==="movie"?"movie":"series",ye=[...G.filter(je=>!je.media_type||je.media_type==="both"||je.media_type===Z)].sort((je,Le)=>wu(Le)-wu(je));c(ye),ye.length>0&&x(ye[0].id)}catch(G){console.error("Failed to load profiles:",G)}finally{g(!1)}},_=async()=>{var G,Z,de;if(!(!r||!d)){N(!0);try{const ye=await C.getSettings(),je=s==="movie"?r.title:r.name,Le=s==="movie"?r.release_date:r.first_air_date,fe=Le?new Date(Le).getFullYear():null;let Ne;if(s==="movie"){const ie=ye.movie_path||"/data/media/movies",_e=await C.getMovieFolderName(je||"Unknown",fe||void 0,r.id);Ne=await C.addMovie({tmdb_id:r.id,title:je,year:fe,overview:r.overview,poster_path:r.poster_path,backdrop_path:r.backdrop_path,folder_path:`${ie}/${_e}`,quality_profile_id:d,minimum_availability:m,monitored:h,auto_search:f})}else{const ie=ye.tv_path||"/data/media/tv",_e=await C.getSeriesFolderName(je||"Unknown",fe||void 0,r.id),K=y!=="none";Ne=await C.addSeries({tmdb_id:r.id,title:je,year:fe,overview:r.overview,network:null,poster_path:r.poster_path,backdrop_path:r.backdrop_path,folder_path:`${ie}/${_e}`,quality_profile_id:d,monitored:K,season_monitoring:y,auto_search:f})}n(Ne.id,f),a()}catch(ye){((G=ye.response)==null?void 0:G.status)===409?l("Already in library"):l(((de=(Z=ye.response)==null?void 0:Z.data)==null?void 0:de.error)||ye.message)}finally{N(!1)}}};if(!t||!r)return null;const q=s==="movie"?r.title:r.name,R=s==="movie"?r.release_date:r.first_air_date,se=R?new Date(R).getFullYear():null,V=((ce=r.genres)==null?void 0:ce.map(G=>G.name))||(($=r.genre_ids)==null?void 0:$.map(G=>Fv[G]).filter(Boolean))||[],Q=(X=(U=r.networks)==null?void 0:U[0])==null?void 0:X.name,te=(z=(T=r.production_companies)==null?void 0:T[0])==null?void 0:z.name,J=r.content_rating||r.certification;return e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-lg overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Add ",s==="movie"?"Movie":"Series"," to Library"]})}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[r.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w154${r.poster_path}`,alt:q||"",className:"w-24 h-36 rounded object-cover flex-shrink-0"}):e.jsx("div",{className:"w-24 h-36 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg leading-tight",children:q}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[se&&e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:se}),r.vote_average!==void 0&&r.vote_average>0&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:r.vote_average.toFixed(1)})]}),J&&e.jsx("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded border border-gray-400 dark:border-gray-500 text-gray-600 dark:text-gray-300",children:J}),r.runtime&&r.runtime>0&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Math.floor(r.runtime/60),"h ",r.runtime%60,"m"]}),r.number_of_seasons&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.number_of_seasons," Season",r.number_of_seasons!==1?"s":""]})]}),(te||Q)&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1.5",children:[e.jsx("span",{className:"font-medium",children:s==="movie"?"Studio:":"Network:"})," ",s==="movie"?te:Q]}),V.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[V.slice(0,4).map((G,Z)=>e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:G},Z)),V.length>4&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400",children:["+",V.length-4]})]})]})]}),r.overview&&e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:r.overview})}),b?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading profiles..."}):o.length===0?e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"No Quality Profiles"}),e.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-300",children:"Please create a quality profile in Settings before adding media."})]})]}),e.jsx("a",{href:"/settings?tab=profiles",className:"mt-3 inline-block text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"Go to Settings "})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quality Profile"}),e.jsx("select",{value:d,onChange:G=>x(G.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:o.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))})]}),s==="movie"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minimum Availability"}),e.jsxs("select",{value:m,onChange:G=>u(G.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"announced",children:"Announced"}),e.jsx("option",{value:"inCinemas",children:"In Cinemas"}),e.jsx("option",{value:"released",children:"Released"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When should the movie be considered available for download"})]}),s==="tv"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Monitor"}),e.jsxs("select",{value:y,onChange:G=>v(G.target.value),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Seasons"}),e.jsx("option",{value:"current",children:"Current Season Only"}),e.jsx("option",{value:"future",children:"Future Seasons Only"}),e.jsx("option",{value:"none",children:"None"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Which seasons should be monitored for downloads"})]}),s==="movie"&&e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:G=>p(G.target.checked),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Monitored"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Track this movie for new releases and upgrades"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:G=>j(G.target.checked),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Search for missing ",s==="movie"?"movie":"episodes"," or upgrades"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Start searching indexers immediately after adding (includes quality upgrades if profile allows)"})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:a,disabled:k,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:k||o.length===0||!d,className:"px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?"Adding...":"Add to Library"})]})]})})}function Hl({value:t,onChange:r}){const a=(o=>o<=3?"small":o<=6?"medium":"large")(t),n={small:2,medium:5,large:8},l=[{key:"small",label:"Small"},{key:"medium",label:"Medium"},{key:"large",label:"Large"}];return e.jsx("div",{className:"flex items-center rounded-lg p-1",style:{backgroundColor:"var(--hover-bg)"},children:l.map(o=>e.jsx("button",{onClick:()=>r(n[o.key]),className:"p-2 rounded-md transition-colors",style:{backgroundColor:a===o.key?"var(--navbar-bg)":"transparent"},title:`${o.label} posters`,children:e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"none",style:{color:a===o.key?"var(--navbar-text)":"var(--text-secondary)"},children:[o.key==="small"&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"1",y:"1",width:"4",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"6",y:"1",width:"4",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"11",y:"1",width:"4",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"1",y:"9",width:"4",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"6",y:"9",width:"4",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"11",y:"9",width:"4",height:"6",rx:"0.5",fill:"currentColor"})]}),o.key==="medium"&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"0.5",fill:"currentColor"})]}),o.key==="large"&&e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"1",y:"1",width:"6",height:"14",rx:"0.5",fill:"currentColor"}),e.jsx("rect",{x:"9",y:"1",width:"6",height:"14",rx:"0.5",fill:"currentColor"})]})]})},o.key))})}const Nu={1:{grid:"grid-cols-[repeat(auto-fill,minmax(80px,80px))]"},2:{grid:"grid-cols-[repeat(auto-fill,minmax(100px,100px))]"},3:{grid:"grid-cols-[repeat(auto-fill,minmax(120px,120px))]"},4:{grid:"grid-cols-[repeat(auto-fill,minmax(140px,140px))]"},5:{grid:"grid-cols-[repeat(auto-fill,minmax(160px,160px))]"},6:{grid:"grid-cols-[repeat(auto-fill,minmax(180px,180px))]"},7:{grid:"grid-cols-[repeat(auto-fill,minmax(200px,200px))]"},8:{grid:"grid-cols-[repeat(auto-fill,minmax(220px,220px))]"},9:{grid:"grid-cols-[repeat(auto-fill,minmax(250px,250px))]"},10:{grid:"grid-cols-[repeat(auto-fill,minmax(280px,280px))]"}},Av=[{value:"popularity.desc",label:"Popularity Descending"},{value:"popularity.asc",label:"Popularity Ascending"},{value:"primary_release_date.desc",label:"Release Date Descending"},{value:"primary_release_date.asc",label:"Release Date Ascending"},{value:"vote_average.desc",label:"TMDB Rating Descending"},{value:"vote_average.asc",label:"TMDB Rating Ascending"},{value:"original_title.asc",label:"Title (A-Z) Ascending"},{value:"original_title.desc",label:"Title (Z-A) Descending"}],Dv=[{value:"popularity.desc",label:"Popularity Descending"},{value:"popularity.asc",label:"Popularity Ascending"},{value:"first_air_date.desc",label:"First Air Date Descending"},{value:"first_air_date.asc",label:"First Air Date Ascending"},{value:"vote_average.desc",label:"TMDB Rating Descending"},{value:"vote_average.asc",label:"TMDB Rating Ascending"},{value:"name.asc",label:"Title (A-Z) Ascending"},{value:"name.desc",label:"Title (Z-A) Descending"}],Rv=["NR","G","PG","PG-13","R","NC-17"],Iv=["NR","TV-Y","TV-Y7","TV-G","TV-PG","TV-14","TV-MA"],Bv=[{value:"",label:"Any Status"},{value:"returning",label:"Returning Series"},{value:"ended",label:"Ended"},{value:"canceled",label:"Canceled"},{value:"in_production",label:"In Production"}],So={genres:[],releaseDateFrom:"",releaseDateTo:"",language:"",status:"",runtimeMin:0,runtimeMax:400,voteAverageMin:1,voteAverageMax:10,voteCountMin:0,voteCountMax:1e3,certifications:[],keywords:[],excludeKeywords:[],companies:[],hideInLibrary:!1},Cu={1:{grid:"grid-cols-[repeat(auto-fill,minmax(80px,80px))]",imgSize:"w154"},2:{grid:"grid-cols-[repeat(auto-fill,minmax(100px,100px))]",imgSize:"w154"},3:{grid:"grid-cols-[repeat(auto-fill,minmax(120px,120px))]",imgSize:"w185"},4:{grid:"grid-cols-[repeat(auto-fill,minmax(140px,140px))]",imgSize:"w185"},5:{grid:"grid-cols-[repeat(auto-fill,minmax(160px,160px))]",imgSize:"w300"},6:{grid:"grid-cols-[repeat(auto-fill,minmax(180px,180px))]",imgSize:"w300"},7:{grid:"grid-cols-[repeat(auto-fill,minmax(200px,200px))]",imgSize:"w342"},8:{grid:"grid-cols-[repeat(auto-fill,minmax(220px,220px))]",imgSize:"w342"},9:{grid:"grid-cols-[repeat(auto-fill,minmax(250px,250px))]",imgSize:"w500"},10:{grid:"grid-cols-[repeat(auto-fill,minmax(280px,280px))]",imgSize:"w500"}};function zv(){const[t]=zl(),r=yt(),{addToast:s}=vr(),{settings:a,updateSettings:n}=br(),[l,o]=i.useState([]),[c,d]=i.useState(!0),[x,m]=i.useState(!1),[u,f]=i.useState("movie"),[j,h]=i.useState("popularity.desc"),[p,y]=i.useState(1),[v,b]=i.useState(!0),[g,k]=i.useState(So),[N,E]=i.useState(!1),[F,_]=i.useState([]),[q,R]=i.useState([]),[se,V]=i.useState(""),[Q,te]=i.useState([]),[J,ce]=i.useState(""),[$,U]=i.useState([]),[X,T]=i.useState(""),[z,G]=i.useState([]),[Z,de]=i.useState(!1),[ye,je]=i.useState(""),[Le,fe]=i.useState(new Map),[Ne,ie]=i.useState(new Map),[_e,K]=i.useState(null),[Fe,Se]=i.useState(!1),[Re,Ie]=i.useState(null),Oe=i.useRef(null),De=i.useRef(null),I=i.useRef(null),Ce=Cu[a.posterSize]||Cu[5];i.useEffect(()=>{(async()=>{try{const ne=!!(await C.getSettings()).tmdb_api_key;Ie(ne)}catch(A){console.error("Failed to check API key:",A),Ie(!1)}})()},[]);const Pe=(()=>{let w=0;return g.genres.length>0&&w++,(g.releaseDateFrom||g.releaseDateTo)&&w++,g.language&&w++,g.status&&w++,(g.runtimeMin>0||g.runtimeMax<400)&&w++,(g.voteAverageMin>1||g.voteAverageMax<10)&&w++,(g.voteCountMin>0||g.voteCountMax<1e3)&&w++,g.certifications.length>0&&w++,g.keywords.length>0&&w++,g.excludeKeywords.length>0&&w++,g.companies.length>0&&w++,g.hideInLibrary&&w++,w})();i.useEffect(()=>{const w=t.get("type");(w==="tv"||w==="movie")&&f(w);const A=t.get("genres");if(A){const ne=A.split(",").map(xe=>parseInt(xe,10)).filter(xe=>!isNaN(xe));ne.length>0&&k(xe=>({...xe,genres:ne}))}Ae()},[t]),i.useEffect(()=>{Re&&(O(),ve())},[u,Re]),i.useEffect(()=>{Re&&!Z&&(o([]),y(1),b(!0),W(1,!0))},[u,j,g,Z,Re]),i.useEffect(()=>(Oe.current&&Oe.current.disconnect(),Oe.current=new IntersectionObserver(w=>{w[0].isIntersecting&&v&&!c&&!x&&Re&&he()},{threshold:.1}),De.current&&Oe.current.observe(De.current),()=>{Oe.current&&Oe.current.disconnect()}),[v,c,x,p]),i.useEffect(()=>{const w=A=>{I.current&&!I.current.contains(A.target)&&E(!1)};return N&&document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[N]);const Ae=async()=>{try{const[w,A]=await Promise.all([C.getMovies(),C.getSeries()]);fe(new Map(w.items.map(ne=>[ne.tmdb_id,ne.id]))),ie(new Map(A.items.map(ne=>[ne.tmdb_id,ne.id])))}catch(w){console.error("Failed to load library:",w)}},O=async()=>{try{const w=await C.getGenres(u);_(w.genres||[])}catch(w){console.error("Failed to load genres:",w)}},ve=async()=>{try{const A=(await C.getLanguages()||[]).sort((ne,xe)=>ne.english_name.localeCompare(xe.english_name));R(A)}catch(w){console.error("Failed to load languages:",w)}},W=async(w,A=!1)=>{if(!Re){d(!1);return}const ne=u;try{A?d(!0):m(!0);const xe={genres:g.genres,releaseDateFrom:g.releaseDateFrom,releaseDateTo:g.releaseDateTo,language:g.language,runtimeMin:g.runtimeMin,runtimeMax:g.runtimeMax,voteAverageMin:g.voteAverageMin,voteAverageMax:g.voteAverageMax,voteCountMin:g.voteCountMin,voteCountMax:g.voteCountMax,certifications:g.certifications,keywords:g.keywords.map(B=>B.id),excludeKeywords:g.excludeKeywords.map(B=>B.id),companies:g.companies.map(B=>B.id)},He=await C.discover(ne,w,j,xe);if(ne!==u){console.log("Category changed during request, discarding results");return}o(A?He.results||[]:B=>[...B,...He.results||[]]),b(w<(He.total_pages||1)),y(w)}catch(xe){console.error("Failed to load content:",xe)}finally{d(!1),m(!1)}},he=i.useCallback(()=>{!x&&v&&!Z&&Re&&W(p+1,!1)},[x,v,p,Z,Re,u]),me=async w=>{if(w.preventDefault(),!Re){s({type:"error",message:"TMDB API key not configured"});return}if(!ye.trim()){de(!1),o([]),y(1),W(1,!0);return}try{d(!0),de(!0);const A=u==="movie"?await C.searchMovies(ye):await C.searchTV(ye);o(A.results||[]),b(!1)}catch(A){console.error("Search failed:",A)}finally{d(!1)}},D=()=>{je(""),de(!1),o([]),y(1),Re&&W(1,!0)},ue=w=>{f(w),h("popularity.desc"),k(So)},ge=async(w,A=!1)=>{if(!w.trim()){A?U([]):te([]);return}try{const ne=await C.searchKeywords(w);A?U(ne.results||[]):te(ne.results||[])}catch(ne){console.error("Keyword search failed:",ne)}},H=async w=>{if(!w.trim()){G([]);return}try{const A=await C.searchCompanies(w);G(A.results||[])}catch(A){console.error("Company search failed:",A)}},re=()=>{k(So)},P=(w,A)=>{if(_e){const ne=A?" Searching for releases...":"";u==="movie"?(fe(xe=>new Map(xe).set(_e.id,w)),s({type:"success",message:`${_e.title} added to your library!${ne}`})):(ie(xe=>new Map(xe).set(_e.id,w)),s({type:"success",message:`${_e.name} added to your library!${ne}`}))}K(null)},L=w=>{w==="Already in library"?(Ae(),s({type:"info",message:"Already in your library"})):s({type:"error",message:`Failed to add: ${w}`})},S=u==="movie"?Av:Dv,Y=u==="movie"?Rv:Iv;return e.jsxs(at,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Discover"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Browse and add to your library"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap p-3 border",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("form",{onSubmit:me,className:"flex items-center gap-2 flex-1 min-w-[200px] max-w-sm",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:ye,onChange:w=>je(w.target.value),placeholder:`Search ${u==="movie"?"movies":"TV shows"}...`,className:"w-full pl-10 pr-4 py-2 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--input-border)",color:"var(--input-text)"}})]}),Z&&e.jsx("button",{type:"button",onClick:D,className:"px-3 py-2 text-sm ",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-secondary)"},children:"Clear"})]}),e.jsx("div",{className:"h-6 w-px hidden sm:block",style:{backgroundColor:"var(--border-color)"}}),e.jsxs("div",{className:"flex items-center gap-1 p-1 rounded-lg",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("button",{onClick:()=>ue("movie"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors",style:{backgroundColor:u==="movie"?"var(--navbar-bg)":"transparent",color:u==="movie"?"var(--navbar-text)":"var(--text-secondary)"},children:"Movies"}),e.jsx("button",{onClick:()=>ue("tv"),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors",style:{backgroundColor:u==="tv"?"var(--navbar-bg)":"transparent",color:u==="tv"?"var(--navbar-text)":"var(--text-secondary)"},children:"TV Shows"})]}),e.jsx(Hl,{value:a.posterSize||5,onChange:w=>n({posterSize:w})}),e.jsx("div",{className:"h-6 w-px hidden sm:block",style:{backgroundColor:"var(--border-color)"}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 hidden sm:block",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),e.jsx("select",{value:j,onChange:w=>h(w.target.value),disabled:Z,className:"px-3 py-2 text-sm border disabled:opacity-50",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--input-border)",color:"var(--input-text)"},children:S.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!N),disabled:Z,className:"flex items-center gap-2 px-3 py-2 text-sm border disabled:opacity-50",style:{backgroundColor:Pe>0||N?"var(--btn-primary-bg)":"transparent",borderColor:Pe>0||N?"var(--btn-primary-bg)":"var(--border-color)",color:Pe>0||N?"var(--btn-primary-text)":"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Pe>0?`${Pe} Filters`:"Filters"]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>E(!1)}),e.jsxs("div",{ref:I,className:"fixed inset-4 md:absolute md:inset-auto md:right-0 md:top-full md:mt-2 md:w-[480px] max-h-[90vh] md:max-h-[85vh] overflow-hidden shadow-2xl z-50 border flex flex-col",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"border-b px-4 py-3 flex items-center justify-between",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Filters"}),Pe>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-primary-600 text-white",children:[Pe," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Pe>0&&e.jsx("button",{onClick:re,className:"px-2 py-1 text-xs text-red-400 hover:text-red-300 transition-colors",children:"Clear all"}),e.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-700 rounded transition-colors",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border-color)"},children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Hide items in library"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-muted)"},children:"Only show items not already in your library"})]}),e.jsx("button",{onClick:()=>k({...g,hideInLibrary:!g.hideInLibrary}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${g.hideInLibrary?"bg-primary-600":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${g.hideInLibrary?"translate-x-4":"translate-x-0.5"}`})})]})}),e.jsxs("div",{className:"p-4 border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--text-muted)"},children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:F.map(w=>e.jsx("button",{onClick:()=>{g.genres.includes(w.id)?k({...g,genres:g.genres.filter(A=>A!==w.id)}):k({...g,genres:[...g.genres,w.id]})},className:`px-2.5 py-1 text-xs font-medium transition-colors ${g.genres.includes(w.id)?"bg-primary-600 text-white":"bg-gray-700/50 text-gray-400 hover:bg-gray-700 hover:text-gray-300"}`,children:w.name},w.id))})]}),e.jsxs("div",{className:"p-4 border-b grid grid-cols-1 md:grid-cols-2 gap-4",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:u==="movie"?"Release Date":"Air Date"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"date",value:g.releaseDateFrom,onChange:w=>k({...g,releaseDateFrom:w.target.value}),className:"w-full px-2 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},placeholder:"From"}),e.jsx("input",{type:"date",value:g.releaseDateTo,onChange:w=>k({...g,releaseDateTo:w.target.value}),className:"w-full px-2 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},placeholder:"To"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:"Language"}),e.jsxs("select",{value:g.language,onChange:w=>k({...g,language:w.target.value}),className:"w-full px-2 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),q.slice(0,50).map(w=>e.jsx("option",{value:w.iso_639_1,children:w.english_name},w.iso_639_1))]}),u==="tv"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2 mt-3",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("select",{value:g.status,onChange:w=>k({...g,status:w.target.value}),className:"w-full px-2 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:Bv.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))})]})]})]}),e.jsxs("div",{className:"p-4 border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--text-muted)"},children:"Content Rating"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Y.map(w=>e.jsx("button",{onClick:()=>{g.certifications.includes(w)?k({...g,certifications:g.certifications.filter(A=>A!==w)}):k({...g,certifications:[...g.certifications,w]})},className:`px-2.5 py-1 text-xs font-medium transition-colors ${g.certifications.includes(w)?"bg-primary-600 text-white":"bg-gray-700/50 text-gray-400 hover:bg-gray-700 hover:text-gray-300"}`,children:w},w))})]}),e.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:["Rating (",g.voteAverageMin,"-",g.voteAverageMax,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"10",step:"0.5",value:g.voteAverageMin,onChange:w=>k({...g,voteAverageMin:Number(w.target.value)}),className:"w-16 px-2 py-1 text-sm text-center border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),e.jsx("span",{style:{color:"var(--text-muted)"},children:"to"}),e.jsx("input",{type:"number",min:"1",max:"10",step:"0.5",value:g.voteAverageMax,onChange:w=>k({...g,voteAverageMax:Number(w.target.value)}),className:"w-16 px-2 py-1 text-sm text-center border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:["Runtime (max ",g.runtimeMax,"m)"]}),e.jsx("input",{type:"range",min:"0",max:"400",value:g.runtimeMax,onChange:w=>k({...g,runtimeMax:Number(w.target.value)}),className:"w-full h-1.5 bg-gray-700 rounded appearance-none cursor-pointer accent-primary-500"})]})]})}),e.jsxs("div",{className:"p-4 border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:"Keywords (Include)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:se,onChange:w=>{V(w.target.value),ge(w.target.value)},placeholder:"Search and add keywords...",className:"w-full px-3 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),Q.length>0&&e.jsx("div",{className:"absolute z-20 w-full mt-1 border rounded shadow-xl max-h-32 overflow-y-auto",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:Q.map(w=>e.jsx("button",{onClick:()=>{g.keywords.find(A=>A.id===w.id)||k({...g,keywords:[...g.keywords,w]}),V(""),te([])},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-700/50",style:{color:"var(--text-secondary)"},children:w.name},w.id))})]}),g.keywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:g.keywords.map(w=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-900/30 border border-green-700/50 rounded text-xs text-green-300",children:[w.name,e.jsx("button",{onClick:()=>k({...g,keywords:g.keywords.filter(A=>A.id!==w.id)}),className:"hover:text-white",children:""})]},w.id))}),e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2 mt-4",style:{color:"var(--text-muted)"},children:"Keywords (Exclude)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:J,onChange:w=>{ce(w.target.value),ge(w.target.value,!0)},placeholder:"Search keywords to exclude...",className:"w-full px-3 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),$.length>0&&e.jsx("div",{className:"absolute z-20 w-full mt-1 border rounded shadow-xl max-h-32 overflow-y-auto",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:$.map(w=>e.jsx("button",{onClick:()=>{g.excludeKeywords.find(A=>A.id===w.id)||k({...g,excludeKeywords:[...g.excludeKeywords,w]}),ce(""),U([])},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-700/50",style:{color:"var(--text-secondary)"},children:w.name},w.id))})]}),g.excludeKeywords.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:g.excludeKeywords.map(w=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-900/30 border border-red-700/50 rounded text-xs text-red-300",children:[w.name,e.jsx("button",{onClick:()=>k({...g,excludeKeywords:g.excludeKeywords.filter(A=>A.id!==w.id)}),className:"hover:text-white",children:""})]},w.id))})]}),u==="movie"&&e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-wider mb-2",style:{color:"var(--text-muted)"},children:"Studio"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:X,onChange:w=>{T(w.target.value),H(w.target.value)},placeholder:"Search studios...",className:"w-full px-3 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}}),z.length>0&&e.jsx("div",{className:"absolute z-20 w-full mt-1 border rounded shadow-xl max-h-32 overflow-y-auto",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:z.map(w=>e.jsx("button",{onClick:()=>{g.companies.find(A=>A.id===w.id)||k({...g,companies:[...g.companies,w]}),T(""),G([])},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-700/50",style:{color:"var(--text-secondary)"},children:w.name},w.id))})]}),g.companies.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:g.companies.map(w=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-900/30 border border-blue-700/50 rounded text-xs text-blue-300",children:[w.name,e.jsx("button",{onClick:()=>k({...g,companies:g.companies.filter(A=>A.id!==w.id)}),className:"hover:text-white",children:""})]},w.id))})]})]}),e.jsx("div",{className:"border-t px-4 py-3 flex justify-end gap-2",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:e.jsx("button",{onClick:()=>E(!1),className:"px-4 py-1.5 text-sm font-medium transition-colors rounded",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:"Apply Filters"})})]})]})]})]}),Z&&e.jsxs("div",{className:"px-3 py-2 text-sm",style:{backgroundColor:"var(--surface-bg)",color:"var(--text-secondary)"},children:["Showing search results for: ",e.jsx("strong",{style:{color:"var(--text-primary)"},children:ye})]}),Re===!1&&e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-yellow-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"TMDB API Key Required"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"To discover movies and TV shows, you need to configure your TMDB API key in the settings."}),e.jsx("button",{onClick:()=>r("/settings?tab=api"),className:"px-6 py-2.5 bg-primary-600 text-white hover:bg-primary-700 transition-colors font-medium",children:"Go to API Settings"})]})}),Re===null?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Checking configuration..."}):Re===!1?null:c&&l.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid ${Ce.grid} gap-3`,children:l.filter(w=>g.hideInLibrary?!(u==="movie"?Le.get(w.id):Ne.get(w.id)):!0).map(w=>{const A=u==="movie"?Le.get(w.id):Ne.get(w.id),ne=!!A,xe=w.title||w.name,He=w.release_date||w.first_air_date,B=He?new Date(He).getFullYear():null,ae=w.overview||"";return e.jsx("div",{className:"group relative overflow-hidden shadow hover:shadow-lg transition-all cursor-pointer",onClick:()=>{r(ne?u==="movie"?`/movies/${A}`:`/series/${A}`:`/discover/${u}/${w.id}`)},children:e.jsxs("div",{className:"aspect-[2/3] relative",children:[w.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/${Ce.imgSize}${w.poster_path}`,alt:xe,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"No Poster"})}),ne&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-medium",children:"In Library"})}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-3",children:[e.jsx("h3",{className:"text-white font-semibold text-sm leading-tight mb-1",children:xe}),e.jsx("p",{className:"text-gray-300 text-xs mb-2",children:B||"TBA"}),e.jsx("p",{className:"text-gray-400 text-xs line-clamp-3 mb-3",children:ae||"No synopsis available."}),ne?e.jsx("button",{onClick:ke=>{ke.stopPropagation(),r(u==="movie"?`/movies/${A}`:`/series/${A}`)},className:"w-full py-2 text-sm font-medium bg-green-500 text-white hover:bg-green-600 transition-colors",children:"View in Library"}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ke=>{ke.stopPropagation(),r(`/discover/${u}/${w.id}`)},className:"flex-1 py-2 text-sm font-medium transition-colors bg-primary-600 text-white hover:bg-primary-700 flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Info"]}),e.jsx("button",{onClick:ke=>{ke.stopPropagation(),K(w),Se(!0)},className:"px-3 py-2 text-sm font-medium transition-colors bg-green-600 text-white hover:bg-green-700 flex items-center justify-center",title:"Add to Library",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})]})]})},`${u}-${w.id}`)})}),!Z&&e.jsxs("div",{ref:De,className:"flex justify-center py-8",children:[x&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary-500"}),e.jsx("span",{children:"Loading more..."})]}),!v&&l.length>0&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No more items to load"})]})]})]}),e.jsx(Wx,{isOpen:Fe,item:_e,mediaType:u,onClose:()=>{Se(!1),K(null)},onSuccess:P,onError:L})]})}function $v({isOpen:t,onClose:r,mediaType:s,mediaId:a,title:n,year:l,seasonNumber:o,episodeNumber:c,qualityProfileId:d}){const[x,m]=i.useState([]),[u,f]=i.useState(!0),[j,h]=i.useState(null),[p,y]=i.useState(null),[v,b]=i.useState("score"),[g,k]=i.useState("desc"),[N,E]=i.useState("all"),[F,_]=i.useState("all"),[q,R]=i.useState(""),[se,V]=i.useState([]),[Q,te]=i.useState(""),[J,ce]=i.useState(null),[$,U]=i.useState("cards"),[X,T]=i.useState([]),[z,G]=i.useState(d||""),{addToast:Z}=vr(),{formatRelativeTime:de}=rs();i.useEffect(()=>{(async()=>{try{const{ui_settings:Ce}=await C.getUISettings();Ce!=null&&Ce.searchReleasesViewMode&&U(Ce.searchReleasesViewMode)}catch(Ce){console.error("Failed to load view preference:",Ce)}})()},[]);const ye=async I=>{U(I);try{const{ui_settings:Ce}=await C.getUISettings();await C.updateUISettings({...Ce,searchReleasesViewMode:I})}catch(Ce){console.error("Failed to save view preference:",Ce)}};i.useEffect(()=>{t&&(je(),fe(),Ne(),Le())},[t]),i.useEffect(()=>{z&&x.length>0&&ie(x,z)},[z]),i.useEffect(()=>{z&&x.length>0&&x.every(I=>I.customFormatScore===0)&&ie(x,z)},[x.length]);const je=async()=>{try{const I=await C.getIndexerStatus();ce(I)}catch(I){console.error("Failed to load indexer status:",I)}},Le=async()=>{try{const I=await C.getEnabledDownloadClients();V(I),I.length>0&&!Q&&te(I[0].id)}catch(I){console.error("Failed to load download clients:",I)}},fe=async()=>{try{const I=await C.getQualityProfiles();T(I),I.length>0&&!z&&G(d||I[0].id)}catch(I){console.error("Failed to load quality profiles:",I)}},Ne=async()=>{var I,Ce;f(!0),y(null);try{let Te;s==="movie"?Te=await C.searchMovieReleases(n,l):Te=await C.searchTVReleases(n,o,c);const Pe=Te.map(O=>({...O,quality:_e(O.title),size:O.size||0,seeders:O.seeders||0,leechers:O.leechers||0,customFormatScore:0}));m(Pe);const Ae=z||d;Ae&&Pe.length>0&&ie(Pe,Ae)}catch(Te){y(((Ce=(I=Te.response)==null?void 0:I.data)==null?void 0:Ce.error)||"Failed to search releases")}finally{f(!1)}},ie=async(I,Ce)=>{try{const Te=I.map(Ae=>({title:Ae.title,size:Ae.size})),Pe=await C.scoreReleases(Te,Ce);Pe.scores&&m(Ae=>Ae.map(O=>({...O,customFormatScore:Pe.scores[O.title]||0})))}catch(Te){console.error("Failed to load custom format scores:",Te)}},_e=I=>I.match(/2160p|4K|UHD/i)?"4K":I.match(/1080p/i)?"1080p":I.match(/720p/i)?"720p":I.match(/480p/i)?"480p":"Unknown",K=I=>I.match(/Remux/i)?"Remux":I.match(/BluRay|BDRip/i)?"Bluray":I.match(/WEB-DL|WEBDL/i)?"WEB-DL":I.match(/WEBRip/i)?"WEBRip":I.match(/HDTV/i)?"HDTV":"",Fe=I=>{if(I===0)return"N/A";const Ce=I/(1024*1024*1024);return Ce>=1?`${Ce.toFixed(1)} GB`:`${(I/(1024*1024)).toFixed(0)} MB`},Se=I=>I?de(I):"N/A",Re=async I=>{var Ce,Te;if(se.length===0){Z({message:"No download clients configured",type:"error"});return}h(I.guid);try{await C.startDownload({movieId:s==="movie"?a:void 0,seriesId:s==="tv"?a:void 0,seasonNumber:o,episodeNumber:c,downloadUrl:I.downloadUrl,title:I.title,quality:I.quality,size:I.size,seeders:I.seeders,indexer:I.indexer,protocol:I.protocol,downloadClientId:Q||void 0}),Z({message:"Download started!",type:"success"}),r()}catch(Pe){Z({message:((Te=(Ce=Pe.response)==null?void 0:Ce.data)==null?void 0:Te.error)||"Failed to start download",type:"error"})}finally{h(null)}},Ie=I=>{switch(I){case"4K":case"2160p":return"#9333ea";case"1080p":return"#2563eb";case"720p":return"#16a34a";case"480p":return"#ca8a04";default:return"#6b7280"}},Oe=(I,Ce)=>Ce==="all"?!0:Ce==="4K"?I==="4K"||I==="2160p":I===Ce,De=x.filter(I=>Oe(I.quality,N)).filter(I=>F==="all"||I.protocol===F).filter(I=>!q||I.title.toLowerCase().includes(q.toLowerCase())).sort((I,Ce)=>{let Te=0;switch(v){case"score":const Pe=(I.customFormatScore||0)+Math.min((I.seeders||0)/2,50);Te=(Ce.customFormatScore||0)+Math.min((Ce.seeders||0)/2,50)-Pe;break;case"seeders":Te=(Ce.seeders||0)-(I.seeders||0);break;case"size":Te=(Ce.size||0)-(I.size||0);break;case"age":Te=new Date(Ce.publishDate).getTime()-new Date(I.publishDate).getTime();break;case"quality":const O={"4K":4,"2160p":4,"1080p":3,"720p":2,"480p":1};Te=(O[Ce.quality]||0)-(O[I.quality]||0);break}return g==="desc"?Te:-Te});return t?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] p-4",style:{backgroundColor:"rgba(0,0,0,0.7)"},onClick:I=>I.target===I.currentTarget&&r(),children:e.jsxs("div",{className:"w-full max-w-7xl max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",style:{backgroundColor:"var(--card-bg, #1f2937)"},onClick:I=>I.stopPropagation(),children:[e.jsx("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"Search Releases"}),e.jsxs("p",{className:"text-sm mt-0.5",style:{color:"var(--text-secondary)"},children:[n," ",l&&`(${l})`,o!==void 0&&`  Season ${o}`,c!==void 0&&`, Episode ${c}`]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 transition-colors",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"px-6 py-3 border-b flex flex-wrap items-center gap-3",style:{borderColor:"var(--border-color)",backgroundColor:"var(--page-bg)"},children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Filter results...",value:q,onChange:I=>R(I.target.value),className:"w-full pl-9 pr-3 py-2 text-sm focus:outline-none focus:ring-2",style:{backgroundColor:"var(--input-bg)",color:"var(--input-text)",border:"1px solid var(--input-border)"}})]}),e.jsxs("select",{value:F,onChange:I=>_(I.target.value),className:"px-3 py-2 text-sm focus:outline-none",style:{backgroundColor:"var(--input-bg)",color:"var(--input-text)",border:"1px solid var(--input-border)"},children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"torrent",children:"Torrents"}),e.jsx("option",{value:"usenet",children:"Usenet"})]}),e.jsxs("select",{value:N,onChange:I=>E(I.target.value),className:"px-3 py-2 text-sm focus:outline-none",style:{backgroundColor:"var(--input-bg)",color:"var(--input-text)",border:"1px solid var(--input-border)"},children:[e.jsx("option",{value:"all",children:"All Quality"}),e.jsx("option",{value:"4K",children:"4K / 2160p"}),e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"480p",children:"480p"})]}),e.jsxs("select",{value:`${v}-${g}`,onChange:I=>{const[Ce,Te]=I.target.value.split("-");b(Ce),k(Te)},className:"px-3 py-2 text-sm focus:outline-none",style:{backgroundColor:"var(--input-bg)",color:"var(--input-text)",border:"1px solid var(--input-border)"},children:[e.jsx("option",{value:"score-desc",children:"Best Score"}),e.jsx("option",{value:"seeders-desc",children:"Most Seeders"}),e.jsx("option",{value:"seeders-asc",children:"Least Seeders"}),e.jsx("option",{value:"size-desc",children:"Largest"}),e.jsx("option",{value:"size-asc",children:"Smallest"}),e.jsx("option",{value:"age-desc",children:"Newest"}),e.jsx("option",{value:"age-asc",children:"Oldest"}),e.jsx("option",{value:"quality-desc",children:"Best Quality"})]}),X.length>0&&e.jsx("select",{value:z,onChange:I=>G(I.target.value),className:"px-3 py-2 text-sm focus:outline-none",style:{backgroundColor:"var(--input-bg)",color:"var(--input-text)",border:"1px solid var(--input-border)"},title:"Quality Profile for Custom Format scoring",children:X.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))}),e.jsxs("div",{className:"flex overflow-hidden",style:{border:"1px solid var(--input-border)"},children:[e.jsx("button",{onClick:()=>ye("cards"),className:`px-3 py-2 text-sm ${$==="cards"?"bg-blue-500 text-white":""}`,style:$!=="cards"?{backgroundColor:"var(--input-bg)",color:"var(--text-secondary)"}:{},children:"Cards"}),e.jsx("button",{onClick:()=>ye("table"),className:`px-3 py-2 text-sm ${$==="table"?"bg-blue-500 text-white":""}`,style:$!=="table"?{backgroundColor:"var(--input-bg)",color:"var(--text-secondary)"}:{},children:"Table"})]}),e.jsxs("button",{onClick:Ne,disabled:u,className:"px-4 py-2 text-sm font-medium disabled:opacity-50 flex items-center gap-2",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:[e.jsx("svg",{className:`w-4 h-4 ${u?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),u?"Searching...":"Refresh"]})]}),e.jsxs("div",{className:"px-6 py-2 flex items-center justify-between",style:{backgroundColor:"var(--page-bg)"},children:[e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[De.length," result",De.length!==1?"s":"",x.length!==De.length&&` (${x.length} total)`]}),J&&e.jsxs("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:["Searched ",J.configured," indexer",J.configured!==1?"s":""]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:u?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 mb-4",style:{borderColor:"var(--navbar-bg)"}}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:"Searching indexers..."}),J&&J.configured>0&&e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:J.indexers.map(I=>I.name).join(", ")})]}):p?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("svg",{className:"w-12 h-12 mb-4 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:p}),e.jsx("button",{onClick:Ne,className:"mt-4 px-4 py-2 ",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:"Try Again"})]}):De.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("svg",{className:"w-12 h-12 mb-4",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:"No releases found"}),q&&e.jsx("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:"Try adjusting your filters"})]}):$==="cards"?e.jsx("div",{className:"grid gap-3",children:De.map(I=>e.jsx("div",{className:" p-4 transition-all hover:scale-[1.01]",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)"},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:I.infoUrl?e.jsx("a",{href:I.infoUrl,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-sm hover:underline truncate",style:{color:"var(--link-color, #60a5fa)"},title:I.title,children:I.title}):e.jsx("span",{className:"font-medium text-sm truncate",style:{color:"var(--text-primary)"},title:I.title,children:I.title})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:I.protocol==="usenet"?"#3b82f6":"#f97316",color:"white"},children:I.protocol==="usenet"?"NZB":"Torrent"}),e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:Ie(I.quality),color:"white"},children:I.quality}),z&&e.jsxs("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:I.customFormatScore!==void 0&&I.customFormatScore>0?"#059669":I.customFormatScore!==void 0&&I.customFormatScore<0?"#dc2626":"#6b7280",color:"white"},title:"Custom Format Score",children:["CF: ",I.customFormatScore!==void 0?(I.customFormatScore>0?"+":"")+I.customFormatScore:"0"]}),K(I.title)&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-secondary)"},children:K(I.title)}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:I.indexer})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:Fe(I.size)}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Size"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:Se(I.publishDate)}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Age"})]}),I.protocol==="torrent"?e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium",style:{color:I.seeders>=10?"#22c55e":I.seeders>=1?"#f97316":"#ef4444"},children:[I.seeders," / ",I.leechers]}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Peers"})]}):I.grabs!==void 0?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",style:{color:"var(--text-primary)"},children:I.grabs}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Grabs"})]}):null]}),e.jsx("button",{onClick:()=>Re(I),disabled:j===I.guid,className:"px-4 py-2 font-medium text-sm transition-all disabled:opacity-50 flex items-center gap-2",style:{backgroundColor:"#22c55e",color:"white"},children:j===I.guid?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Grabbing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Grab"]})})]})]})},I.guid))}):e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("thead",{className:"sticky top-0",style:{backgroundColor:"var(--table-header-bg)"},children:e.jsxs("tr",{className:"border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Title"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Quality"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Size"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Age"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Peers"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"},children:"Score"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold uppercase",style:{color:"var(--text-secondary)"}})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:De.map(I=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded",style:{backgroundColor:I.protocol==="usenet"?"#3b82f6":"#f97316",color:"white"},children:I.protocol==="usenet"?"NZB":"Torrent"})}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("div",{className:"max-w-md truncate text-sm",style:{color:"var(--text-primary)"},title:I.title,children:I.title}),e.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:I.indexer})]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded",style:{backgroundColor:Ie(I.quality),color:"white"},children:I.quality})}),e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:Fe(I.size)}),e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:Se(I.publishDate)}),e.jsx("td",{className:"px-3 py-2",children:I.protocol==="torrent"?e.jsxs("span",{style:{color:I.seeders>=10?"#22c55e":I.seeders>=1?"#f97316":"#ef4444"},children:[I.seeders,"/",I.leechers]}):e.jsx("span",{style:{color:"var(--text-muted)"},children:I.grabs||"-"})}),e.jsx("td",{className:"px-3 py-2",children:z?e.jsx("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium",style:{backgroundColor:I.customFormatScore!==void 0&&I.customFormatScore>0?"#059669":I.customFormatScore!==void 0&&I.customFormatScore<0?"#dc2626":"#6b7280",color:"white"},children:I.customFormatScore!==void 0?(I.customFormatScore>0?"+":"")+I.customFormatScore:"0"}):e.jsx("span",{style:{color:"var(--text-muted)"},children:"-"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>Re(I),disabled:j===I.guid,className:"p-2 rounded hover:bg-green-500/20 transition-colors disabled:opacity-50",style:{color:"#22c55e"},title:"Grab release",children:j===I.guid?e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})})]},I.guid))})]})})})})]})}):null}function Bc({isOpen:t,onClose:r,onConfirm:s,title:a,itemName:n,hasFiles:l=!1,showExclusionOption:o=!0,isSeries:c=!1}){const[d,x]=i.useState(!1),[m,u]=i.useState(!1),[f,j]=i.useState(!1);if(!t)return null;const h=async()=>{j(!0),await s(d,m),j(!1),x(!1),u(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Are you sure you want to remove ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:n})," from your library?"]}),l&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 mb-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:p=>x(p.target.checked),className:"mt-1 rounded border-gray-300 dark:border-gray-600 text-red-500 focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c?"Delete all files and folder":"Also delete files"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:c?"Permanently delete all episode files and the series folder from disk. This cannot be undone.":"Permanently delete all downloaded files from disk. This cannot be undone."})]})]})}),o&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 mb-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:p=>u(p.target.checked),className:"mt-1 rounded border-gray-300 dark:border-gray-600 text-primary-500 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Add to exclusion list"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:"Prevent this item from being re-added by import lists in the future."})]})]})}),d&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400",children:[e.jsx("strong",{children:"Warning:"})," This will permanently delete all media files associated with this item."]})]})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,disabled:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:h,disabled:f,className:"px-4 py-2 text-sm font-medium text-white disabled:opacity-50 flex items-center gap-2",style:{backgroundColor:"var(--btn-danger-bg)"},children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):e.jsx(e.Fragment,{children:d?"Delete with Files":"Remove from Library"})})]})]})})}function Ov({type:t,id:r,title:s,onClose:a,onComplete:n}){const[l,o]=i.useState(!0),[c,d]=i.useState(!1),[x,m]=i.useState([]),[u,f]=i.useState(""),[j,h]=i.useState(""),[p,y]=i.useState(null),[v,b]=i.useState(!0),[g,k]=i.useState(null);i.useEffect(()=>{N()},[r,t]);const N=async()=>{var R,se,V,Q,te;try{o(!0),k(null);const J=t==="movie"?await C.previewMovieRename(r):await C.previewSeriesRename(r);m(J.previews||[]),f(J.namingPattern||""),h(t==="movie"?(R=J.movie)==null?void 0:R.folderPath:(se=J.series)==null?void 0:se.folderPath),y(t==="series"?(V=J.series)==null?void 0:V.tvdbId:null)}catch(J){k(((te=(Q=J.response)==null?void 0:Q.data)==null?void 0:te.error)||"Failed to generate rename preview")}finally{o(!1)}},E=R=>{m(se=>se.map(V=>V.id===R?{...V,selected:!V.selected}:V))},F=()=>{const R=!v;b(R),m(se=>se.map(V=>({...V,selected:R})))},_=async()=>{var se,V;const R=x.filter(Q=>Q.selected);if(R.length!==0){d(!0);try{const Q=R.map(te=>({id:te.id,newPath:te.newPath}));t==="movie"?await C.executeMovieRename(r,Q):await C.executeSeriesRename(r,Q),n(),a()}catch(Q){k(((V=(se=Q.response)==null?void 0:se.data)==null?void 0:V.error)||"Failed to rename files")}finally{d(!1)}}},q=x.filter(R=>R.selected).length;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Rename"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-100 dark:border-blue-800 px-4 py-3",children:[e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["All paths are relative to: ",e.jsx("code",{className:"font-mono bg-blue-100 dark:bg-blue-800 px-1 rounded",children:j}),p&&e.jsxs("span",{children:[" ",`{tvdb-${p}}`]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 font-mono",children:["Naming pattern: ",u]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):g?e.jsx("div",{className:"text-center py-12 text-red-500",children:g}):x.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("p",{children:"All files are already named correctly"})]}):e.jsx("div",{className:"space-y-2",children:x.map(R=>e.jsx("div",{className:`border p-3 transition-colors ${R.selected?"border-primary-300 dark:border-primary-600 bg-primary-50 dark:bg-primary-900/10":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("label",{className:"flex items-center mt-1",children:e.jsx("input",{type:"checkbox",checked:R.selected,onChange:()=>E(R.id),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 font-mono",children:""}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 break-all font-mono",children:R.currentFilename})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 font-mono",children:"+"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 break-all font-mono",children:t==="series"&&R.seasonNumber!==void 0?`Season ${String(R.seasonNumber).padStart(2,"0")}/${R.newFilename}`:R.newFilename})]})]})]})},R.id))})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:F,className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Select All (",q," / ",x.length,")"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ee,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(Ee,{onClick:_,disabled:c||q===0,children:c?"Renaming...":"Rename"})]})]})]})})}function ql({currentPath:t,onSelect:r,onClose:s}){const[a,n]=i.useState(t||"/"),[l,o]=i.useState([]),[c,d]=i.useState(null),[x,m]=i.useState(!1),[u,f]=i.useState(null);i.useEffect(()=>{j(a)},[a]);const j=async y=>{var v,b;m(!0),f(null);try{const g=await C.browseFolders(y);o(g.folders||[]),d(g.parentPath),n(g.currentPath)}catch(g){f(((b=(v=g.response)==null?void 0:v.data)==null?void 0:b.error)||"Failed to load folders"),o([])}finally{m(!1)}},h=y=>{n(y)},p=()=>{r(a),s()};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",style:{backgroundColor:"var(--modal-overlay)"},children:e.jsxs("div",{className:"w-full max-w-lg shadow-xl max-h-[80vh] flex flex-col",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Select Folder"}),e.jsx("button",{onClick:s,className:"p-1 rounded transition-colors",style:{color:"var(--text-muted)"},onMouseOver:y=>y.currentTarget.style.backgroundColor="var(--hover-bg)",onMouseOut:y=>y.currentTarget.style.backgroundColor="transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-4 py-2 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--page-bg)"},children:e.jsx("p",{className:"text-sm font-mono truncate",style:{color:"var(--text-secondary)"},children:a})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 min-h-[300px]",style:{backgroundColor:"var(--card-bg)"},children:x?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--navbar-bg)"}})}):u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400 text-sm",children:u}),e.jsx("button",{onClick:()=>j("/"),className:"mt-2 text-sm underline",style:{color:"var(--navbar-bg)"},children:"Go to root"})]}):e.jsxs("div",{className:"space-y-1",children:[c&&e.jsxs("button",{onClick:()=>h(c),className:"w-full flex items-center gap-3 px-3 py-2 transition-colors",style:{color:"var(--text-primary)"},onMouseOver:y=>y.currentTarget.style.backgroundColor="var(--row-hover-bg)",onMouseOut:y=>y.currentTarget.style.backgroundColor="transparent",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})}),e.jsx("span",{children:".."})]}),l.map(y=>e.jsxs("button",{onClick:()=>h(y.path),className:"w-full flex items-center gap-3 px-3 py-2 transition-colors",style:{color:"var(--text-primary)"},onMouseOver:v=>v.currentTarget.style.backgroundColor="var(--row-hover-bg)",onMouseOut:v=>v.currentTarget.style.backgroundColor="transparent",children:[e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"})}),e.jsx("span",{className:"truncate",children:y.name})]},y.path)),l.length===0&&!c&&e.jsx("p",{className:"text-center py-4",style:{color:"var(--text-muted)"},children:"No folders found"})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t",style:{borderColor:"var(--border-color)"},children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm transition-colors",style:{color:"var(--text-primary)",backgroundColor:"var(--btn-secondary-bg)",border:"1px solid var(--btn-secondary-border)"},onMouseOver:y=>y.currentTarget.style.backgroundColor="var(--btn-secondary-hover)",onMouseOut:y=>y.currentTarget.style.backgroundColor="var(--btn-secondary-bg)",children:"Cancel"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm transition-colors",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},onMouseOver:y=>y.currentTarget.style.backgroundColor="var(--btn-primary-hover)",onMouseOut:y=>y.currentTarget.style.backgroundColor="var(--btn-primary-bg)",children:"Select This Folder"})]})]})})}const Wv=[{value:"announced",label:"Announced"},{value:"inCinemas",label:"In Cinemas"},{value:"released",label:"Released"}];function Uv({movie:t,onClose:r,onSave:s,onDelete:a}){const[n,l]=i.useState({monitored:t.monitored,minimum_availability:t.minimum_availability||"announced",quality_profile_id:t.quality_profile_id||"",folder_path:t.folder_path||""}),[o,c]=i.useState([]),[d,x]=i.useState(!1),[m,u]=i.useState(!1);i.useEffect(()=>{f()},[]),i.useEffect(()=>{l({monitored:t.monitored,minimum_availability:t.minimum_availability||"announced",quality_profile_id:t.quality_profile_id||"",folder_path:t.folder_path||""})},[t]);const f=async()=>{try{const y=(await C.getQualityProfiles()).filter(v=>!v.media_type||v.media_type==="both"||v.media_type==="movie");c(y)}catch(p){console.error("Failed to load profiles:",p)}},j=async()=>{u(!0);try{const p={monitored:n.monitored,minimum_availability:n.minimum_availability,quality_profile_id:n.quality_profile_id||void 0,folder_path:n.folder_path||void 0};await C.updateMovie(t.id,p);try{console.log("Triggering scan for movie:",t.id),await C.scanMovie(t.id)}catch(y){console.error("Scan after save failed:",y)}s()}catch(p){console.error("Failed to save movie:",p),alert("Failed to save changes")}finally{u(!1)}},h=()=>{confirm("Are you sure you want to delete this movie?")&&a()};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Edit - ",t.title]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Monitored"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.monitored,onChange:p=>l({...n,monitored:p.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download movie if available"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right flex items-center justify-end gap-1",children:["Minimum Availability",e.jsx("span",{className:"text-gray-400 cursor-help",title:"When should the movie be available for download",children:""})]}),e.jsx("select",{value:n.minimum_availability,onChange:p=>l({...n,minimum_availability:p.target.value}),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:Wv.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Quality Profile"}),e.jsxs("select",{value:n.quality_profile_id,onChange:p=>l({...n,quality_profile_id:p.target.value}),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Select a profile..."}),o.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Path"}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:n.folder_path,onChange:p=>l({...n,folder_path:p.target.value}),placeholder:"/data/media/movies/Movie Name (Year)",className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{onClick:()=>x(!0),className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white ",title:"Browse folders",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),e.jsx("button",{onClick:()=>{alert("Would open folder in file manager")},className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 ",title:"Open folder",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-medium",children:"Delete"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium disabled:opacity-50",children:m?"Saving...":"Save"})]})]})]}),d&&e.jsx(ql,{currentPath:n.folder_path||"/data/media/movies",onSelect:p=>{l({...n,folder_path:p}),x(!1)},onClose:()=>x(!1)})]})}const Vv=[{value:"all",label:"All Seasons"},{value:"current",label:"Current Season Only"},{value:"future",label:"Future Seasons Only"},{value:"none",label:"None"}],Su=[{value:"standard",label:"Standard",description:"Season and episode numbers (S01E05)"},{value:"daily",label:"Daily",description:"Date format (2017-05-25)"},{value:"anime",label:"Anime",description:"Absolute episode numbers"}];function Hv({series:t,onClose:r,onSave:s,onDelete:a}){const[n,l]=i.useState({monitored:t.monitored,monitor_new_seasons:t.monitor_new_seasons||"all",use_season_folder:t.use_season_folder!==!1,quality_profile_id:t.quality_profile_id||"",series_type:t.series_type||"standard",folder_path:t.folder_path||""}),[o,c]=i.useState([]),[d,x]=i.useState(!1),[m,u]=i.useState(!1);i.useEffect(()=>{f()},[]),i.useEffect(()=>{l({monitored:t.monitored,monitor_new_seasons:t.monitor_new_seasons||"all",use_season_folder:t.use_season_folder!==!1,quality_profile_id:t.quality_profile_id||"",series_type:t.series_type||"standard",folder_path:t.folder_path||""})},[t]);const f=async()=>{try{const v=(await C.getQualityProfiles()).filter(b=>!b.media_type||b.media_type==="both"||b.media_type==="series");c(v)}catch(y){console.error("Failed to load profiles:",y)}},j=async()=>{u(!0);try{const y={monitored:n.monitored,monitor_new_seasons:n.monitor_new_seasons,use_season_folder:n.use_season_folder,quality_profile_id:n.quality_profile_id||void 0,series_type:n.series_type,folder_path:n.folder_path||void 0};await C.updateSeries(t.id,y);try{console.log("Triggering scan for series:",t.id),await C.scanSeries(t.id)}catch(v){console.error("Scan after save failed:",v)}s()}catch(y){console.error("Failed to save series:",y),alert("Failed to save changes")}finally{u(!1)}},h=()=>{confirm("Are you sure you want to delete this series?")&&a()},p=Su.find(y=>y.value===n.series_type);return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Edit - ",t.title]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Monitored"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.monitored,onChange:y=>l({...n,monitored:y.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download monitored episodes in this series"})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right pt-2 flex items-center justify-end gap-1",children:["Monitor Seasons",e.jsx("span",{className:"text-gray-400 cursor-help",title:"Which seasons should be monitored",children:""})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("select",{value:n.monitor_new_seasons,onChange:y=>l({...n,monitor_new_seasons:y.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:Vv.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Which seasons should be monitored for download"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Use Season Folder"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.use_season_folder,onChange:y=>l({...n,use_season_folder:y.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort episodes into season folders"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Quality Profile"}),e.jsxs("select",{value:n.quality_profile_id,onChange:y=>l({...n,quality_profile_id:y.target.value}),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Select a profile..."}),o.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right pt-2",children:"Series Type"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:n.series_type,onChange:y=>l({...n,series_type:y.target.value}),className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:Su.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))}),e.jsx("span",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 whitespace-nowrap",children:p==null?void 0:p.description})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Series type is used for renaming, parsing and searching"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"w-48 text-sm font-medium text-gray-700 dark:text-gray-300 text-right",children:"Path"}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:n.folder_path,onChange:y=>l({...n,folder_path:y.target.value}),placeholder:"/data/media/tv/Series Name (Year) {tvdb-123456}",className:"flex-1 px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{onClick:()=>x(!0),className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white ",title:"Browse folders",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),e.jsx("button",{onClick:()=>{alert("Would open folder in file manager")},className:"px-3 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 ",title:"Open folder",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-medium",children:"Delete"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:m,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium disabled:opacity-50",children:m?"Saving...":"Save"})]})]})]}),d&&e.jsx(ql,{currentPath:n.folder_path||"/data/media/tv",onSelect:y=>{l({...n,folder_path:y}),x(!1)},onClose:()=>x(!1)})]})}function $e({label:t,error:r,className:s="",...a}){return e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t}),e.jsx("input",{className:`w-full px-3 py-2 border focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 ${r?"border-red-500":"border-gray-300 dark:border-gray-600"} ${s}`,...a}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]})}function qv({movie:t,onClose:r,onSave:s}){var N;const[a,n]=i.useState(t.title),[l,o]=i.useState(((N=t.year)==null?void 0:N.toString())||""),[c,d]=i.useState(!1),[x,m]=i.useState([]),[u,f]=i.useState(null),[j,h]=i.useState(!1),[p,y]=i.useState(null),v=/^\d+$/.test(a.trim()),b=async()=>{var E;if(a.trim()){d(!0),y(null);try{const F=v?void 0:l?parseInt(l):void 0,_=await C.searchMovies(a.trim(),F);m(_.results||[]),((E=_.results)==null?void 0:E.length)===0&&y(v?"No movie found with that TMDB ID.":"No results found. Try different search terms or enter a TMDB ID.")}catch(F){console.error("Search failed:",F),y("Search failed. Please try again.")}finally{d(!1)}}},g=async()=>{if(u){h(!0),y(null);try{await C.fixMovieMatch(t.id,u.id),s()}catch(E){console.error("Failed to fix match:",E),y("Failed to update match. Please try again.")}finally{h(!1)}}},k=E=>E.year?E.year:E.release_date?new Date(E.release_date).getFullYear():null;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Fix Match"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Currently matched to: ",e.jsxs("span",{className:"font-medium",children:[t.title," (",t.year,")"]})," - TMDB ID: ",t.tmdb_id]})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx($e,{value:a,onChange:E=>n(E.target.value),placeholder:"Movie title or TMDB ID...",onKeyDown:E=>E.key==="Enter"&&b()}),v&&e.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Searching by TMDB ID (year filter ignored)"})]}),e.jsx("div",{className:"w-24",children:e.jsx($e,{value:l,onChange:E=>o(E.target.value),placeholder:"Year",type:"number",disabled:v})}),e.jsx(Ee,{onClick:b,disabled:c||!a.trim(),children:c?"Searching...":"Search"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[p&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-sm",children:p}),x.length>0?e.jsx("div",{className:"space-y-2",children:x.map(E=>e.jsxs("div",{onClick:()=>f(E),className:`flex gap-4 p-3 cursor-pointer transition-colors ${(u==null?void 0:u.id)===E.id?"bg-primary-100 dark:bg-primary-900/30 ring-2 ring-primary-500":"bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("div",{className:"w-16 h-24 bg-gray-200 dark:bg-gray-600 rounded overflow-hidden flex-shrink-0",children:E.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w154${E.poster_path}`,alt:E.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:[E.title,k(E)&&e.jsxs("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:["(",k(E),")"]})]}),e.jsxs("span",{className:"text-xs text-gray-400 flex-shrink-0",children:["TMDB: ",E.id]})]}),E.overview&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:E.overview}),(u==null?void 0:u.id)===E.id&&e.jsx("span",{className:"mt-2 inline-block px-2 py-0.5 bg-primary-500 text-white text-xs rounded",children:"Selected"})]})]},E.id))}):!c&&!p&&e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Search for the correct movie above"})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx(Ee,{variant:"secondary",onClick:r,disabled:j,children:"Cancel"}),e.jsx(Ee,{onClick:g,disabled:!u||j,children:j?"Saving...":"Apply Match"})]})]})})}function Qv({isOpen:t,onClose:r,mediaType:s,mediaId:a,mediaTitle:n,seasons:l=[],onSuccess:o}){const[c,d]=i.useState("/data"),[x,m]=i.useState(null),[u,f]=i.useState(!1),[j,h]=i.useState(null),[p,y]=i.useState(null),[v,b]=i.useState(!1),[g,k]=i.useState(!1),[N,E]=i.useState(null),[F,_]=i.useState(null);i.useEffect(()=>{t&&q("/data")},[t]);const q=async V=>{var Q,te;f(!0),h(null),y(null);try{const J=await C.browseFiles(V);m(J),d(V)}catch(J){h(((te=(Q=J.response)==null?void 0:Q.data)==null?void 0:te.error)||J.message||"Failed to browse directory")}finally{f(!1)}},R=async()=>{var V,Q;if(p){if(s==="tv"&&(N===null||F===null)){h("Please select season and episode number");return}b(!0),h(null);try{s==="movie"?await C.manualImportMovie(a,p.path,g):await C.manualImportEpisode(a,p.path,N,F,g),o==null||o(),r()}catch(te){h(((Q=(V=te.response)==null?void 0:V.data)==null?void 0:Q.error)||te.message||"Import failed")}finally{b(!1)}}},se=V=>{if(V===0)return"";const Q=["B","KB","MB","GB","TB"],te=Math.floor(Math.log(V)/Math.log(1024));return`${(V/Math.pow(1024,te)).toFixed(1)} ${Q[te]}`};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Manual Import - ",n]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Browse and select a file to import"})]}),e.jsxs("div",{className:"px-6 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm",children:[e.jsx("button",{onClick:()=>q("/data"),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"/data"}),c!=="/data"&&c.replace("/data","").split("/").filter(Boolean).map((V,Q,te)=>{const J="/data/"+te.slice(0,Q+1).join("/");return e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("button",{onClick:()=>q(J),className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 truncate max-w-[150px]",title:V,children:V})]},J)})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):j?e.jsx("div",{className:"text-center py-8 text-red-500",children:j}):x?e.jsxs("div",{className:"space-y-1",children:[x.parent&&e.jsxs("button",{onClick:()=>q(x.parent),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-left",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:".."})]}),x.items.map(V=>e.jsxs("button",{onClick:()=>{V.isDirectory?q(V.path):V.isVideo&&y(V)},className:`w-full flex items-center gap-3 px-3 py-2 rounded text-left transition-colors ${(p==null?void 0:p.path)===V.path?"bg-primary-100 dark:bg-primary-900/30 ring-2 ring-primary-500":V.isVideo||V.isDirectory?"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":"opacity-50 cursor-not-allowed"}`,disabled:!V.isDirectory&&!V.isVideo,children:[V.isDirectory?e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"})}):V.isVideo?e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})}):e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"})}),e.jsx("span",{className:`flex-1 truncate ${V.isVideo?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:V.name}),V.isFile&&V.size>0&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:se(V.size)}),V.isDirectory&&V.videoCount>0&&e.jsxs("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 px-2 py-0.5 rounded",children:[V.videoCount," video",V.videoCount!==1?"s":""]})]},V.path)),x.items.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No files found in this directory"})]}):null}),p&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["Selected: ",p.name]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:p.path})]}),s==="tv"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Season"}),e.jsxs("select",{value:N??"",onChange:V=>E(V.target.value?parseInt(V.target.value):null),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded",children:[e.jsx("option",{value:"",children:"Select Season"}),l.map(V=>e.jsxs("option",{value:V.season_number,children:["Season ",V.season_number]},V.season_number)),[...Array(20)].map((V,Q)=>{const te=Q+1;return l.find(J=>J.season_number===te)?null:e.jsxs("option",{value:te,children:["Season ",te]},te)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Episode"}),e.jsx("input",{type:"number",min:"1",value:F??"",onChange:V=>_(V.target.value?parseInt(V.target.value):null),placeholder:"Episode #",className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:V=>k(V.target.checked),className:"rounded border-gray-300 text-primary-600"}),"Move file (delete source after import)"]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:!p||v||s==="tv"&&(N===null||F===null),className:"px-4 py-2 text-sm font-medium bg-primary-600 text-white hover:bg-primary-700 rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import"]})})]})]})}):null}function _n(){var xe,He;const{id:t}=Pc(),r=Zt(),s=yt(),{addToast:a}=vr(),{formatDate:n,formatTime:l}=rs(),{settings:o}=br(),c=r.pathname.startsWith("/discover/"),d=r.pathname.includes("/movie")?"movie":"tv",x=c?parseInt(t||"0"):null,[m,u]=i.useState(null),[f,j]=i.useState(null),[h,p]=i.useState([]),[y,v]=i.useState([]),[b,g]=i.useState([]),[k,N]=i.useState(!0),[E,F]=i.useState(!1),[_,q]=i.useState(null),[R,se]=i.useState([]),[V,Q]=i.useState([]),[te,J]=i.useState([]),[ce,$]=i.useState([]),[U,X]=i.useState(null),[T,z]=i.useState("files"),[G,Z]=i.useState(new Set),[de,ye]=i.useState(!1),[je,Le]=i.useState(null),[fe,Ne]=i.useState(!1),[ie,_e]=i.useState(!1),[K,Fe]=i.useState(!1),[Se,Re]=i.useState(!1),[Ie,Oe]=i.useState(!1),[De,I]=i.useState(!1),[Ce,Te]=i.useState(null),[Pe,Ae]=i.useState(null),[O,ve]=i.useState(!1);i.useEffect(()=>{N(!0),u(null),j(null),p([]),v([]),g([]),Q([]),J([]),se([]),$([]),F(!1),q(null),X(null),z("files"),Z(new Set),W()},[t,c,d]),i.useEffect(()=>{if(T!=="history"||!_)return;const B=setInterval(ue,1e4);return()=>clearInterval(B)},[T,_]);const W=async()=>{N(!0);try{c&&x?await he(x):t&&await me(t)}catch(B){console.error("Failed to load media:",B)}finally{N(!1)}},he=async B=>{var ae,ke,M,oe,le,be,we,Qe;try{const Be=d==="movie"?await C.getMovieDetails(B):await C.getTVDetails(B);if(j(Be),u({tmdb_id:B,title:Be.title||Be.name,year:Be.release_date?new Date(Be.release_date).getFullYear():Be.first_air_date?new Date(Be.first_air_date).getFullYear():null,overview:Be.overview,runtime:Be.runtime||((ae=Be.episode_run_time)==null?void 0:ae[0]),vote_average:Be.vote_average,vote_count:Be.vote_count,poster_path:Be.poster_path,backdrop_path:Be.backdrop_path,genres:Be.genres,status:Be.status,network:(M=(ke=Be.networks)==null?void 0:ke[0])==null?void 0:M.name,origin_country:((oe=Be.origin_country)==null?void 0:oe[0])||((be=(le=Be.production_countries)==null?void 0:le[0])==null?void 0:be.iso_3166_1)}),Be.credits&&p(((we=Be.credits.cast)==null?void 0:we.slice(0,12))||[]),d==="tv"&&Be.seasons){const ss=await Promise.all(Be.seasons.filter(ze=>ze.season_number>0).map(async ze=>{try{const it=await C.getSeasonDetails(B,ze.season_number);return{...ze,episodes:it.episodes||[]}}catch{return{...ze,episodes:[]}}}));J(ss)}const ur=d==="movie"?await C.getSimilarMovies(B):await C.getSimilarTV(B);v(((Qe=ur==null?void 0:ur.results)==null?void 0:Qe.slice(0,10))||[]),await D(B)}catch(Be){console.error("Failed to load TMDB data:",Be)}},me=async B=>{var ae,ke;try{const M=d==="movie"?await C.getMovieById(B):await C.getSeriesById(B);if(u(M),F(!0),q(B),M.quality_profile_id)try{const le=(await C.getQualityProfiles()).find(be=>be.id===M.quality_profile_id);le&&X(le.name)}catch{}try{const oe=d==="movie"?await C.getRelatedMovies(B,10):await C.getRelatedSeries(B,10);g((oe==null?void 0:oe.related)||[])}catch(oe){console.warn("Failed to load related media:",oe)}if(M.tmdb_id){const oe=d==="movie"?await C.getMovieDetails(M.tmdb_id):await C.getTVDetails(M.tmdb_id);j(oe),oe!=null&&oe.credits&&p(((ae=oe.credits.cast)==null?void 0:ae.slice(0,12))||[]);const le=d==="movie"?await C.getSimilarMovies(M.tmdb_id):await C.getSimilarTV(M.tmdb_id);v(((ke=le==null?void 0:le.results)==null?void 0:ke.slice(0,10))||[])}if(d==="movie"){const oe=await C.getMovieFiles(B);se(oe)}else{const oe=await C.getSeasons(B),le=await Promise.all(oe.map(async be=>{const we=await C.getEpisodes(B,be.season_number);return{...be,episodes:we}}));Q(le)}await ue(B)}catch(M){console.error("Failed to load library data:",M)}},D=async B=>{try{if(d==="movie"){const ke=(await C.getMovies()).items.find(M=>M.tmdb_id===B);ke&&(F(!0),q(ke.id))}else{const ke=(await C.getSeries()).items.find(M=>M.tmdb_id===B);ke&&(F(!0),q(ke.id))}}catch(ae){console.error("Failed to check library status:",ae)}},ue=async B=>{const ae=B||_;if(ae)try{const ke=d==="movie"?await C.getMovieActivity(ae,20):await C.getSeriesActivity(ae,50);$(ke)}catch(ke){console.error("Failed to load activity:",ke)}},ge=B=>{if(!B)return null;const ae=Math.floor(B/60),ke=B%60;return ae>0?`${ae}h ${ke}m`:`${ke}m`},H=B=>B?`${(B/(1024*1024*1024)).toFixed(2)} GB`:"N/A",re=B=>{if(!B)return[];if(Array.isArray(B))return B;if(typeof B=="string"){try{const ae=JSON.parse(B);if(Array.isArray(ae))return ae;if(typeof ae=="string")B=ae;else return[String(B)]}catch{}return B.includes(",")?B.split(",").map(ae=>ae.trim()).filter(ae=>ae):[B]}return[]},P=()=>{Le(null),ye(!0)},L=async()=>{if(_){ve(!0);try{try{d==="movie"?await C.refreshMovieMetadata(_):await C.refreshSeriesMetadata(_)}catch(ae){console.warn("Failed to refresh metadata:",ae)}const B=d==="movie"?await C.scanMovie(_):await C.scanSeries(_);B.found>0||B.matched>0?a({type:"success",message:`Refreshed metadata and found ${B.found||B.matched} file(s)`}):a({type:"success",message:"Metadata refreshed"}),W()}catch{a({type:"error",message:"Failed to refresh"})}finally{ve(!1)}}},S=async(B,ae)=>{if(_)try{d==="movie"?(await C.deleteMovie(_,B,ae),s("/movies")):(await C.deleteSeries(_,B,ae),s("/series"))}catch{a({type:"error",message:"Failed to delete"})}},Y=B=>{F(!0),q(B),a({type:"success",message:"Added to library"}),s(`/${d==="movie"?"movies":"series"}/${B}`)},w=B=>{const ae=new Set(G);ae.has(B)?ae.delete(B):ae.add(B),Z(ae)},A=()=>m!=null&&m.vote_average?Math.round(m.vote_average*10):0;if(k)return e.jsx(at,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:"var(--navbar-bg)"}})})});if(!m)return e.jsx(at,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--text-primary)"},children:"Not found"}),e.jsx("button",{onClick:()=>s(-1),className:"mt-4 hover:underline",style:{color:"var(--navbar-bg)"},children:"Go back"})]})});const ne=A();return e.jsxs(at,{children:[e.jsxs("div",{className:"-mx-6 -mt-6",children:[e.jsxs("div",{className:"relative h-32 md:h-52 lg:h-60 overflow-hidden",children:[m.backdrop_path?e.jsx("img",{src:Kt(m.backdrop_path,"w1280")||"",alt:"",className:"absolute inset-0 w-full h-full object-cover blur-[2px] scale-105"}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gray-800"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-black/60 to-black/80"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"hidden md:block absolute bottom-0 left-0 right-0 px-6 pb-4 pl-56 lg:pl-64",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[E&&e.jsx("button",{onClick:async()=>{try{const B=!m.monitored;d==="movie"?await C.updateMovie(_,{monitored:B}):(await C.updateSeries(_,{monitored:B}),Q(ae=>ae.map(ke=>{var M;return{...ke,monitored:B,episodes:(M=ke.episodes)==null?void 0:M.map(oe=>({...oe,monitored:B}))}}))),u(ae=>ae&&{...ae,monitored:B}),a({type:"success",message:B?"Now monitoring":"Unmonitored"})}catch{a({type:"error",message:"Failed to update"})}},className:"mt-2 flex-shrink-0",title:m.monitored?"Click to unmonitor":"Click to monitor",children:e.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",style:{color:m.monitored?"var(--navbar-bg)":"var(--text-muted)"},children:e.jsx("path",{d:"M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1z"})})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline gap-1 md:gap-2",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold drop-shadow-lg",style:{color:"#ffffff"},children:m.title}),m.year&&e.jsxs("span",{className:"text-lg lg:text-xl",style:{color:"rgba(255,255,255,0.7)"},children:["(",m.year,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm mb-2",style:{color:"rgba(255,255,255,0.9)"},children:[(f==null?void 0:f.certification)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium border border-white/50",children:f.certification}),m.runtime&&e.jsx("span",{children:ge(m.runtime)}),d==="tv"&&m.season_count&&e.jsxs("span",{children:[m.season_count," Season",m.season_count!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d==="tv"&&m.status&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${m.status==="Continuing"||m.status==="Returning Series"?"bg-green-500/80":m.status==="Ended"?"bg-red-500/80":m.status==="Canceled"?"bg-orange-500/80":"bg-gray-500/80"}`,style:{color:"#ffffff"},children:m.status}),(f==null?void 0:f.original_language)&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-600/80",style:{color:"#ffffff"},children:f.original_language==="en"?"English":f.original_language.toUpperCase()}),(xe=f==null?void 0:f.genres)==null?void 0:xe.slice(0,4).map(B=>e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-600/80",style:{color:"#ffffff"},children:B.name},B.id))]}),E&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[d==="movie"&&m.minimum_availability&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-purple-500/80",style:{color:"#ffffff"},children:m.minimum_availability==="announced"?"Announced":m.minimum_availability==="inCinemas"?"In Cinemas":m.minimum_availability==="released"?"Released":m.minimum_availability==="preDB"?"PreDB":m.minimum_availability}),U&&e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-500/80",style:{color:"#ffffff"},children:U}),d==="movie"&&(m.has_file?e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-500/80",style:{color:"#ffffff"},children:"Downloaded"}):e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-500/80",style:{color:"#ffffff"},children:"Missing"}))]})]})]}),e.jsx("div",{className:"relative px-4 md:px-6",style:{backgroundColor:"var(--background)"},children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[e.jsxs("div",{className:"hidden md:block w-44 lg:w-52 flex-shrink-0 -mt-32 lg:-mt-36 z-10 space-y-4",children:[m.poster_path?e.jsx("img",{src:Kt(m.poster_path,"w342")||"",alt:m.title,className:"w-full rounded-lg shadow-2xl"}):e.jsx("div",{className:"w-full aspect-[2/3] bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-[#01b4e4] rounded-lg px-3 py-2",children:[e.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",alt:"TMDB",className:"w-8 h-8 flex-shrink-0"}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsxs("span",{className:"text-xl font-bold text-white",children:[ne,"%"]}),m.vote_count&&e.jsxs("span",{className:"text-xs text-white/80",children:[m.vote_count.toLocaleString()," votes"]})]})]}),(f==null?void 0:f.imdb_rating)&&e.jsxs("div",{className:"flex items-center gap-3 bg-[#f5c518] rounded-lg px-3 py-2",children:[e.jsxs("svg",{className:"w-12 h-6 flex-shrink-0",viewBox:"0 0 575.6 289.6",fill:"#000",children:[e.jsx("path",{d:"M25.6 0h523.5c14.1 0 25.6 11.5 25.6 25.6v238.4c0 14.1-11.5 25.6-25.6 25.6H25.6C11.5 289.6 0 278.1 0 264V25.6C0 11.5 11.5 0 25.6 0z"}),e.jsx("path",{fill:"#f5c518",d:"M69.5 58.1h36.1v173.4H69.5z"}),e.jsx("path",{fill:"#f5c518",d:"M201.6 58.1h-50.1l-5.8 67.2-8.9-67.2h-47.3v173.4h32.2V119.6l14.3 111.9h27.1l13.6-114.1v114h24.9V58.1z"}),e.jsx("path",{fill:"#f5c518",d:"M290.3 97.3c-2.7-11.7-8.4-21.9-25.2-21.9h-40.6v173.4h40.6c16.7 0 22.4-10.2 25.2-21.9 2.7-11.7 3.2-29.2 3.2-64.8s-.5-53.1-3.2-64.8zm-29.7 106.9c0 14.3-.6 21.9-2.3 24.2-1.7 2.2-4 3.3-6.8 3.3h-2.6V93.1h2.6c2.8 0 5.1 1.1 6.8 3.3 1.7 2.2 2.3 9.9 2.3 24.2v83.6z"}),e.jsx("path",{fill:"#f5c518",d:"M404.2 109.6c-4.6-25.5-15.9-34.2-42.7-34.2-33.9 0-44.3 14.2-44.3 59.3v66.3c0 41.9 8.9 56.2 42.7 56.2 33.9 0 44.3-14.2 44.3-59.3v-22.6h-35v26.1c0 16.9-.7 25.5-9.3 25.5s-8.7-8.7-8.7-25.5v-75.6c0-16.9.2-25.5 8.7-25.5 8.5 0 9.2 8.7 9.2 25.5v10.9h35.1v-27.1z"})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-xl font-bold text-black",children:f.imdb_rating.toFixed(1)}),f.imdb_votes&&e.jsxs("span",{className:"text-xs text-black/70",children:[f.imdb_votes," votes"]})]})]})]}),!E&&e.jsx("button",{onClick:()=>Re(!0),className:"w-full py-2.5 px-4 rounded-lg text-sm font-medium",style:{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"},children:"+ Add to Library"}),(o.showCast??!0)&&h.length>0&&e.jsxs("div",{className:"rounded-lg overflow-hidden",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"px-3 py-2.5 border-b flex items-center justify-between",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:"var(--text-primary)"},children:"Cast"}),e.jsx("button",{onClick:()=>s(`/${d}/${m.tmdb_id}/cast-crew`),className:"text-xs font-medium",style:{color:"var(--navbar-bg)"},children:"Show all "})]}),e.jsx("div",{className:"p-2 space-y-2",children:h.slice(0,8).map(B=>e.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-1 -m-1 transition-colors",onClick:()=>s(`/person/${B.id}`),children:[B.profile_path?e.jsx("img",{src:Kt(B.profile_path,"w92")||"",alt:B.name,className:"w-14 h-14 rounded-full object-cover flex-shrink-0"}):e.jsx("div",{className:"w-14 h-14 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:B.name.charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:B.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:B.character})]})]},B.id))})]})]}),e.jsx("div",{className:"md:hidden -mt-12 z-10 space-y-3",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"w-28 flex-shrink-0 space-y-2",children:[m.poster_path?e.jsx("img",{src:Kt(m.poster_path,"w185")||"",alt:m.title,className:"w-full rounded-lg shadow-xl"}):e.jsx("div",{className:"w-full aspect-[2/3] bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),!E&&e.jsx("button",{onClick:()=>Re(!0),className:"w-full py-2 px-2 rounded text-xs font-medium",style:{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"},children:"+ Add to Library"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[E&&e.jsx("button",{onClick:async()=>{try{const B=!m.monitored;d==="movie"?await C.updateMovie(_,{monitored:B}):(await C.updateSeries(_,{monitored:B}),Q(ae=>ae.map(ke=>{var M;return{...ke,monitored:B,episodes:(M=ke.episodes)==null?void 0:M.map(oe=>({...oe,monitored:B}))}}))),u(ae=>ae&&{...ae,monitored:B}),a({type:"success",message:B?"Now monitoring":"Unmonitored"})}catch{a({type:"error",message:"Failed to update"})}},className:"flex-shrink-0 mt-0.5",title:m.monitored?"Click to unmonitor":"Click to monitor",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",style:{color:m.monitored?"var(--navbar-bg)":"var(--text-muted)"},children:e.jsx("path",{d:"M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold leading-tight",style:{color:"var(--text-primary)"},children:m.title}),m.year&&e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:["(",m.year,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[(f==null?void 0:f.certification)&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{borderColor:"var(--border-color)"},children:f.certification}),m.runtime&&e.jsx("span",{children:ge(m.runtime)}),d==="tv"&&m.season_count&&e.jsxs("span",{children:[m.season_count," Season",m.season_count!==1?"s":""]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:(He=f==null?void 0:f.genres)==null?void 0:He.slice(0,3).map(B=>e.jsx("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:"var(--card-bg)",color:"var(--text-secondary)"},children:B.name},B.id))}),E&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[U&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-indigo-500/80 text-white",children:U}),d==="movie"&&(m.has_file?e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-500/80 text-white",children:"Downloaded"}):e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-500/80 text-white",children:"Missing"})),d==="tv"&&m.status&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${m.status==="Continuing"||m.status==="Returning Series"?"bg-green-500/80":m.status==="Ended"?"bg-red-500/80":"bg-gray-500/80"} text-white`,children:m.status})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#01b4e4] rounded px-2 py-1 w-fit",children:[e.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg",alt:"TMDB",className:"w-5 h-5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[ne,"%"]}),m.vote_count&&e.jsx("span",{className:"text-xs text-white/80",children:m.vote_count.toLocaleString()})]})]})]})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-3 md:pt-4 pb-6",children:[e.jsxs("div",{className:"rounded-lg p-4 mb-4",style:{backgroundColor:"var(--card-bg)"},children:[(f==null?void 0:f.tagline)&&e.jsxs("p",{className:"text-sm italic mb-3",style:{color:"var(--text-muted)"},children:['"',f.tagline,'"']}),e.jsx("h3",{className:"text-sm font-semibold mb-2",style:{color:"var(--text-muted)"},children:"Synopsis"}),e.jsx("p",{className:"text-sm leading-relaxed",style:{color:"var(--text-secondary)"},children:m.overview||"No synopsis available."})]}),!E&&d==="tv"&&te.length>0&&e.jsxs("div",{className:"rounded-lg overflow-hidden mb-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)"},children:e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Seasons & Episodes"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:te.sort((B,ae)=>ae.season_number-B.season_number).map(B=>{var ae;return e.jsxs("div",{className:"border rounded",style:{borderColor:"var(--border-color)"},children:[e.jsxs("button",{onClick:()=>w(B.season_number),className:"w-full px-4 py-3 flex items-center justify-between",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:["Season ",B.season_number]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[B.episode_count||((ae=B.episodes)==null?void 0:ae.length)||0," episodes"]})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${G.has(B.season_number)?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--text-secondary)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),G.has(B.season_number)&&B.episodes&&e.jsxs("div",{className:"border-t",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"px-3 md:px-4 py-1.5 flex items-center gap-2 md:gap-3 border-b text-xs font-medium",style:{borderColor:"var(--border-color)",color:"var(--text-muted)",backgroundColor:"var(--card-bg)"},children:[e.jsx("span",{className:"w-6 md:w-8 text-center flex-shrink-0",children:"#"}),e.jsx("span",{className:"w-16 md:w-24 flex-shrink-0",children:"Air Date"}),e.jsx("span",{className:"flex-1",children:"Title"}),e.jsx("span",{className:"hidden md:block w-12 flex-shrink-0 text-right",children:"Runtime"}),e.jsx("span",{className:"hidden md:block w-12 flex-shrink-0 text-right",children:"Rating"})]}),[...B.episodes].sort((ke,M)=>{if(!ke.air_date&&!M.air_date)return M.episode_number-ke.episode_number;if(!ke.air_date)return 1;if(!M.air_date)return-1;const oe=new Date(ke.air_date).getTime(),le=new Date(M.air_date).getTime();return oe===le?M.episode_number-ke.episode_number:le-oe}).map(ke=>e.jsxs("div",{className:"px-3 md:px-4 py-2 flex items-center gap-2 md:gap-3 border-b last:border-b-0",style:{borderColor:"var(--border-color)"},children:[e.jsx("span",{className:"w-6 md:w-8 text-center text-sm flex-shrink-0",style:{color:"var(--text-secondary)"},children:ke.episode_number}),e.jsx("span",{className:"w-16 md:w-24 text-xs flex-shrink-0",style:{color:"var(--text-muted)"},children:ke.air_date?n(ke.air_date):""}),e.jsx("span",{className:"text-sm flex-1 truncate",style:{color:"var(--text-primary)"},children:ke.name}),e.jsx("span",{className:"hidden md:block w-12 text-xs flex-shrink-0 text-right",style:{color:"var(--text-muted)"},children:ke.runtime?`${ke.runtime}m`:""}),e.jsx("span",{className:"hidden md:flex w-12 text-xs flex-shrink-0 text-right items-center justify-end gap-0.5",style:{color:"var(--text-muted)"},children:ke.vote_average>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#f5c518"},children:""}),ke.vote_average.toFixed(1)]}):""})]},ke.id))]})]},B.id)})})})]}),E&&e.jsxs("div",{className:"rounded-lg overflow-hidden mb-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"px-3 md:px-4 py-2 md:py-2.5 border-b flex items-center justify-between flex-wrap gap-2",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsxs("button",{onClick:P,className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5",style:{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs("button",{onClick:()=>I(!0),className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 border",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},title:"Manual Import",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:"Import"})]}),d==="movie"&&e.jsxs("button",{onClick:()=>Oe(!0),className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 border",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),e.jsx("span",{className:"hidden sm:inline",children:"Fix Match"})]}),e.jsxs("button",{onClick:L,disabled:O,className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 border",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("svg",{className:`w-4 h-4 ${O?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[(R.length>0||V.some(B=>{var ae;return(ae=B.episodes)==null?void 0:ae.some(ke=>ke.has_file)}))&&e.jsxs("button",{onClick:()=>_e(!0),className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 border",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Rename"})]}),e.jsxs("button",{onClick:()=>Fe(!0),className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 border",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("span",{className:"hidden sm:inline",children:"Edit"}),e.jsx("svg",{className:"w-4 h-4 sm:hidden",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})]}),e.jsxs("button",{onClick:()=>Ne(!0),className:"px-2 md:px-3 py-1.5 text-sm font-medium rounded flex items-center gap-1.5 text-red-500 border border-red-300",children:[e.jsx("span",{className:"hidden sm:inline",children:"Delete"}),e.jsx("svg",{className:"w-4 h-4 sm:hidden",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})]})]})]}),e.jsx("div",{className:"border-b",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>z("files"),className:"px-6 py-3 text-sm font-medium border-b-2",style:{color:T==="files"?"var(--navbar-bg)":"var(--text-secondary)",borderColor:T==="files"?"var(--navbar-bg)":"transparent"},children:d==="movie"?"Files":"Seasons & Episodes"}),e.jsx("button",{onClick:()=>z("history"),className:"px-6 py-3 text-sm font-medium border-b-2",style:{color:T==="history"?"var(--navbar-bg)":"var(--text-secondary)",borderColor:T==="history"?"var(--navbar-bg)":"transparent"},children:"History"})]})}),e.jsxs("div",{className:"p-4",children:[T==="files"&&d==="movie"&&(R.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"text-left py-2 px-3 font-medium",style:{color:"var(--text-muted)"},children:"Filename"}),e.jsx("th",{className:"text-center py-2 px-3 font-medium",style:{color:"var(--text-muted)"},children:"Info"}),e.jsx("th",{className:"text-center py-2 px-3 font-medium",style:{color:"var(--text-muted)"},children:"Size"}),e.jsx("th",{className:"w-10"})]})}),e.jsx("tbody",{children:R.map(B=>{var ae;return e.jsxs("tr",{className:"border-b last:border-b-0",style:{borderColor:"var(--border-color)"},children:[e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:"font-mono text-xs",style:{color:"var(--text-primary)"},children:((ae=B.path)==null?void 0:ae.split("/").pop())||B.relative_path||"Unknown"})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[B.quality&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded",style:{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"},children:B.quality}),B.video_codec&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-blue-900/30 text-blue-400",children:B.video_codec}),B.audio_codec&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-900/30 text-purple-400",children:B.audio_codec}),B.audio_channels&&e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:[B.audio_channels,"ch"]}),re(B.audio_languages).length>1&&e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 cursor-help",title:re(B.audio_languages).map(ke=>ke.toUpperCase()).join(", "),children:["Multi-Audio (",re(B.audio_languages).length,")"]}),re(B.subtitle_languages).length>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 cursor-help",title:re(B.subtitle_languages).map(ke=>ke.toUpperCase()).join(", "),children:[re(B.subtitle_languages).length," Subs"]})]})}),e.jsx("td",{className:"py-3 px-3 text-center text-xs",style:{color:"var(--text-secondary)"},children:B.file_size?H(B.file_size):"N/A"}),e.jsx("td",{className:"py-3 px-3 text-right",children:e.jsx("button",{onClick:()=>Te(B.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},B.id)})})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"No files found"})})),T==="files"&&d==="tv"&&e.jsx("div",{className:"space-y-2",children:V.filter(B=>B.season_number>0).sort((B,ae)=>ae.season_number-B.season_number).map(B=>{var ae,ke;return e.jsxs("div",{className:"border rounded",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"w-full px-4 py-3 flex items-center justify-between cursor-pointer",style:{backgroundColor:"var(--surface-bg)"},onClick:()=>w(B.season_number),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async M=>{M.stopPropagation();try{const oe=!B.monitored;await C.updateSeason(_,B.season_number,{monitored:oe});const le=V.map(we=>{var Qe;return we.id===B.id?{...we,monitored:oe,episodes:(Qe=we.episodes)==null?void 0:Qe.map(Be=>({...Be,monitored:oe}))}:we});Q(le),le.filter(we=>we.season_number>0).every(we=>!we.monitored)&&m.monitored&&(await C.updateSeries(_,{monitored:!1}),u(we=>we&&{...we,monitored:!1})),oe&&!m.monitored&&(await C.updateSeries(_,{monitored:!0}),u(we=>we&&{...we,monitored:!0})),a({type:"success",message:oe?"Season now monitoring":"Season unmonitored"})}catch{a({type:"error",message:"Failed to update season"})}},className:"flex-shrink-0",title:B.monitored?"Click to unmonitor":"Click to monitor",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",style:{color:B.monitored?"var(--navbar-bg)":"var(--text-muted)"},children:e.jsx("path",{d:"M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1z"})})}),e.jsxs("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:["Season ",B.season_number]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[((ae=B.episodes)==null?void 0:ae.filter(M=>M.has_file).length)||0,"/",((ke=B.episodes)==null?void 0:ke.length)||0," episodes"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("svg",{className:`w-5 h-5 transition-transform ${G.has(B.season_number)?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",style:{color:"var(--text-secondary)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),G.has(B.season_number)&&B.episodes&&e.jsxs("div",{className:"border-t",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"px-3 md:px-4 py-1.5 flex items-center gap-2 md:gap-3 border-b text-xs font-medium",style:{borderColor:"var(--border-color)",color:"var(--text-muted)",backgroundColor:"var(--card-bg)"},children:[e.jsx("span",{className:"w-4 flex-shrink-0"}),e.jsx("span",{className:"w-6 md:w-8 text-center flex-shrink-0",children:"#"}),e.jsx("span",{className:"hidden md:block w-24 flex-shrink-0",children:"Air Date"}),e.jsx("span",{className:"flex-1",children:"Title"}),e.jsx("span",{className:"text-right",children:"Info"})]}),[...B.episodes].sort((M,oe)=>{if(!M.air_date&&!oe.air_date)return oe.episode_number-M.episode_number;if(!M.air_date)return 1;if(!oe.air_date)return-1;const le=new Date(M.air_date).getTime(),be=new Date(oe.air_date).getTime();return le===be?oe.episode_number-M.episode_number:be-le}).map(M=>e.jsxs("div",{className:"px-3 md:px-4 py-2 flex items-center justify-between border-b last:border-b-0",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("button",{onClick:async()=>{try{await C.updateEpisode(M.id,{monitored:!M.monitored}),Q(oe=>oe.map(le=>{var be;return le.id===B.id?{...le,episodes:(be=le.episodes)==null?void 0:be.map(we=>we.id===M.id?{...we,monitored:!we.monitored}:we)}:le})),a({type:"success",message:M.monitored?"Episode unmonitored":"Episode now monitoring"})}catch{a({type:"error",message:"Failed to update episode"})}},className:"flex-shrink-0 w-5",title:M.monitored?"Click to unmonitor":"Click to monitor",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",style:{color:M.monitored?"var(--navbar-bg)":"var(--text-muted)"},children:e.jsx("path",{d:"M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1z"})})}),e.jsx("span",{className:"w-6 md:w-10 text-sm flex-shrink-0 text-right",style:{color:"var(--text-secondary)"},children:M.episode_number}),e.jsx("span",{className:"hidden md:block w-24 text-xs flex-shrink-0",style:{color:"var(--text-muted)"},children:M.air_date?n(M.air_date):""}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm block truncate",style:{color:"var(--text-primary)"},children:M.title}),M.file_path&&e.jsx("span",{className:"hidden md:block text-xs font-mono truncate",style:{color:"var(--text-muted)"},children:M.file_path.split("/").pop()})]}),e.jsx("span",{className:"hidden md:block text-xs flex-shrink-0",style:{color:"var(--text-muted)"},children:M.runtime?`${M.runtime}m`:""}),M.vote_average!==void 0&&M.vote_average>0&&e.jsxs("span",{className:"hidden md:flex text-xs flex-shrink-0 items-center gap-0.5",style:{color:"var(--text-muted)"},children:[e.jsx("span",{style:{color:"#f5c518"},children:""}),M.vote_average.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-shrink-0 ml-2",children:[M.has_file&&e.jsxs("div",{className:"flex flex-wrap gap-1 justify-end",children:[e.jsx("span",{className:"px-1.5 md:px-2 py-0.5 text-xs rounded bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:M.quality||"OK"}),e.jsx("span",{className:"hidden md:inline-block px-2 py-0.5 text-xs rounded bg-blue-900/30 text-blue-400",children:M.video_codec}),e.jsx("span",{className:"hidden md:inline-block px-2 py-0.5 text-xs rounded bg-purple-900/30 text-purple-400",children:M.audio_codec}),M.file_size&&e.jsx("span",{className:"hidden md:inline-block px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:H(M.file_size)})]}),!M.has_file&&e.jsx("span",{className:"px-1.5 md:px-2 py-0.5 text-xs rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",children:"Missing"}),e.jsx("button",{onClick:()=>{Le({season:B.season_number,episode:M.episode_number}),ye(!0)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",style:{color:"var(--text-muted)"},title:"Search for release",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),M.has_file&&e.jsx("button",{onClick:()=>Ae({id:M.id,title:M.title,seasonId:B.id}),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete file",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},M.id))]})]},B.id)})}),T==="history"&&(ce.length>0?e.jsx("div",{className:"space-y-2",children:ce.map(B=>e.jsx("div",{className:"p-3 rounded border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:B.event_label}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-secondary)"},children:B.message})]}),e.jsxs("span",{className:"text-xs whitespace-nowrap",style:{color:"var(--text-muted)"},children:[n(B.created_at)," ",l(B.created_at)]})]})},B.id))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"No activity yet"})}))]})]}),(o.showCast??!0)&&h.length>0&&e.jsxs("div",{className:"md:hidden rounded-lg overflow-hidden",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Cast"}),e.jsx("button",{onClick:()=>s(`/${d}/${m.tmdb_id}/cast-crew`),className:"text-xs font-medium",style:{color:"var(--navbar-bg)"},children:"Show all "})]}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:h.slice(0,10).map(B=>e.jsxs("div",{className:"flex-shrink-0 w-20 text-center cursor-pointer",onClick:()=>s(`/person/${B.id}`),children:[B.profile_path?e.jsx("img",{src:Kt(B.profile_path,"w185")||"",alt:B.name,className:"w-16 h-16 mx-auto rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:B.name.charAt(0)})}),e.jsx("p",{className:"text-xs font-medium mt-1 truncate",style:{color:"var(--text-primary)"},children:B.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:B.character})]},B.id))})})]}),(o.showSimilar??!0)&&(b.length>0||y.length>0)&&e.jsxs("div",{className:"rounded-lg overflow-hidden",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)"},children:e.jsxs("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:["Related ",d==="movie"?"Movies":"Series"]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(b.length>0?b.map(ae=>{var ke;return{...ae,isLibrary:!0,displayTitle:ae.title,displayYear:ae.year,displayRating:ae.vote_average,displayCertification:ae.certification,reasons:((ke=ae.reasons)==null?void 0:ke.filter(M=>!M.toLowerCase().includes("title match")&&!M.toLowerCase().includes("similar title")))||[]}}):y.slice(0,10).map(ae=>{var ke,M;return{id:ae.id,tmdb_id:ae.id,poster_path:ae.poster_path,isLibrary:!1,displayTitle:ae.title||ae.name,displayYear:((ke=ae.release_date)==null?void 0:ke.split("-")[0])||((M=ae.first_air_date)==null?void 0:M.split("-")[0]),displayRating:ae.vote_average,displayCertification:null,reasons:[]}})).map(ae=>{var ke;return e.jsxs("div",{className:"flex-shrink-0 w-36 cursor-pointer group",onClick:async()=>{var M,oe;if(ae.isLibrary)s(d==="movie"?`/movies/${ae.id}`:`/series/${ae.id}`);else{try{if(d==="movie"){const be=(M=(await C.getMovies()).items)==null?void 0:M.find(we=>we.tmdb_id===ae.id);if(be){s(`/movies/${be.id}`);return}}else{const be=(oe=(await C.getSeries()).items)==null?void 0:oe.find(we=>we.tmdb_id===ae.id);if(be){s(`/series/${be.id}`);return}}}catch{}s(`/discover/${d==="movie"?"movie":"tv"}/${ae.id}`)}},children:[e.jsxs("div",{className:"relative",children:[ae.poster_path?e.jsx("img",{src:Kt(ae.poster_path,"w185")||"",alt:ae.displayTitle,className:"w-full aspect-[2/3] object-cover rounded group-hover:scale-105 transition-transform"}):e.jsx("div",{className:"w-full aspect-[2/3] bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),ae.isLibrary&&e.jsx("div",{className:"absolute top-1 right-1 w-5 h-5 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--navbar-bg)"},children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),ae.displayRating>0&&e.jsxs("div",{className:"absolute bottom-2 left-2 px-2 py-0.5 bg-black/70 backdrop-blur-sm rounded-md text-white text-xs font-medium pointer-events-none",children:[" ",(ke=ae.displayRating)==null?void 0:ke.toFixed(1)]})]}),e.jsx("p",{className:"mt-2 text-sm font-medium truncate",style:{color:"var(--text-primary)"},children:ae.displayTitle}),e.jsxs("p",{className:"text-xs flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:[ae.displayCertification&&e.jsx("span",{className:"px-1 py-0.5 text-[10px] font-medium border rounded",style:{borderColor:"var(--border-color)"},children:ae.displayCertification}),ae.displayYear&&e.jsx("span",{children:ae.displayYear})]}),ae.reasons&&ae.reasons.length>0&&e.jsx("p",{className:"text-xs mt-1 line-clamp-2",style:{color:"var(--navbar-bg)"},title:ae.reasons.join(", "),children:ae.reasons[0]})]},`${ae.isLibrary?"lib":"tmdb"}-${ae.id}`)})})})]})]})]})})]}),Se&&m&&e.jsx(Wx,{isOpen:Se,item:{id:m.tmdb_id,title:m.title,name:m.title,overview:m.overview,poster_path:m.poster_path,backdrop_path:m.backdrop_path,release_date:f==null?void 0:f.release_date,first_air_date:f==null?void 0:f.first_air_date,vote_average:m.vote_average},mediaType:d,onClose:()=>Re(!1),onSuccess:Y,onError:B=>a({type:"error",message:B})}),de&&_&&e.jsx($v,{isOpen:de,onClose:()=>{ye(!1),Le(null)},mediaType:d,mediaId:_,title:m.title,year:m.year,qualityProfileId:m.quality_profile_id,seasonNumber:je==null?void 0:je.season,episodeNumber:je==null?void 0:je.episode}),fe&&m&&e.jsx(Bc,{isOpen:fe,onClose:()=>Ne(!1),onConfirm:S,title:`Delete ${d==="movie"?"Movie":"Series"}`,itemName:m.title,hasFiles:d==="movie"?m.has_file||R.length>0:!0,showExclusionOption:!0,isSeries:d==="tv"}),ie&&_&&e.jsx(Ov,{type:d==="movie"?"movie":"series",id:_,title:m.title,onClose:()=>_e(!1),onComplete:()=>W()}),K&&m&&_&&d==="movie"&&e.jsx(Uv,{movie:{...m,id:_},onClose:()=>Fe(!1),onSave:()=>{W(),Fe(!1)},onDelete:()=>{Fe(!1),Ne(!0)}}),K&&m&&_&&d==="tv"&&e.jsx(Hv,{series:{...m,id:_},onClose:()=>Fe(!1),onSave:()=>{W(),Fe(!1)},onDelete:()=>{Fe(!1),Ne(!0)}}),Ie&&m&&_&&d==="movie"&&e.jsx(qv,{movie:{id:_,tmdb_id:m.tmdb_id,title:m.title,year:m.year,poster_path:m.poster_path},onClose:()=>Oe(!1),onSave:()=>{W(),Oe(!1)}}),Ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md overflow-hidden rounded-lg",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--border-color)"},children:e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Delete File"})}),e.jsx("div",{className:"p-6",children:e.jsx("p",{style:{color:"var(--text-secondary)"},children:"Are you sure you want to delete this file?"})}),e.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("button",{onClick:()=>Te(null),className:"px-4 py-2 text-sm rounded",style:{color:"var(--text-secondary)"},children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{await C.deleteMovieFile(_,Ce),a({type:"success",message:"File deleted"}),W()}catch{a({type:"error",message:"Failed to delete file"})}Te(null)},className:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md overflow-hidden rounded-lg",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("div",{className:"px-6 py-4 border-b",style:{borderColor:"var(--border-color)"},children:e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Delete Episode File"})}),e.jsx("div",{className:"p-6",children:e.jsxs("p",{style:{color:"var(--text-secondary)"},children:['Are you sure you want to delete the file for "',Pe.title,'"?']})}),e.jsxs("div",{className:"px-6 py-4 flex justify-end gap-3",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("button",{onClick:()=>Ae(null),className:"px-4 py-2 text-sm rounded",style:{color:"var(--text-secondary)"},children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{await C.deleteEpisodeFile(Pe.id),Q(B=>B.map(ae=>{var ke;return ae.id===Pe.seasonId?{...ae,episodes:(ke=ae.episodes)==null?void 0:ke.map(M=>M.id===Pe.id?{...M,has_file:!1,file_path:void 0,quality:void 0,file_size:void 0}:M)}:ae})),a({type:"success",message:"Episode file deleted"})}catch{a({type:"error",message:"Failed to delete file"})}Ae(null)},className:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}),De&&_&&m&&e.jsx(Qv,{isOpen:De,onClose:()=>I(!1),mediaType:d,mediaId:_,mediaTitle:m.title,seasons:V.map(B=>{var ae;return{season_number:B.season_number,episode_count:((ae=B.episodes)==null?void 0:ae.length)||0}}),onSuccess:()=>{W(),a({type:"success",message:"File imported successfully"})}})]})}function _u(t,r="w185"){return t?`https://image.tmdb.org/t/p/${r}${t}`:null}function Kv(){const{mediaType:t,id:r}=Pc(),s=yt(),a=Zt(),[n,l]=i.useState(null),[o,c]=i.useState(!0),[d,x]=i.useState(""),[m,u]=i.useState("cast");i.useEffect(()=>{var p;(p=a.state)!=null&&p.showCrew&&u("crew")},[a.state]),i.useEffect(()=>{(async()=>{if(!(!t||!r)){c(!0);try{const y=t==="movie"?await C.getMovieCredits(Number(r)):await C.getTVCredits(Number(r));l(y);const v=t==="movie"?await C.getMovieDetails(Number(r)):await C.getTVDetails(Number(r));x(v.title||v.name||"Unknown")}catch(y){console.error("Failed to fetch credits:",y)}finally{c(!1)}}})()},[t,r]);const f=(n==null?void 0:n.crew.reduce((p,y)=>{const v=y.department||"Other";return p[v]||(p[v]=[]),p[v].push(y),p},{}))||{},j=["Directing","Writing","Production","Camera","Art","Sound","Editing","Costume & Make-Up","Visual Effects","Crew","Other"],h=Object.keys(f).sort((p,y)=>{const v=j.indexOf(p),b=j.indexOf(y);return v===-1&&b===-1?p.localeCompare(y):v===-1?1:b===-1?-1:v-b});return e.jsx(at,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>s(-1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{backgroundColor:"var(--card-bg)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:m==="cast"?"Cast":"Crew"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:d})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>u("cast"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="cast"?"":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,style:m==="cast"?{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"}:{color:"var(--text-secondary)"},children:["Cast (",(n==null?void 0:n.cast.length)||0,")"]}),e.jsxs("button",{onClick:()=>u("crew"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="crew"?"":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,style:m==="crew"?{backgroundColor:"var(--navbar-bg)",color:"var(--navbar-text)"}:{color:"var(--text-secondary)"},children:["Crew (",(n==null?void 0:n.crew.length)||0,")"]})]}),o?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--navbar-bg)"}})}):e.jsxs(e.Fragment,{children:[m==="cast"&&e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:n==null?void 0:n.cast.map(p=>e.jsxs("div",{className:"rounded-lg overflow-hidden cursor-pointer hover:ring-2 transition-all",style:{backgroundColor:"var(--card-bg)","--tw-ring-color":"var(--primary-color)"},onClick:()=>s(`/person/${p.id}`),children:[e.jsx("div",{className:"aspect-[2/3] bg-gray-200 dark:bg-gray-700",children:p.profile_path?e.jsx("img",{src:_u(p.profile_path,"w185")||"",alt:p.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-medium",style:{color:"var(--text-muted)"},children:p.name.charAt(0)})})}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium text-xs truncate",style:{color:"var(--text-primary)"},children:p.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:p.character})]})]},`${p.id}-${p.character}`))}),m==="crew"&&e.jsx("div",{className:"space-y-6",children:h.map(p=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold mb-3",style:{color:"var(--text-primary)"},children:p}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:f[p].map((y,v)=>e.jsxs("div",{className:"rounded-lg overflow-hidden cursor-pointer hover:ring-2 transition-all",style:{backgroundColor:"var(--card-bg)","--tw-ring-color":"var(--primary-color)"},onClick:()=>s(`/person/${y.id}`),children:[e.jsx("div",{className:"aspect-[2/3] bg-gray-200 dark:bg-gray-700",children:y.profile_path?e.jsx("img",{src:_u(y.profile_path,"w185")||"",alt:y.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-medium",style:{color:"var(--text-muted)"},children:y.name.charAt(0)})})}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium text-xs truncate",style:{color:"var(--text-primary)"},children:y.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:y.job})]})]},`${y.id}-${y.job}-${v}`))})]},p))})]})]})})}function Mu(t,r="w185"){return t?`https://image.tmdb.org/t/p/${r}${t}`:null}function Yv(t,r){const s=new Date(t),a=r?new Date(r):new Date;let n=a.getFullYear()-s.getFullYear();const l=a.getMonth()-s.getMonth();return(l<0||l===0&&a.getDate()<s.getDate())&&n--,n}function Lu(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""}function Gv(){var N,E,F;const{id:t}=Pc(),r=yt(),[s,a]=i.useState(null),[n,l]=i.useState(!0),[o,c]=i.useState("movies"),[d,x]=i.useState("date"),[m,u]=i.useState(new Map),[f,j]=i.useState(new Map),[h,p]=i.useState(!1);i.useEffect(()=>((async()=>{if(t){l(!0);try{const[q,R,se]=await Promise.all([C.getPersonDetails(Number(t)),C.getMovies().catch(()=>({items:[],total:0})),C.getSeries().catch(()=>({items:[],total:0}))]);a(q),q!=null&&q.name&&(document.title=`${q.name} - MediaStack`);const V=new Map;(R.items||[]).forEach(te=>V.set(te.tmdb_id,te.id)),u(V);const Q=new Map;(se.items||[]).forEach(te=>Q.set(te.tmdb_id,te.id)),j(Q)}catch(q){console.error("Failed to fetch person details:",q)}finally{l(!1)}}})(),()=>{document.title="MediaStack"}),[t]);const y=_=>s!=null&&s.combined_credits?s.combined_credits.cast.filter(R=>R.media_type===_).reduce((R,se)=>{var Q;const V=R.find(te=>te.id===se.id);return V?se.character&&!((Q=V.character)!=null&&Q.includes(se.character))&&(V.character=V.character?`${V.character}, ${se.character}`:se.character):R.push({...se}),R},[]).sort((R,se)=>{if(d==="date"){const V=R.release_date||R.first_air_date||"";return(se.release_date||se.first_air_date||"").localeCompare(V)}else{if(d==="rating")return se.vote_average-R.vote_average;{const V=R.title||R.name||"",Q=se.title||se.name||"";return V.localeCompare(Q)}}}):[],v=y("movie"),b=y("tv"),g=_=>{const q=_.media_type,R=q==="movie"?m.get(_.id):f.get(_.id);r(R?`/${q==="movie"?"movies":"series"}/${R}`:`/discover/${q}/${_.id}`)};if(n)return e.jsx(at,{children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--primary-color)"}})})});if(!s)return e.jsx(at,{children:e.jsx("div",{className:"text-center py-20",style:{color:"var(--text-muted)"},children:"Person not found"})});const k=s.birthday?Yv(s.birthday,s.deathday):null;return e.jsx(at,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>r(-1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{backgroundColor:"var(--card-bg)"},children:e.jsx("svg",{className:"w-5 h-5",style:{color:"var(--text-primary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:s.name}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:s.known_for_department})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[e.jsx("div",{className:"w-48 md:w-64 shrink-0 mx-auto md:mx-0",children:e.jsx("div",{className:"aspect-[2/3] rounded-lg overflow-hidden",style:{backgroundColor:"var(--card-bg)"},children:s.profile_path?e.jsx("img",{src:Mu(s.profile_path,"w342")||"",alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-6xl font-medium",style:{color:"var(--text-muted)"},children:s.name.charAt(0)})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 mb-4 text-sm",children:[s.birthday&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Born: "}),e.jsxs("span",{style:{color:"var(--text-primary)"},children:[Lu(s.birthday),!s.deathday&&k!==null&&` (${k} years old)`]})]}),s.deathday&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Died: "}),e.jsxs("span",{style:{color:"var(--text-primary)"},children:[Lu(s.deathday),k!==null&&` (aged ${k})`]})]}),s.place_of_birth&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Birthplace: "}),e.jsx("span",{style:{color:"var(--text-primary)"},children:s.place_of_birth})]})]}),s.biography&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-sm font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Biography"}),e.jsx("p",{className:`text-sm leading-relaxed ${!h&&s.biography.length>500?"line-clamp-4":""}`,style:{color:"var(--text-secondary)"},children:s.biography}),s.biography.length>500&&e.jsx("button",{onClick:()=>p(!h),className:"text-sm mt-1",style:{color:"var(--primary-color)"},children:h?"Show less":"Read more"})]}),e.jsxs("div",{className:"flex gap-3",children:[((N=s.external_ids)==null?void 0:N.imdb_id)&&e.jsx("a",{href:`https://www.imdb.com/name/${s.external_ids.imdb_id}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--card-bg)",color:"var(--text-primary)"},children:"IMDb"}),((E=s.external_ids)==null?void 0:E.instagram_id)&&e.jsx("a",{href:`https://www.instagram.com/${s.external_ids.instagram_id}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--card-bg)",color:"var(--text-primary)"},children:"Instagram"}),((F=s.external_ids)==null?void 0:F.twitter_id)&&e.jsx("a",{href:`https://www.twitter.com/${s.external_ids.twitter_id}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--card-bg)",color:"var(--text-primary)"},children:"Twitter"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c("movies"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:o==="movies"?{backgroundColor:"var(--primary-color)",color:"white"}:{backgroundColor:"var(--card-bg)",color:"var(--text-secondary)"},children:["Movies (",v.length,")"]}),e.jsxs("button",{onClick:()=>c("tv"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:o==="tv"?{backgroundColor:"var(--primary-color)",color:"white"}:{backgroundColor:"var(--card-bg)",color:"var(--text-secondary)"},children:["TV Shows (",b.length,")"]})]}),e.jsxs("select",{value:d,onChange:_=>x(_.target.value),className:"px-3 py-2 rounded-lg text-sm",style:{backgroundColor:"var(--card-bg)",color:"var(--text-primary)",borderColor:"var(--border-color)"},children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"rating",children:"Sort by Rating"}),e.jsx("option",{value:"title",children:"Sort by Title"})]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:(o==="movies"?v:b).map((_,q)=>{const R=o==="movies"?m.has(_.id):f.has(_.id),se=(_.release_date||_.first_air_date||"").substring(0,4);return e.jsxs("div",{onClick:()=>g(_),className:"rounded-lg overflow-hidden cursor-pointer hover:ring-2 transition-all relative group",style:{backgroundColor:"var(--card-bg)","--tw-ring-color":"var(--primary-color)"},children:[R&&e.jsx("div",{className:"absolute top-1 right-1 z-10 w-5 h-5 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--primary-color)"},children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"aspect-[2/3] bg-gray-200 dark:bg-gray-700 relative",children:[_.poster_path?e.jsx("img",{src:Mu(_.poster_path,"w185")||"",alt:_.title||_.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-medium",style:{color:"var(--text-muted)"},children:(_.title||_.name||"?").charAt(0)})}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium px-2 text-center",children:R?"View in Library":"Add to Library"})})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-medium text-xs truncate",style:{color:"var(--text-primary)"},children:_.title||_.name}),e.jsx("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:_.character||se||""}),se&&_.character&&e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:se})]})]},`${_.id}-${q}`)})}),(o==="movies"&&v.length===0||o==="tv"&&b.length===0)&&e.jsxs("div",{className:"text-center py-12",style:{color:"var(--text-muted)"},children:["No ",o==="movies"?"movie":"TV"," credits found"]})]})]})})}function Jv(){const[t,r]=i.useState(""),[s,a]=i.useState([]),[n,l]=i.useState(!1),[o,c]=i.useState("movie"),[d,x]=i.useState(new Set),[m,u]=i.useState(new Set),[f,j]=i.useState(null),[h,p]=i.useState([]),y=async()=>{try{const[N,E,F]=await Promise.all([C.getMovies(),C.getSeries(),C.getQualityProfiles()]);x(new Set(N.items.map(_=>_.tmdb_id))),u(new Set(E.items.map(_=>_.tmdb_id))),p(F)}catch(N){console.error("Failed to load library:",N)}},v=async N=>{if(N.preventDefault(),!!t.trim()){l(!0);try{await y();const E=o==="movie"?await C.searchMovies(t):await C.searchTV(t);a(E.results||[])}catch(E){console.error("Search failed:",E),alert("Search failed")}finally{l(!1)}}},b=N=>N.replace(/[^a-z0-9]/gi,"_").replace(/_+/g,"_"),g=async N=>{var E,F,_;j(N.id);try{const q=h[0];await C.addMovie({tmdb_id:N.id,title:N.title,year:N.release_date?new Date(N.release_date).getFullYear():null,overview:N.overview,poster_path:N.poster_path,backdrop_path:N.backdrop_path,folder_path:`/data/movies/${b(N.title)}`,quality_profile_id:q==null?void 0:q.id,monitored:!0}),x(R=>new Set([...R,N.id])),alert(`${N.title} added to your library!`)}catch(q){((E=q.response)==null?void 0:E.status)===409?x(R=>new Set([...R,N.id])):alert(`Failed to add: ${((_=(F=q.response)==null?void 0:F.data)==null?void 0:_.error)||q.message}`)}finally{j(null)}},k=async N=>{var E,F,_;j(N.id);try{const q=h[0];await C.addSeries({tmdb_id:N.id,title:N.name,year:N.first_air_date?new Date(N.first_air_date).getFullYear():null,overview:N.overview,network:null,poster_path:N.poster_path,backdrop_path:N.backdrop_path,folder_path:`/data/tv/${b(N.name)}`,quality_profile_id:q==null?void 0:q.id,monitored:!0}),u(R=>new Set([...R,N.id])),alert(`${N.name} added to your library!`)}catch(q){((E=q.response)==null?void 0:E.status)===409?u(R=>new Set([...R,N.id])):alert(`Failed to add: ${((_=(F=q.response)==null?void 0:F.data)==null?void 0:_.error)||q.message}`)}finally{j(null)}};return e.jsx(at,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Search"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Find movies and TV shows to add"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{type:"button",onClick:()=>c("movie"),className:`px-4 py-2 ${o==="movie"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Movies"}),e.jsx("button",{type:"button",onClick:()=>c("tv"),className:`px-4 py-2 ${o==="tv"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"TV Shows"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:N=>r(N.target.value),placeholder:`Search for ${o==="movie"?"movies":"TV shows"}...`,className:"flex-1 px-4 py-3 border border-gray-300 "}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-primary-600 text-white hover:bg-primary-700 disabled:bg-gray-400",children:n?"Searching...":"Search"})]})]}),s.length===0&&!n&&e.jsx("div",{className:"text-center py-12 bg-white shadow",children:e.jsx("p",{className:"text-gray-500",children:t?"No results found":"Enter a search query to get started"})}),s.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:s.map(N=>{const E=o==="movie"?d.has(N.id):m.has(N.id),F=f===N.id,_=N.title||N.name,q=N.release_date||N.first_air_date;return e.jsxs("div",{className:"bg-white shadow hover:shadow-lg transition-shadow overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-[2/3]",children:[N.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${N.poster_path}`,alt:_,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400",children:"No Poster"})}),E&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs rounded",children:"In Library"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 truncate",title:_,children:_}),e.jsx("p",{className:"text-xs text-gray-500",children:q?new Date(q).getFullYear():"TBA"}),e.jsx("button",{onClick:()=>o==="movie"?g(N):k(N),disabled:E||F,className:`mt-2 w-full py-2 rounded text-sm font-medium ${E?"bg-gray-200 text-gray-500 cursor-not-allowed":F?"bg-gray-300 text-gray-600 cursor-wait":"bg-primary-600 text-white hover:bg-primary-700"}`,children:E?" In Library":F?"Adding...":"+ Add"})]})]},N.id)})})]})})}function cr({isOpen:t,title:r,message:s,confirmText:a="Delete",cancelText:n="Cancel",variant:l,danger:o,onConfirm:c,onCancel:d}){const x=l||"danger",m=i.useRef(null);if(i.useEffect(()=>{t&&m.current&&m.current.focus()},[t]),i.useEffect(()=>{const j=h=>{h.key==="Escape"&&t&&d()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[t,d]),!t)return null;const f={danger:{icon:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",button:"bg-red-600 hover:bg-red-700"},warning:{icon:"bg-yellow-100 dark:bg-yellow-900/30",iconColor:"text-yellow-600 dark:text-yellow-400",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"bg-blue-100 dark:bg-blue-900/30",iconColor:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"}}[x];return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:d,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 shadow-xl w-full max-w-md overflow-hidden",onClick:j=>j.stopPropagation(),children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full ${f.icon} flex items-center justify-center`,children:x==="danger"?e.jsx("svg",{className:`w-5 h-5 ${f.iconColor}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):x==="warning"?e.jsx("svg",{className:`w-5 h-5 ${f.iconColor}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):e.jsx("svg",{className:`w-5 h-5 ${f.iconColor}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),e.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:s})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex justify-end gap-3",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:n}),e.jsx("button",{ref:m,onClick:c,className:`px-4 py-2 text-sm font-medium text-white ${f.button} transition-colors`,children:a})]})]})]})}function Ux({totalItems:t,selectedCount:r,searchTerm:s,onSearchChange:a,filter:n,onFilterChange:l,filterOptions:o,customFilters:c=[],onCustomFiltersChange:d,qualityProfiles:x=[],viewMode:m,onViewModeChange:u,posterSize:f,onPosterSizeChange:j,selectMode:h,onSelectModeChange:p,onSelectAll:y,onDeleteSelected:v,onMonitorSelected:b,onUnmonitorSelected:g,onSearchSelected:k,searchingSelected:N,onOrganizeFolders:E,organizingFolders:F,onSetProfile:_,settingProfile:q,onSetAvailability:R,settingAvailability:se,onRefresh:V,addLink:Q,addLabel:te,importLink:J}){const[ce,$]=i.useState(!1),[U,X]=i.useState(null);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-20 -mx-4 px-4 py-3",style:{backgroundColor:"var(--theme-background)"},children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap p-3 border",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search...",value:s,onChange:T=>a(T.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border transition-colors",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--input-border)",color:"var(--input-text)"}})]}),e.jsxs("select",{value:n,onChange:T=>{T.target.value==="manage_filters"?(X(null),$(!0)):l(T.target.value)},className:"px-3 py-2 text-sm border transition-colors",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--input-border)",color:"var(--input-text)"},children:[o.map(T=>e.jsx("option",{value:T.value,disabled:T.disabled,children:T.label},T.value)),c.length>0&&e.jsx("option",{disabled:!0,children:""}),c.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id)),d&&e.jsxs(e.Fragment,{children:[e.jsx("option",{disabled:!0,children:""}),e.jsx("option",{value:"manage_filters",children:"Custom Filters..."})]})]}),e.jsxs("span",{className:"text-sm px-2",style:{color:"var(--text-secondary)"},children:[t," items"]}),e.jsx("div",{className:"h-6 w-px mx-1",style:{backgroundColor:"var(--border-color)"}}),e.jsxs("div",{className:"flex items-center overflow-hidden border",style:{borderColor:"var(--border-color)"},children:[e.jsx("button",{onClick:()=>u("poster"),className:"p-2 transition-colors",style:{backgroundColor:m==="poster"?"var(--btn-primary-bg)":"var(--surface-bg)",color:m==="poster"?"var(--btn-primary-text)":"var(--text-secondary)"},title:"Poster View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("button",{onClick:()=>u("table"),className:"p-2 transition-colors",style:{backgroundColor:m==="table"?"var(--btn-primary-bg)":"var(--surface-bg)",color:m==="table"?"var(--btn-primary-text)":"var(--text-secondary)"},title:"Table View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),m==="poster"&&e.jsx(Hl,{value:f,onChange:j}),e.jsx("div",{className:"h-6 w-px mx-1",style:{backgroundColor:"var(--border-color)"}}),e.jsxs("button",{onClick:()=>p(!h),className:`flex items-center gap-1.5 px-3 py-2 text-sm border transition-colors ${h?"ring-2 ring-primary-500":""}`,style:{backgroundColor:h?"var(--btn-primary-bg)":"var(--surface-bg)",borderColor:"var(--border-color)",color:h?"var(--btn-primary-text)":"var(--text-secondary)"},title:"Select Mode",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),h?`${r} selected`:"Select"]}),e.jsx("button",{onClick:V,className:"p-2 border transition-colors hover:bg-opacity-80",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-secondary)"},title:"Refresh Library",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("a",{href:Q,className:"flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),te]}),e.jsxs("a",{href:J,className:"flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-colors",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import"]})]}),h&&e.jsxs("div",{className:"flex items-center gap-3 mt-3 p-3 ",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("button",{onClick:y,className:"px-3 py-1.5 text-sm transition-colors",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)"},children:r===t?"Deselect All":"Select All"}),b&&e.jsxs("button",{onClick:b,disabled:r===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors disabled:opacity-50",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)"},children:[e.jsxs("svg",{className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Monitor"]}),g&&e.jsxs("button",{onClick:g,disabled:r===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors disabled:opacity-50",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)"},children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),"Unmonitor"]}),k&&e.jsx("button",{onClick:k,disabled:r===0||N,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors disabled:opacity-50",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search (",r,")"]})}),E&&e.jsx("button",{onClick:E,disabled:r===0||F,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm transition-colors disabled:opacity-50",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)"},children:F?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Renaming..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),"Rename Folders"]})}),_&&x.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("select",{disabled:r===0||q,onChange:T=>{T.target.value&&(_(T.target.value),T.target.value="")},className:"appearance-none pl-3 pr-8 py-1.5 text-sm transition-colors disabled:opacity-50 cursor-pointer",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:q?"Setting...":"Set Profile"}),x.map(T=>e.jsx("option",{value:T.id,children:T.name},T.id))]}),e.jsx("svg",{className:"w-4 h-4 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:"var(--text-secondary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),R&&e.jsxs("div",{className:"relative",children:[e.jsxs("select",{disabled:r===0||se,onChange:T=>{T.target.value&&(R(T.target.value),T.target.value="")},className:"appearance-none pl-3 pr-8 py-1.5 text-sm transition-colors disabled:opacity-50 cursor-pointer",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:se?"Setting...":"Set Availability"}),e.jsx("option",{value:"announced",children:"Announced"}),e.jsx("option",{value:"inCinemas",children:"In Cinemas"}),e.jsx("option",{value:"released",children:"Released"})]}),e.jsx("svg",{className:"w-4 h-4 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:"var(--text-secondary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("button",{onClick:v,disabled:r===0,className:"px-3 py-1.5 text-sm transition-colors disabled:opacity-50",style:{backgroundColor:"var(--btn-danger-bg)",color:"white"},children:["Delete (",r,")"]}),e.jsx("button",{onClick:()=>p(!1),className:"px-3 py-1.5 text-sm transition-colors",style:{backgroundColor:"var(--hover-bg)",color:"var(--text-secondary)"},children:"Cancel"})]})]}),ce&&d&&e.jsx(Xv,{filter:U,qualityProfiles:x,existingFilters:c,onSave:T=>{d(U?c.map(z=>z.id===T.id?T:z):[...c,T]),$(!1),X(null)},onDelete:U?()=>{d(c.filter(T=>T.id!==U.id)),n===U.id&&l("all"),$(!1),X(null)}:void 0,onClose:()=>{$(!1),X(null)},onEditFilter:T=>X(T)},(U==null?void 0:U.id)||"new")]})}function Xv({filter:t,qualityProfiles:r,existingFilters:s,onSave:a,onDelete:n,onClose:l,onEditFilter:o}){var se,V;const[c,d]=i.useState((t==null?void 0:t.name)||""),[x,m]=i.useState((t==null?void 0:t.conditions.monitored)===void 0?"any":t.conditions.monitored?"true":"false"),[u,f]=i.useState((t==null?void 0:t.conditions.hasFile)===void 0?"any":t.conditions.hasFile?"true":"false"),[j,h]=i.useState((t==null?void 0:t.conditions.cutoffMet)===void 0?"any":t.conditions.cutoffMet?"true":"false"),[p,y]=i.useState((t==null?void 0:t.conditions.qualityProfileId)||""),[v,b]=i.useState((t==null?void 0:t.conditions.quality)||""),[g,k]=i.useState(((se=t==null?void 0:t.conditions.minYear)==null?void 0:se.toString())||""),[N,E]=i.useState(((V=t==null?void 0:t.conditions.maxYear)==null?void 0:V.toString())||""),[F,_]=i.useState(t!==null||s.length===0),q=[{value:"2160p",label:"2160p (Any)"},{value:"1080p",label:"1080p (Any)"},{value:"720p",label:"720p (Any)"},{value:"480p",label:"480p (Any)"},{value:"Bluray-2160p",label:"Bluray 2160p"},{value:"WEB 2160p",label:"WEB 2160p"},{value:"Remux-2160p",label:"Remux 2160p"},{value:"Bluray-1080p",label:"Bluray 1080p"},{value:"WEB 1080p",label:"WEB 1080p"},{value:"Remux-1080p",label:"Remux 1080p"},{value:"HDTV-1080p",label:"HDTV 1080p"},{value:"Bluray-720p",label:"Bluray 720p"},{value:"WEB 720p",label:"WEB 720p"},{value:"HDTV-720p",label:"HDTV 720p"},{value:"DVD",label:"DVD"},{value:"SDTV",label:"SDTV"}];i.useEffect(()=>{var Q,te;t&&(d(t.name||""),m(t.conditions.monitored===void 0?"any":t.conditions.monitored?"true":"false"),f(t.conditions.hasFile===void 0?"any":t.conditions.hasFile?"true":"false"),h(t.conditions.cutoffMet===void 0?"any":t.conditions.cutoffMet?"true":"false"),y(t.conditions.qualityProfileId||""),b(t.conditions.quality||""),k(((Q=t.conditions.minYear)==null?void 0:Q.toString())||""),E(((te=t.conditions.maxYear)==null?void 0:te.toString())||""),_(!0))},[t]);const R=()=>{if(!c.trim())return;const Q={};x!=="any"&&(Q.monitored=x==="true"),u!=="any"&&(Q.hasFile=u==="true"),j!=="any"&&(Q.cutoffMet=j==="true"),p&&(Q.qualityProfileId=p),v&&(Q.quality=v),g&&(Q.minYear=parseInt(g)),N&&(Q.maxYear=parseInt(N)),a({id:(t==null?void 0:t.id)||`custom_${Date.now()}`,name:c.trim(),conditions:Q})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"Edit Filter":F?"New Custom Filter":"Custom Filters"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:F?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter Name"}),e.jsx("input",{type:"text",value:c,onChange:Q=>d(Q.target.value),placeholder:"My Custom Filter",className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monitored Status"}),e.jsxs("select",{value:x,onChange:Q=>m(Q.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"any",children:"Any"}),e.jsx("option",{value:"true",children:"Monitored Only"}),e.jsx("option",{value:"false",children:"Unmonitored Only"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File Status"}),e.jsxs("select",{value:u,onChange:Q=>f(Q.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"any",children:"Any"}),e.jsx("option",{value:"true",children:"Has File"}),e.jsx("option",{value:"false",children:"Missing File"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cutoff Status"}),e.jsxs("select",{value:j,onChange:Q=>h(Q.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"any",children:"Any"}),e.jsx("option",{value:"true",children:"Cutoff Met"}),e.jsx("option",{value:"false",children:"Cutoff Not Met"})]})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Quality Profile"}),e.jsxs("select",{value:p,onChange:Q=>y(Q.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"",children:"Any Profile"}),r.map(Q=>e.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Downloaded Quality"}),e.jsxs("select",{value:v,onChange:Q=>b(Q.target.value),className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"",children:"Any Quality"}),q.map(Q=>e.jsx("option",{value:Q.value,children:Q.label},Q.value))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Year"}),e.jsx("input",{type:"number",value:g,onChange:Q=>k(Q.target.value),placeholder:"e.g. 2000",className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Max Year"}),e.jsx("input",{type:"number",value:N,onChange:Q=>E(Q.target.value),placeholder:"e.g. 2024",className:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[s.length>0?e.jsx("div",{className:"space-y-2",children:s.map(Q=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Object.entries(Q.conditions).map(([te,J])=>{var ce;return te==="monitored"?J?"Monitored":"Unmonitored":te==="hasFile"?J?"Has File":"Missing File":te==="cutoffMet"?J?"Cutoff Met":"Cutoff Unmet":te==="qualityProfileId"?`Profile: ${((ce=r.find($=>$.id===J))==null?void 0:ce.name)||J}`:te==="quality"?`Quality: ${J}`:te==="minYear"?`From: ${J}`:te==="maxYear"?`To: ${J}`:""}).filter(Boolean).join(", ")})]}),e.jsx("button",{onClick:()=>o(Q),className:"px-3 py-1 text-sm text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20",children:"Edit"})]},Q.id))}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No custom filters yet"}),e.jsx("button",{onClick:()=>_(!0),className:"w-full px-4 py-2 text-sm font-medium text-primary-600 border border-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20",children:"+ Create New Filter"})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[F&&n&&e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Delete"}),e.jsx("div",{className:"flex-1"}),F&&s.length>0&&!t&&e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Back"}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:F?"Cancel":"Close"}),F&&e.jsx("button",{onClick:R,disabled:!c.trim(),className:"px-4 py-2 text-sm font-medium bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50",children:t?"Save Changes":"Create Filter"})]})]})})}const Tu={1:{grid:"grid-cols-[repeat(auto-fill,minmax(80px,80px))]",imgSize:"w154",minWidth:"80px"},2:{grid:"grid-cols-[repeat(auto-fill,minmax(100px,100px))]",imgSize:"w154",minWidth:"100px"},3:{grid:"grid-cols-[repeat(auto-fill,minmax(120px,120px))]",imgSize:"w185",minWidth:"120px"},4:{grid:"grid-cols-[repeat(auto-fill,minmax(140px,140px))]",imgSize:"w185",minWidth:"140px"},5:{grid:"grid-cols-[repeat(auto-fill,minmax(160px,160px))]",imgSize:"w300",minWidth:"160px"},6:{grid:"grid-cols-[repeat(auto-fill,minmax(180px,180px))]",imgSize:"w300",minWidth:"180px"},7:{grid:"grid-cols-[repeat(auto-fill,minmax(200px,200px))]",imgSize:"w342",minWidth:"200px"},8:{grid:"grid-cols-[repeat(auto-fill,minmax(220px,220px))]",imgSize:"w342",minWidth:"220px"},9:{grid:"grid-cols-[repeat(auto-fill,minmax(250px,250px))]",imgSize:"w500",minWidth:"250px"},10:{grid:"grid-cols-[repeat(auto-fill,minmax(280px,280px))]",imgSize:"w500",minWidth:"280px"}};function Zv({letters:t,activeLetter:r,onLetterClick:s}){const a="#ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return t.length===0?null:e.jsx("div",{className:"fixed right-1 top-1/2 -translate-y-1/2 z-[9999] flex flex-col items-center py-2 px-1 shadow-xl border",style:{backgroundColor:"var(--navbar-bg)",borderColor:"var(--border-color)"},children:a.map(n=>{const l=t.includes(n),o=r===n;return e.jsx("button",{onClick:()=>l&&s(n),disabled:!l,className:"w-7 h-6 text-xs font-semibold rounded transition-all flex items-center justify-center",style:{color:l?o?"white":"var(--navbar-text)":"var(--text-muted)",backgroundColor:o?"var(--navbar-bg)":"transparent",opacity:l?1:.4,cursor:l?"pointer":"default",filter:o?"brightness(1.5)":void 0},onMouseEnter:c=>{l&&!o&&(c.currentTarget.style.filter="brightness(1.3)")},onMouseLeave:c=>{o||(c.currentTarget.style.filter="")},children:n},n)})})}const Pu=100,Eu=100;function eb(){var ae,ke;const t=Zt(),r=yt(),[s]=zl(),{addToast:a}=vr(),{settings:n,updateSettings:l}=br(),[o,c]=i.useState([]),[d,x]=i.useState(!0),[m,u]=i.useState(()=>s.get("filter")||"all"),[f,j]=i.useState(""),[h,p]=i.useState(new Set),[y,v]=i.useState(!1),[b,g]=i.useState(null),k=i.useRef({}),[N,E]=i.useState(Pu),F=i.useRef(null),[_,q]=i.useState([]),[R,se]=i.useState([]),V=n.viewMode||"poster",Q=n.posterSize||5,te=Tu[Q]||Tu[5],J=M=>l({viewMode:M}),ce=M=>l({posterSize:M}),[$,U]=i.useState(!1),X=n.movieTableColumns||{year:!0,quality:!0,size:!0,monitored:!0,availability:!1,qualityProfile:!1,runtime:!1,rating:!1,added:!1},T=[{key:"year",label:"Year"},{key:"quality",label:"Quality"},{key:"size",label:"Size"},{key:"runtime",label:"Runtime"},{key:"rating",label:"Rating"},{key:"qualityProfile",label:"Quality Profile"},{key:"availability",label:"Availability"},{key:"added",label:"Added"},{key:"monitored",label:"Monitored"}],z=M=>{l({movieTableColumns:{...X,[M]:!X[M]}})},[G,Z]=i.useState(!1),[de,ye]=i.useState(!1),[je,Le]=i.useState(null),[fe,Ne]=i.useState(!1),[ie,_e]=i.useState(!1),[K,Fe]=i.useState(!1),[Se,Re]=i.useState(!1),[Ie,Oe]=i.useState(!1),[De,I]=i.useState(!1);i.useEffect(()=>{Ae(),Ce(),Te()},[]),i.useEffect(()=>{const M=oe=>{$&&(oe.target.closest("[data-column-selector]")||U(!1))};return document.addEventListener("click",M),()=>document.removeEventListener("click",M)},[$]);const Ce=async()=>{try{const oe=(await C.getQualityProfiles()).filter(le=>!le.media_type||le.media_type==="both"||le.media_type==="movie");se(oe)}catch(M){console.error("Failed to load quality profiles:",M)}},Te=()=>{const M=localStorage.getItem("customFilters_movies");if(M)try{q(JSON.parse(M))}catch(oe){console.error("Failed to parse custom filters:",oe)}},Pe=M=>{localStorage.setItem("customFilters_movies",JSON.stringify(M)),q(M)};i.useEffect(()=>{var M;(M=t.state)!=null&&M.notification&&(a({type:"success",message:t.state.notification}),window.history.replaceState({},document.title))},[t.state]);const Ae=async()=>{try{const M=await C.getMovies(),oe=M.items||M;oe.sort((le,be)=>le.title.localeCompare(be.title)),c(oe)}catch(M){console.error("Failed to load movies:",M)}finally{x(!1)}},O=i.useMemo(()=>{const M=le=>{const be=(le||"").toLowerCase();let we=0;be.includes("2160")||be.includes("4k")||be.includes("uhd")?we=400:be.includes("1080")?we=300:be.includes("720")?we=200:(be.includes("480")||be.includes("sd"))&&(we=100);let Qe=0;return be.includes("remux")?Qe=50:be.includes("bluray")||be.includes("blu-ray")||be.includes("bdrip")||be.includes("brrip")?Qe=40:be.includes("webdl")||be.includes("web-dl")||be.includes("web dl")?Qe=30:be.includes("webrip")||be.includes("web-rip")||be.includes("web rip")?Qe=25:be.includes("hdtv")?Qe=20:(be.includes("dvd")||be.includes("sdtv"))&&(Qe=10),we+Qe},oe=le=>{if(!le.quality_profile_id||!le.has_file||!le.quality)return!0;const be=R.find(Be=>Be.id===le.quality_profile_id);if(!be||!be.cutoff_quality)return!0;const we=M(le.quality),Qe=M(be.cutoff_quality);return we>=Qe};return o.filter(le=>{const be=le.title.toLowerCase().includes(f.toLowerCase());let we=!0;if(m==="all")we=!0;else if(m==="monitored")we=le.monitored;else if(m==="unmonitored")we=!le.monitored;else if(m==="missing")we=!le.has_file;else if(m==="wanted")we=le.monitored&&!le.has_file;else if(m==="downloaded")we=le.has_file;else if(m==="cutoff_unmet")we=le.has_file&&!oe(le);else if(m.startsWith("custom_")){const Qe=_.find(Be=>Be.id===m);if(Qe){const{conditions:Be}=Qe;if(Be.monitored!==void 0&&le.monitored!==Be.monitored&&(we=!1),Be.hasFile!==void 0&&le.has_file!==Be.hasFile&&(we=!1),Be.cutoffMet!==void 0&&(le.has_file?oe(le)!==Be.cutoffMet&&(we=!1):we=!1),Be.qualityProfileId&&le.quality_profile_id!==Be.qualityProfileId&&(we=!1),Be.quality){const ur=it=>it.toLowerCase().replace(/[-\s]/g,""),ss=ur(Be.quality),ze=ur(le.quality||"");!ze.includes(ss)&&!ss.includes(ze)&&(we=!1)}Be.minYear&&le.year<Be.minYear&&(we=!1),Be.maxYear&&le.year>Be.maxYear&&(we=!1)}}return be&&we})},[o,f,m,_,R]),ve=i.useMemo(()=>{const M=new Set;return O.forEach(oe=>{const le=oe.title.charAt(0).toUpperCase(),be=/[A-Z]/.test(le)?le:"#";M.add(be)}),Array.from(M).sort((oe,le)=>oe==="#"?-1:le==="#"?1:oe.localeCompare(le))},[O]),W=i.useMemo(()=>{const M={};return O.forEach(oe=>{const le=oe.title.charAt(0).toUpperCase(),be=/[A-Z]/.test(le)?le:"#";M[be]||(M[be]=oe.id)}),M},[O]);i.useEffect(()=>{const M=()=>{const oe=window.scrollY+200;let le=null;for(const be of ve){const we=W[be];if(we){const Qe=k.current[we];Qe&&Qe.offsetTop<=oe&&(le=be)}}g(le)};return window.addEventListener("scroll",M),()=>window.removeEventListener("scroll",M)},[ve,W]);const he=i.useCallback(M=>{const oe=W[M];if(oe){const le=O.findIndex(be=>be.id===oe);if(le>=0)if(le>=N)E(le+Eu),setTimeout(()=>{const be=k.current[oe];be&&be.scrollIntoView({behavior:"smooth",block:"start"})},50);else{const be=k.current[oe];be&&be.scrollIntoView({behavior:"smooth",block:"start"})}}},[W,O,N]);i.useEffect(()=>{E(Pu)},[m,f]),i.useEffect(()=>{const M=new IntersectionObserver(oe=>{oe[0].isIntersecting&&N<O.length&&E(le=>Math.min(le+Eu,O.length))},{threshold:.1,rootMargin:"200px"});return F.current&&M.observe(F.current),()=>M.disconnect()},[N,O.length]);const me=i.useMemo(()=>O.slice(0,N),[O,N]),D=M=>{const oe=new Set(h);oe.has(M)?oe.delete(M):oe.add(M),p(oe)},ue=()=>{h.size===O.length?p(new Set):p(new Set(O.map(M=>M.id)))},ge=async()=>{if(h.size!==0)try{const M=Array.from(h);await C.bulkUpdateMovies(M,{monitored:!0}),c(oe=>oe.map(le=>h.has(le.id)?{...le,monitored:!0}:le)),a({type:"success",message:`Monitored ${h.size} movies`}),p(new Set),v(!1)}catch{a({type:"error",message:"Failed to update monitor status"})}},H=async()=>{if(h.size!==0)try{const M=Array.from(h);await C.bulkUpdateMovies(M,{monitored:!1}),c(oe=>oe.map(le=>h.has(le.id)?{...le,monitored:!1}:le)),a({type:"success",message:`Unmonitored ${h.size} movies`}),p(new Set),v(!1)}catch{a({type:"error",message:"Failed to update monitor status"})}},re=async()=>{if(h.size!==0){Fe(!0);try{const M=Array.from(h),oe=await C.bulkSearchMovies(M);a({type:"success",message:`Search complete: ${oe.found}/${oe.searched} found releases`}),p(new Set),v(!1)}catch{a({type:"error",message:"Failed to search movies"})}finally{Fe(!1)}}},P=async()=>{if(h.size!==0){Re(!0);try{let M=0,oe=0;const le=Array.from(h);for(const be of le)try{(await C.executeMovieFolderRename(be)).renamed&&M++}catch{oe++}M>0||oe>0?a({type:M>0?"success":"info",message:`Renamed ${M} folder${M!==1?"s":""}${oe>0?`, ${oe} failed`:""}`}):a({type:"info",message:"All folders already have correct names"}),p(new Set),v(!1),Ae()}catch{a({type:"error",message:"Failed to rename folders"})}finally{Re(!1)}}},L=async M=>{var oe;if(h.size!==0){Oe(!0);try{const le=Array.from(h);await C.bulkUpdateMovies(le,{quality_profile_id:M});const be=((oe=R.find(we=>we.id===M))==null?void 0:oe.name)||"profile";a({type:"success",message:`Set ${le.length} movie${le.length!==1?"s":""} to ${be}`}),p(new Set),v(!1),Ae()}catch{a({type:"error",message:"Failed to set profile"})}finally{Oe(!1)}}},S=async M=>{if(h.size!==0){I(!0);try{const oe=Array.from(h);await C.bulkUpdateMovies(oe,{minimum_availability:M});const le=M==="announced"?"Announced":M==="inCinemas"?"In Cinemas":"Released";a({type:"success",message:`Set ${oe.length} movie${oe.length!==1?"s":""} to ${le}`}),p(new Set),v(!1),Ae()}catch{a({type:"error",message:"Failed to set availability"})}finally{I(!1)}}},Y=async(M,oe)=>{_e(!0);try{je&&(await C.deleteMovie(je,M,oe),a({type:"success",message:"Movie deleted successfully"})),Ae()}catch{a({type:"error",message:"Failed to delete movie"})}finally{_e(!1),Z(!1),Le(null)}},w=async()=>{_e(!0);try{await C.bulkDeleteMovies(Array.from(h),fe),a({type:"success",message:`Deleted ${h.size} movies`}),p(new Set),v(!1),Ae()}catch{a({type:"error",message:"Failed to delete movies"})}finally{_e(!1),ye(!1),Ne(!1)}},A=async(M,oe)=>{oe.preventDefault(),oe.stopPropagation();try{await C.updateMovie(M.id,{monitored:!M.monitored}),c(le=>le.map(be=>be.id===M.id?{...be,monitored:!be.monitored}:be)),a({type:"success",message:`${M.title} ${M.monitored?"unmonitored":"monitored"}`})}catch{a({type:"error",message:"Failed to update monitor status"})}},ne=(M,oe)=>{oe.preventDefault(),oe.stopPropagation(),Le(M),Z(!0)},xe=()=>{ye(!0)},He=M=>M?{"2160p":"bg-purple-600","4K":"bg-purple-600","1080p":"bg-blue-600","720p":"bg-green-600","480p":"bg-yellow-600"}[M]||"bg-gray-600":null,B=[{value:"all",label:"All"},{value:"monitored",label:"Monitored Only"},{value:"unmonitored",label:"Unmonitored"},{value:"missing",label:"Missing"},{value:"wanted",label:"Wanted"},{value:"downloaded",label:"Downloaded"},{value:"cutoff_unmet",label:"Cutoff Unmet"}];return d?e.jsx(at,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})}):e.jsxs(at,{children:[e.jsxs("div",{className:"space-y-4 pr-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--text-primary)"},children:"Movies"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Browse and manage your media library"})]}),e.jsx(Ux,{totalItems:O.length,selectedCount:h.size,searchTerm:f,onSearchChange:j,filter:m,onFilterChange:u,filterOptions:B,customFilters:_,onCustomFiltersChange:Pe,qualityProfiles:R,viewMode:V,onViewModeChange:J,posterSize:Q,onPosterSizeChange:ce,selectMode:y,onSelectModeChange:M=>{v(M),M||p(new Set)},onSelectAll:ue,onDeleteSelected:xe,onMonitorSelected:ge,onUnmonitorSelected:H,onSearchSelected:re,searchingSelected:K,onOrganizeFolders:P,organizingFolders:Se,onSetProfile:L,settingProfile:Ie,onSetAvailability:S,settingAvailability:De,onRefresh:Ae,addLink:"/discover",addLabel:"Add Movie",importLink:"/settings?tab=import"}),O.length===0?e.jsxs("div",{className:"text-center py-12 ",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:f?"No movies match your search":"No movies in your library"}),e.jsx("a",{href:"/discover",className:"inline-block px-6 py-3 transition-colors",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:"Browse Movies to Add"})]}):V==="poster"?e.jsx("div",{className:`grid ${te.grid} gap-4`,children:me.map(M=>{const oe=M.title.charAt(0).toUpperCase(),le=/[A-Z]/.test(oe)?oe:"#",be=W[le]===M.id;return e.jsxs("div",{ref:we=>k.current[M.id]=we,"data-letter":le,className:`shadow hover:shadow-lg transition-shadow overflow-hidden group relative ${y&&h.has(M.id)?"ring-2 ring-primary-500":""} ${be?"scroll-mt-32":""}`,style:{backgroundColor:"var(--surface-bg)"},onClick:y?()=>D(M.id):void 0,children:[y&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("input",{type:"checkbox",checked:h.has(M.id),onChange:()=>D(M.id),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500",onClick:we=>we.stopPropagation()})}),e.jsxs("a",{href:`/movies/${M.id}`,className:"block",children:[e.jsxs("div",{className:"relative aspect-[2/3]",children:[M.poster_path?e.jsx("img",{src:Kt(M.poster_path,te.imgSize)||"",alt:M.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--hover-bg)"},children:e.jsx("span",{style:{color:"var(--text-muted)"},children:"No Poster"})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[!M.has_file&&M.download_status==="downloading"&&e.jsxs("span",{className:"px-2 py-1 bg-blue-500 text-white text-xs rounded animate-pulse",children:[Math.round(M.download_progress||0),"%"]}),!M.has_file&&M.download_status==="importing"&&e.jsx("span",{className:"px-2 py-1 bg-purple-500 text-white text-xs rounded animate-pulse",children:"Importing"}),!M.has_file&&M.download_status==="queued"&&e.jsx("span",{className:"px-2 py-1 bg-gray-500 text-white text-xs rounded",children:"Queued"}),!M.has_file&&!M.download_status&&M.monitored&&e.jsx("span",{className:"px-2 py-1 bg-yellow-500 text-white text-xs rounded",children:"Missing"}),M.quality&&e.jsx("span",{className:`px-2 py-1 text-white text-xs rounded ${He(M.quality)}`,children:M.quality})]}),!y&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:we=>A(M,we),className:`p-2 rounded-full ${M.monitored?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-600"} text-white`,title:M.monitored?"Unmonitor":"Monitor",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:M.monitored?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})}),e.jsx("button",{onClick:we=>ne(M.id,we),className:"p-2 rounded-full bg-red-500 hover:bg-red-600 text-white",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-medium text-sm truncate",style:{color:"var(--text-primary)"},children:M.title}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:M.year})]})]})]},M.id)})}):e.jsxs("div",{className:"border overflow-hidden",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("div",{className:"flex items-center justify-end px-3 py-2 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--table-header-bg)"},children:e.jsxs("div",{className:"relative","data-column-selector":!0,children:[e.jsxs("button",{onClick:()=>U(!$),className:"flex items-center gap-1.5 px-2 py-1 text-xs border rounded transition-colors",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-secondary)"},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),"Columns"]}),$&&e.jsx("div",{className:"absolute right-0 top-full mt-1 w-48 py-1 border shadow-xl z-50",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:T.map(M=>e.jsxs("label",{className:"flex items-center gap-2 px-3 py-1.5 cursor-pointer hover:bg-gray-700/30",children:[e.jsx("input",{type:"checkbox",checked:X[M.key],onChange:()=>z(M.key),className:"w-3.5 h-3.5 rounded border-gray-300 text-primary-600"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:M.label})]},M.key))})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:"var(--table-header-bg)"},children:e.jsxs("tr",{children:[y&&e.jsx("th",{className:"px-3 py-2 w-10",children:e.jsx("input",{type:"checkbox",checked:h.size===O.length&&O.length>0,onChange:ue,className:"w-4 h-4 rounded border-gray-300 text-primary-600"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase",style:{color:"var(--text-secondary)"},children:"Title"}),X.year&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-16",style:{color:"var(--text-secondary)"},children:"Year"}),X.quality&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Quality"}),X.size&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Size"}),X.runtime&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-20",style:{color:"var(--text-secondary)"},children:"Runtime"}),X.rating&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-16",style:{color:"var(--text-secondary)"},children:"Rating"}),X.qualityProfile&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-32",style:{color:"var(--text-secondary)"},children:"Profile"}),X.availability&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-28",style:{color:"var(--text-secondary)"},children:"Availability"}),X.added&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Added"}),X.monitored&&e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Monitored"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Actions"})]})}),e.jsx("tbody",{children:me.map(M=>{var oe;return e.jsxs("tr",{onClick:()=>y?D(M.id):r(`/movies/${M.id}`),className:"cursor-pointer border-t transition-colors",style:{borderColor:"var(--border-color)",backgroundColor:y&&h.has(M.id)?"var(--selected-bg)":void 0},onMouseEnter:le=>le.currentTarget.style.backgroundColor="var(--table-row-hover)",onMouseLeave:le=>le.currentTarget.style.backgroundColor=y&&h.has(M.id)?"var(--selected-bg)":"",children:[y&&e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:h.has(M.id),onChange:()=>D(M.id),onClick:le=>le.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-primary-600"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-12 overflow-hidden flex-shrink-0",style:{backgroundColor:"var(--hover-bg)"},children:M.poster_path&&e.jsx("img",{src:Kt(M.poster_path,"w92")||"",alt:"",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:M.title})]})}),X.year&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:M.year}),X.quality&&e.jsx("td",{className:"px-3 py-2",children:M.quality?e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium text-white rounded ${He(M.quality)}`,children:M.quality}):e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"-"})}),X.size&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:M.file_size?`${(M.file_size/(1024*1024*1024)).toFixed(2)} GB`:"-"}),X.runtime&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:M.runtime?`${M.runtime}m`:"-"}),X.rating&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:M.vote_average?M.vote_average.toFixed(1):"-"}),X.qualityProfile&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:((oe=R.find(le=>le.id===M.quality_profile_id))==null?void 0:oe.name)||"-"}),X.availability&&e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${M.minimum_availability==="released"?"bg-green-900/30 text-green-400":M.minimum_availability==="inCinemas"?"bg-yellow-900/30 text-yellow-400":"bg-gray-700 text-gray-400"}`,children:M.minimum_availability==="released"?"Released":M.minimum_availability==="inCinemas"?"In Cinemas":M.minimum_availability==="announced"?"Announced":"-"})}),X.added&&e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:M.created_at?new Date(M.created_at).toLocaleDateString():"-"}),X.monitored&&e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:le=>A(M,le),className:`px-2 py-1 text-xs rounded ${M.monitored?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:M.monitored?"Yes":"No"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:le=>ne(M.id,le),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},M.id)})})]})})]})]}),N<O.length&&e.jsx("div",{ref:F,className:"flex justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-2"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Loading more... (",N," of ",O.length,")"]})]})}),V==="poster"&&e.jsx(Zv,{letters:ve,activeLetter:b,onLetterClick:he}),e.jsx(Bc,{isOpen:G&&!!je,onClose:()=>{Z(!1),Le(null)},onConfirm:Y,title:"Delete Movie",itemName:((ae=o.find(M=>M.id===je))==null?void 0:ae.title)||"this movie",hasFiles:(ke=o.find(M=>M.id===je))==null?void 0:ke.has_file,showExclusionOption:!0}),e.jsx(cr,{isOpen:de,title:`Delete ${h.size} movies?`,message:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to delete ",h.size," movies? This cannot be undone."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe,onChange:M=>Ne(M.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Also delete files from disk"})]})]}),confirmText:ie?"Deleting...":fe?"Delete with Files":"Delete",onConfirm:w,onCancel:()=>{ye(!1),Ne(!1)},danger:!0})]})}const Fu={1:{grid:"grid-cols-[repeat(auto-fill,minmax(80px,80px))]",imgSize:"w154",minWidth:"80px"},2:{grid:"grid-cols-[repeat(auto-fill,minmax(100px,100px))]",imgSize:"w154",minWidth:"100px"},3:{grid:"grid-cols-[repeat(auto-fill,minmax(120px,120px))]",imgSize:"w185",minWidth:"120px"},4:{grid:"grid-cols-[repeat(auto-fill,minmax(140px,140px))]",imgSize:"w185",minWidth:"140px"},5:{grid:"grid-cols-[repeat(auto-fill,minmax(160px,160px))]",imgSize:"w300",minWidth:"160px"},6:{grid:"grid-cols-[repeat(auto-fill,minmax(180px,180px))]",imgSize:"w300",minWidth:"180px"},7:{grid:"grid-cols-[repeat(auto-fill,minmax(200px,200px))]",imgSize:"w342",minWidth:"200px"},8:{grid:"grid-cols-[repeat(auto-fill,minmax(220px,220px))]",imgSize:"w342",minWidth:"220px"},9:{grid:"grid-cols-[repeat(auto-fill,minmax(250px,250px))]",imgSize:"w500",minWidth:"250px"},10:{grid:"grid-cols-[repeat(auto-fill,minmax(280px,280px))]",imgSize:"w500",minWidth:"280px"}};function tb({letters:t,activeLetter:r,onLetterClick:s}){const a="#ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");return t.length===0?null:e.jsx("div",{className:"fixed right-1 top-1/2 -translate-y-1/2 z-[9999] flex flex-col items-center py-2 px-1 shadow-xl border",style:{backgroundColor:"var(--navbar-bg)",borderColor:"var(--border-color)"},children:a.map(n=>{const l=t.includes(n),o=r===n;return e.jsx("button",{onClick:()=>l&&s(n),disabled:!l,className:"w-7 h-6 text-xs font-semibold rounded transition-all flex items-center justify-center",style:{color:l?o?"white":"var(--navbar-text)":"var(--text-muted)",backgroundColor:o?"var(--navbar-bg)":"transparent",opacity:l?1:.4,cursor:l?"pointer":"default",filter:o?"brightness(1.5)":void 0},onMouseEnter:c=>{l&&!o&&(c.currentTarget.style.filter="brightness(1.3)")},onMouseLeave:c=>{o||(c.currentTarget.style.filter="")},children:n},n)})})}const Au=100,Du=100;function rb(){var ge;const t=yt(),[r]=zl(),{addToast:s}=vr(),{settings:a,updateSettings:n}=br(),[l,o]=i.useState([]),[c,d]=i.useState(!0),[x,m]=i.useState(()=>r.get("filter")||"all"),[u,f]=i.useState(""),[j,h]=i.useState(new Set),[p,y]=i.useState(!1),[v,b]=i.useState(null),g=i.useRef({}),[k,N]=i.useState(Au),E=i.useRef(null),[F,_]=i.useState([]),[q,R]=i.useState([]),se=a.viewMode||"poster",V=a.posterSize||5,Q=Fu[V]||Fu[5],te=H=>n({viewMode:H}),J=H=>n({posterSize:H}),[ce,$]=i.useState(!1),[U,X]=i.useState(!1),[T,z]=i.useState(null),[G,Z]=i.useState(!1),[de,ye]=i.useState(!1),[je,Le]=i.useState(!1),[fe,Ne]=i.useState(!1);i.useEffect(()=>{Fe(),ie(),_e()},[]);const ie=async()=>{try{const re=(await C.getQualityProfiles()).filter(P=>!P.media_type||P.media_type==="both"||P.media_type==="series");R(re)}catch(H){console.error("Failed to load quality profiles:",H)}},_e=()=>{const H=localStorage.getItem("customFilters_series");if(H)try{_(JSON.parse(H))}catch(re){console.error("Failed to parse custom filters:",re)}},K=H=>{localStorage.setItem("customFilters_series",JSON.stringify(H)),_(H)},Fe=async()=>{try{const H=await C.getSeries(),re=H.items||H;re.sort((P,L)=>P.title.localeCompare(L.title)),o(re)}catch(H){console.error("Failed to load series:",H)}finally{d(!1)}},Se=i.useMemo(()=>{const H=P=>{const L=(P||"").toLowerCase();let S=0;L.includes("2160")||L.includes("4k")||L.includes("uhd")?S=400:L.includes("1080")?S=300:L.includes("720")?S=200:(L.includes("480")||L.includes("sd"))&&(S=100);let Y=0;return L.includes("remux")?Y=50:L.includes("bluray")||L.includes("blu-ray")||L.includes("bdrip")||L.includes("brrip")?Y=40:L.includes("webdl")||L.includes("web-dl")||L.includes("web dl")?Y=30:L.includes("webrip")||L.includes("web-rip")||L.includes("web rip")?Y=25:L.includes("hdtv")?Y=20:(L.includes("dvd")||L.includes("sdtv"))&&(Y=10),S+Y},re=P=>{if(!P.quality_profile_id||P.downloaded_count===0)return!0;const L=q.find(S=>S.id===P.quality_profile_id);if(!L||!L.cutoff_quality)return!0;if(P.quality){const S=H(P.quality),Y=H(L.cutoff_quality);return S>=Y}return!0};return l.filter(P=>{const L=P.title.toLowerCase().includes(u.toLowerCase()),S=P.downloaded_count===P.episode_count&&P.episode_count>0;let Y=!0;if(x==="all")Y=!0;else if(x==="monitored")Y=P.monitored;else if(x==="unmonitored")Y=!P.monitored;else if(x==="missing")Y=!S;else if(x==="wanted")Y=P.monitored&&!S;else if(x==="downloaded")Y=S;else if(x==="cutoff_unmet")Y=P.downloaded_count>0&&!re(P);else if(x.startsWith("custom_")){const w=F.find(A=>A.id===x);if(w){const{conditions:A}=w;A.monitored!==void 0&&P.monitored!==A.monitored&&(Y=!1),A.hasFile!==void 0&&S!==A.hasFile&&(Y=!1),A.cutoffMet!==void 0&&(P.downloaded_count===0||re(P)!==A.cutoffMet)&&(Y=!1),A.qualityProfileId&&P.quality_profile_id!==A.qualityProfileId&&(Y=!1),A.minYear&&P.year<A.minYear&&(Y=!1),A.maxYear&&P.year>A.maxYear&&(Y=!1)}}return L&&Y})},[l,u,x,F,q]),Re=i.useMemo(()=>{const H=new Set;return Se.forEach(re=>{const P=re.title.charAt(0).toUpperCase(),L=/[A-Z]/.test(P)?P:"#";H.add(L)}),Array.from(H).sort((re,P)=>re==="#"?-1:P==="#"?1:re.localeCompare(P))},[Se]),Ie=i.useMemo(()=>{const H={};return Se.forEach(re=>{const P=re.title.charAt(0).toUpperCase(),L=/[A-Z]/.test(P)?P:"#";H[L]||(H[L]=re.id)}),H},[Se]);i.useEffect(()=>{const H=()=>{const re=window.scrollY+200;let P=null;for(const L of Re){const S=Ie[L];if(S){const Y=g.current[S];Y&&Y.offsetTop<=re&&(P=L)}}b(P)};return window.addEventListener("scroll",H),()=>window.removeEventListener("scroll",H)},[Re,Ie]);const Oe=i.useCallback(H=>{const re=Ie[H];if(re){const P=Se.findIndex(L=>L.id===re);if(P>=0)if(P>=k)N(P+Du),setTimeout(()=>{const L=g.current[re];L&&L.scrollIntoView({behavior:"smooth",block:"start"})},50);else{const L=g.current[re];L&&L.scrollIntoView({behavior:"smooth",block:"start"})}}},[Ie,Se,k]);i.useEffect(()=>{N(Au)},[x,u]),i.useEffect(()=>{const H=new IntersectionObserver(re=>{re[0].isIntersecting&&k<Se.length&&N(P=>Math.min(P+Du,Se.length))},{threshold:.1,rootMargin:"200px"});return E.current&&H.observe(E.current),()=>H.disconnect()},[k,Se.length]);const De=i.useMemo(()=>Se.slice(0,k),[Se,k]),I=H=>{const re=new Set(j);re.has(H)?re.delete(H):re.add(H),h(re)},Ce=()=>{j.size===Se.length?h(new Set):h(new Set(Se.map(H=>H.id)))},Te=async()=>{if(j.size!==0)try{const H=Array.from(j);await C.bulkUpdateSeries(H,{monitored:!0}),o(re=>re.map(P=>j.has(P.id)?{...P,monitored:!0}:P)),s({type:"success",message:`Monitored ${j.size} series`}),h(new Set),y(!1)}catch{s({type:"error",message:"Failed to update monitor status"})}},Pe=async()=>{if(j.size!==0)try{const H=Array.from(j);await C.bulkUpdateSeries(H,{monitored:!1}),o(re=>re.map(P=>j.has(P.id)?{...P,monitored:!1}:P)),s({type:"success",message:`Unmonitored ${j.size} series`}),h(new Set),y(!1)}catch{s({type:"error",message:"Failed to update monitor status"})}},Ae=async()=>{if(j.size!==0){Le(!0);try{const H=Array.from(j),re=await C.bulkSearchSeries(H);s({type:"success",message:`Search complete: ${re.totalFound} episodes found across ${re.seriesSearched} series`}),h(new Set),y(!1)}catch{s({type:"error",message:"Failed to search series"})}finally{Le(!1)}}},O=async H=>{var re;if(j.size!==0){Ne(!0);try{const P=Array.from(j);await C.bulkUpdateSeries(P,{quality_profile_id:H});const L=((re=q.find(S=>S.id===H))==null?void 0:re.name)||"profile";s({type:"success",message:`Set ${P.length} series to ${L}`}),h(new Set),y(!1),Fe()}catch{s({type:"error",message:"Failed to set profile"})}finally{Ne(!1)}}},ve=async(H,re)=>{ye(!0);try{T&&(await C.deleteSeries(T,H,re),s({type:"success",message:"Series deleted successfully"})),Fe()}catch{s({type:"error",message:"Failed to delete series"})}finally{ye(!1),$(!1),z(null)}},W=async()=>{ye(!0);try{await C.bulkDeleteSeries(Array.from(j),G),s({type:"success",message:`Deleted ${j.size} series`}),h(new Set),y(!1),Fe()}catch{s({type:"error",message:"Failed to delete series"})}finally{ye(!1),X(!1),Z(!1)}},he=async(H,re)=>{re.preventDefault(),re.stopPropagation();try{await C.updateSeries(H.id,{monitored:!H.monitored}),o(P=>P.map(L=>L.id===H.id?{...L,monitored:!L.monitored}:L)),s({type:"success",message:`${H.title} ${H.monitored?"unmonitored":"monitored"}`})}catch{s({type:"error",message:"Failed to update monitor status"})}},me=(H,re)=>{re.preventDefault(),re.stopPropagation(),z(H),$(!0)},D=()=>{X(!0)},ue=[{value:"all",label:"All"},{value:"monitored",label:"Monitored Only"},{value:"unmonitored",label:"Unmonitored"},{value:"missing",label:"Missing"},{value:"wanted",label:"Wanted"},{value:"downloaded",label:"Complete"},{value:"cutoff_unmet",label:"Cutoff Unmet"}];return c?e.jsx(at,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})}):e.jsxs(at,{children:[e.jsxs("div",{className:"space-y-4 pr-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",style:{color:"var(--text-primary)"},children:"TV Series"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Browse and manage your media library"})]}),e.jsx(Ux,{totalItems:Se.length,selectedCount:j.size,searchTerm:u,onSearchChange:f,filter:x,onFilterChange:m,filterOptions:ue,customFilters:F,onCustomFiltersChange:K,qualityProfiles:q,viewMode:se,onViewModeChange:te,posterSize:V,onPosterSizeChange:J,selectMode:p,onSelectModeChange:H=>{y(H),H||h(new Set)},onSelectAll:Ce,onDeleteSelected:D,onMonitorSelected:Te,onUnmonitorSelected:Pe,onSearchSelected:Ae,searchingSelected:je,onSetProfile:O,settingProfile:fe,onRefresh:Fe,addLink:"/discover?category=tv",addLabel:"Add Series",importLink:"/settings?tab=import"}),Se.length===0?e.jsxs("div",{className:"text-center py-12 ",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:u?"No series match your search":"No series in your library"}),e.jsx("a",{href:"/discover?category=tv",className:"inline-block px-6 py-3 transition-colors",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)"},children:"Browse Series to Add"})]}):se==="poster"?e.jsx("div",{className:`grid ${Q.grid} gap-4`,children:De.map(H=>{const re=H.title.charAt(0).toUpperCase(),P=/[A-Z]/.test(re)?re:"#",L=Ie[P]===H.id;return e.jsxs("div",{ref:S=>g.current[H.id]=S,"data-letter":P,className:`shadow hover:shadow-lg transition-shadow overflow-hidden group relative cursor-pointer ${p&&j.has(H.id)?"ring-2 ring-primary-500":""} ${L?"scroll-mt-32":""}`,style:{backgroundColor:"var(--surface-bg)"},onClick:p?()=>I(H.id):()=>t(`/series/${H.id}`),children:[p&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx("input",{type:"checkbox",checked:j.has(H.id),onChange:()=>I(H.id),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500",onClick:S=>S.stopPropagation()})}),e.jsxs("div",{className:"relative aspect-[2/3]",children:[H.poster_path?e.jsx("img",{src:Kt(H.poster_path,Q.imgSize)||"",alt:H.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--hover-bg)"},children:e.jsx("span",{style:{color:"var(--text-muted)"},children:"No Poster"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("span",{className:`px-2 py-1 text-white text-xs rounded ${H.downloaded_count===H.episode_count&&H.episode_count>0?"bg-green-500":H.downloaded_count>0?"bg-yellow-500":"bg-red-500"}`,children:[H.downloaded_count||0,"/",H.episode_count||0]})}),!p&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:S=>he(H,S),className:`p-2 rounded-full ${H.monitored?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-600"} text-white`,title:H.monitored?"Unmonitor":"Monitor",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.monitored?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})}),e.jsx("button",{onClick:S=>me(H.id,S),className:"p-2 rounded-full bg-red-500 hover:bg-red-600 text-white",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-medium text-sm truncate",style:{color:"var(--text-primary)"},children:H.title}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:H.year})]})]},H.id)})}):e.jsx("div",{className:"border overflow-hidden",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{style:{backgroundColor:"var(--table-header-bg)"},children:e.jsxs("tr",{children:[p&&e.jsx("th",{className:"px-3 py-2 w-10",children:e.jsx("input",{type:"checkbox",checked:j.size===Se.length&&Se.length>0,onChange:Ce,className:"w-4 h-4 rounded border-gray-300 text-primary-600"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase",style:{color:"var(--text-secondary)"},children:"Title"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-16",style:{color:"var(--text-secondary)"},children:"Year"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-28",style:{color:"var(--text-secondary)"},children:"Network"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Episodes"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Size"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Monitored"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium uppercase w-24",style:{color:"var(--text-secondary)"},children:"Actions"})]})}),e.jsx("tbody",{children:De.map(H=>e.jsxs("tr",{onClick:()=>p?I(H.id):t(`/series/${H.id}`),className:"cursor-pointer border-t transition-colors",style:{borderColor:"var(--border-color)",backgroundColor:p&&j.has(H.id)?"var(--selected-bg)":void 0},onMouseEnter:re=>re.currentTarget.style.backgroundColor="var(--table-row-hover)",onMouseLeave:re=>re.currentTarget.style.backgroundColor=p&&j.has(H.id)?"var(--selected-bg)":"",children:[p&&e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:j.has(H.id),onChange:()=>I(H.id),onClick:re=>re.stopPropagation(),className:"w-4 h-4 rounded border-gray-300 text-primary-600"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-12 overflow-hidden flex-shrink-0",style:{backgroundColor:"var(--hover-bg)"},children:H.poster_path&&e.jsx("img",{src:Kt(H.poster_path,"w92")||"",alt:"",className:"w-full h-full object-cover"})}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:H.title})]})}),e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:H.year}),e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:H.network||"-"}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("span",{className:`text-sm ${H.downloaded_count===H.episode_count&&H.episode_count>0?"text-green-600 dark:text-green-400":H.downloaded_count>0?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[H.downloaded_count||0,"/",H.episode_count||0]})}),e.jsx("td",{className:"px-3 py-2 text-sm",style:{color:"var(--text-secondary)"},children:H.total_size?`${(H.total_size/(1024*1024*1024)).toFixed(2)} GB`:"-"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:re=>he(H,re),className:`px-2 py-1 text-xs rounded ${H.monitored?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:H.monitored?"Yes":"No"})}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx("button",{onClick:re=>me(H.id,re),className:"p-1 text-red-500 hover:text-red-700 rounded",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},H.id))})]})})})]}),k<Se.length&&e.jsx("div",{ref:E,className:"flex justify-center py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full mx-auto mb-2"}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Loading more... (",k," of ",Se.length,")"]})]})}),se==="poster"&&e.jsx(tb,{letters:Re,activeLetter:v,onLetterClick:Oe}),e.jsx(Bc,{isOpen:ce&&!!T,onClose:()=>{$(!1),z(null)},onConfirm:ve,title:"Delete Series",itemName:((ge=l.find(H=>H.id===T))==null?void 0:ge.title)||"this series",hasFiles:!0,showExclusionOption:!0,isSeries:!0}),e.jsx(cr,{isOpen:U,title:`Delete ${j.size} series?`,message:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to delete ",j.size," series? This cannot be undone."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:H=>Z(H.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Also delete files from disk"})]})]}),confirmText:de?"Deleting...":G?"Delete with Files":"Delete",onConfirm:W,onCancel:()=>{X(!1),Z(!1)},danger:!0})]})}function sb(){const t=yt(),[r,s]=i.useState([]),[a,n]=i.useState(!0),[l,o]=i.useState("calendar"),[c,d]=i.useState("upcoming"),[x,m]=i.useState(new Date);i.useEffect(()=>{u()},[c,x]);const u=async()=>{n(!0);try{if(c==="missing"){const F=await C.getMissingEpisodes();s((F||[]).filter(_=>_.season_number!==0).map(_=>({..._,type:"episode"})))}else{const F=new Date(x.getFullYear(),x.getMonth(),1),_=new Date(x.getFullYear(),x.getMonth()+1,0),q=await C.getUpcomingEpisodes(F.toISOString().split("T")[0],_.toISOString().split("T")[0]);s((q||[]).filter(R=>R.type==="movie"||R.season_number!==0))}}catch(F){console.error("Failed to load calendar items:",F)}finally{n(!1)}},f=()=>{const F=x.getFullYear(),_=x.getMonth(),q=new Date(F,_,1),R=new Date(F,_+1,0),se=[],V=q.getDay();for(let te=V-1;te>=0;te--){const J=new Date(F,_,-te);se.push({date:J,isCurrentMonth:!1})}for(let te=1;te<=R.getDate();te++)se.push({date:new Date(F,_,te),isCurrentMonth:!0});const Q=35-se.length;for(let te=1;te<=Math.max(0,Q);te++){const J=new Date(F,_+1,te);se.push({date:J,isCurrentMonth:!1})}return se.slice(0,35)},j=F=>{const _=F.toISOString().split("T")[0];return r.filter(q=>q.air_date===_)},h=F=>{const _=new Date;return F.toDateString()===_.toDateString()},p=F=>{if(!F||F==="Unknown")return"TBA";const _=new Date(F),q=new Date,R=new Date(q);return R.setDate(q.getDate()+1),_.toDateString()===q.toDateString()?"Today":_.toDateString()===R.toDateString()?"Tomorrow":_.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},y=F=>{const _={};return F.forEach(q=>{const R=q.air_date||"Unknown";_[R]||(_[R]=[]),_[R].push(q)}),_},v=()=>{m(new Date(x.getFullYear(),x.getMonth()-1,1))},b=()=>{m(new Date(x.getFullYear(),x.getMonth()+1,1))},g=()=>{m(new Date)},k=f(),N=y(r),E=Object.keys(N).sort();return e.jsx(at,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Calendar"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Track upcoming movies and episodes"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 overflow-hidden",children:[e.jsx("button",{onClick:()=>o("calendar"),className:`px-3 py-1.5 text-sm ${l==="calendar"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("button",{onClick:()=>o("list"),className:`px-3 py-1.5 text-sm ${l==="list"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-1",children:[e.jsx("button",{onClick:()=>d("upcoming"),className:`px-3 py-1 text-sm rounded ${c==="upcoming"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Upcoming"}),e.jsx("button",{onClick:()=>d("missing"),className:`px-3 py-1 text-sm rounded ${c==="missing"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Missing"})]}),l==="calendar"&&c!=="missing"&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:g,className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:"Today"}),e.jsx("button",{onClick:v,className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white min-w-[140px] text-center",children:x.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:b,className:"p-1.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--theme-primary)"}})}):l==="calendar"&&c!=="missing"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",style:{height:"calc(100vh - 220px)"},children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(F=>e.jsx("div",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900",children:F},F))}),e.jsx("div",{className:"grid grid-cols-7 flex-1 auto-rows-fr overflow-hidden",children:k.map((F,_)=>{const q=j(F.date),R=h(F.date),se=4,V=q.slice(0,se),Q=q.length-se;return e.jsxs("div",{className:`p-1 border-b border-r border-gray-200 dark:border-gray-700 flex flex-col overflow-hidden ${F.isCurrentMonth?"":"bg-gray-50 dark:bg-gray-900/50"} ${R?"bg-primary-50 dark:bg-primary-900/20":""}`,children:[e.jsx("div",{className:`text-xs font-medium mb-0.5 flex-shrink-0 ${R?"text-primary-600 dark:text-primary-400":F.isCurrentMonth?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}`,children:F.date.getDate()}),e.jsxs("div",{className:"space-y-0.5 flex-1 overflow-hidden",children:[V.map(te=>{const J=te.type==="movie",ce=te,$=te;return e.jsx("div",{onClick:()=>t(J?`/movies/${$.id}`:`/series/${ce.series_id}`),className:`text-xs px-1.5 py-1 rounded cursor-pointer leading-tight ${te.has_file?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":te.monitored?J?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,title:J?`${$.title} (${$.year})`:`${ce.series_title} S${ce.season_number}E${ce.episode_number}`,children:J?` ${$.title}`:ce.series_title},te.id)}),Q>0&&e.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-gray-500 px-1",children:["+",Q," more"]})]})]},_)})})]}):e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"mx-auto h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("h3",{className:"mt-3 text-sm font-medium text-gray-900 dark:text-white",children:"No items"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:c==="missing"?"No missing episodes found":"No upcoming releases this month"})]}):E.map(F=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:p(F)})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:N[F].map(_=>{const q=_.type==="movie",R=_,se=_;return e.jsx("div",{onClick:()=>t(q?`/movies/${se.id}`:`/series/${R.series_id}`),className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[q?se.poster_path&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${se.poster_path}`,alt:se.title,className:"w-10 h-14 object-cover rounded"}):R.series_poster&&e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${R.series_poster}`,alt:R.series_title,className:"w-10 h-14 object-cover rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white truncate flex items-center gap-2",children:[q&&e.jsx("span",{className:"text-xs",children:""}),q?se.title:R.series_title]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:q?`Movie Release${se.year?` (${se.year})`:""}`:`S${R.season_number.toString().padStart(2,"0")}E${R.episode_number.toString().padStart(2,"0")}: ${R.title}`})]}),e.jsx("div",{children:_.has_file?e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:"Downloaded"}):_.monitored?e.jsx("span",{className:`px-2 py-1 text-xs rounded ${q?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:q?"Awaiting Release":"Missing"}):e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:"Unmonitored"})})]})},_.id)})})]},F))})]})})}function ab({profile:t,onSave:r,onClose:s,isNew:a=!1}){const[n,l]=i.useState((t==null?void 0:t.name)||""),[o,c]=i.useState((t==null?void 0:t.media_type)||"both"),[d,x]=i.useState((t==null?void 0:t.upgrade_allowed)??!0),[m,u]=i.useState((t==null?void 0:t.cutoff_quality)||"Bluray-1080p"),[f,j]=i.useState([]),[h,p]=i.useState([]),[y,v]=i.useState(!1),[b,g]=i.useState(!1),[k,N]=i.useState(null);i.useEffect(()=>{E()},[t==null?void 0:t.id]);const E=async()=>{try{const ce=(await C.getQualityDefinitions()).sort(($,U)=>U.weight-$.weight);if(p(ce),t!=null&&t.items&&t.items.length>0){const $=t.items.map(T=>({quality:T.quality,allowed:!0})),U=new Set(t.items.map(T=>T.quality)),X=ce.filter(T=>!U.has(T.name)).map(T=>({quality:T.name,allowed:!1}));j([...$,...X])}else{const $=ce.map(U=>({quality:U.name,allowed:!1}));j($)}}catch(J){console.error("Failed to load quality definitions:",J)}},F=J=>{j(ce=>ce.map($=>$.quality===J?{...$,allowed:!$.allowed}:$))},_=f.filter(J=>J.allowed).map(J=>J.quality);i.useEffect(()=>{if(_.length>0){const J=f.find(ce=>ce.allowed);J&&m!==J.quality&&(_.includes(m)||u(J.quality))}},[_.join(",")]);const q=(J,ce)=>{N(ce),J.dataTransfer.effectAllowed="move",J.dataTransfer.setData("text/html","")},R=(J,ce)=>{if(J.preventDefault(),k===null||k===ce)return;const $=[...f],U=$[k];$.splice(k,1),$.splice(ce,0,U),j($),N(ce)},se=()=>{N(null)},V=async()=>{if(n.trim()){v(!0);try{const J={name:n,media_type:o,cutoff_quality:m,upgrade_allowed:d,items:f.filter($=>$.allowed)};let ce;a?ce=await C.createQualityProfile(J):t!=null&&t.id&&(ce=await C.updateQualityProfile(t.id,J)),ce&&r(ce),s()}catch(J){console.error("Failed to save profile:",J)}finally{v(!1)}}},Q=async()=>{if(t!=null&&t.id)try{await C.deleteQualityProfile(t.id),r(t),s()}catch(J){console.error("Failed to delete profile:",J)}},te=J=>h.find(ce=>ce.name===J);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-gray-800 w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:a?"Add Quality Profile":"Edit Quality Profile"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:n,onChange:J=>l(J.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Profile Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Media Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c("movie"),className:"px-4 py-2 text-sm font-medium transition-colors",style:{backgroundColor:o==="movie"?"#7fc8f8":void 0,color:o==="movie"?"#000":void 0},children:"Movies"}),e.jsx("button",{type:"button",onClick:()=>c("series"),className:"px-4 py-2 text-sm font-medium transition-colors",style:{backgroundColor:o==="series"?"#ea9ab2":void 0,color:o==="series"?"#000":void 0},children:"Series"}),e.jsx("button",{type:"button",onClick:()=>c("both"),className:"px-4 py-2 text-sm font-medium transition-colors",style:{backgroundColor:o==="both"?"#ffe45e":void 0,color:o==="both"?"#000":void 0},children:"Both"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Filter which media types this profile is available for"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:J=>x(J.target.checked),className:"w-4 h-4 rounded border-gray-600 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Upgrades Allowed"})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"If disabled qualities will not be upgraded"})]}),d&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Upgrade Until"}),e.jsx("select",{value:m,onChange:J=>u(J.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white focus:ring-2 focus:ring-primary-500",children:_.length>0?_.map(J=>e.jsx("option",{value:J,children:J},J)):e.jsx("option",{value:"",children:"Select qualities below first"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Once this quality is reached, no further upgrades will occur"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Qualities ",e.jsx("span",{className:"text-xs text-gray-500",children:"(drag to reorder priority)"})]}),e.jsx("div",{className:"bg-gray-900 border border-gray-700 max-h-80 overflow-y-auto",children:f.map((J,ce)=>{const $=te(J.quality);return $?e.jsxs("div",{draggable:!0,onDragStart:U=>q(U,ce),onDragOver:U=>R(U,ce),onDragEnd:se,className:`flex items-center justify-between px-3 py-2 border-b border-gray-700 last:border-b-0 hover:bg-gray-800 transition-colors cursor-move ${k===ce?"bg-gray-700 opacity-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsx("input",{type:"checkbox",checked:J.allowed,onChange:()=>F(J.quality),onClick:U=>U.stopPropagation(),className:"w-4 h-4 rounded border-gray-600 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:`${J.allowed?"text-white":"text-gray-500"}`,children:$.title}),$.name.includes("WEB")&&e.jsxs("span",{className:"flex gap-1",children:[e.jsxs("span",{className:"px-1.5 py-0.5 text-xs bg-gray-700 text-gray-300 rounded",children:["WEBRip-",$.resolution]}),e.jsxs("span",{className:"px-1.5 py-0.5 text-xs bg-gray-700 text-gray-300 rounded",children:["WEBDL-",$.resolution]})]})]}),J.allowed&&e.jsxs("span",{className:"text-xs text-gray-500",children:["#",_.indexOf(J.quality)+1]})]},J.quality):null})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Higher items have higher priority. Drag to change the order. Items at the top will be preferred."})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex justify-between",children:[e.jsx("div",{children:!a&&t&&e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 text-red-500 hover:text-red-400 transition-colors",children:"Delete"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:y||!n.trim(),className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?"Saving...":"Save"})]})]})]})}),e.jsx(cr,{isOpen:b,title:"Delete Quality Profile",message:`Are you sure you want to delete "${t==null?void 0:t.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:Q,onCancel:()=>g(!1)})]})}const _o={name:"qBittorrent",type:"qbittorrent",enabled:!0,host:"localhost",port:8080,use_ssl:!1,url_base:"",username:"",password:"",category:"mediastack",category_movies:"",category_tv:"",priority:1,remove_completed:!0,remove_failed:!0,tags:""},nb={name:"SABnzbd",type:"sabnzbd",enabled:!0,host:"localhost",port:8080,use_ssl:!1,url_base:"",api_key:"",category:"",category_movies:"movies",category_tv:"tv",priority:1,remove_completed:!0,remove_failed:!0,tags:""};function lb({onToast:t}){const[r,s]=i.useState([]),[a,n]=i.useState(!0),[l,o]=i.useState(!1),[c,d]=i.useState(!1),[x,m]=i.useState(null),[u,f]=i.useState(_o),[j,h]=i.useState(!1),[p,y]=i.useState(null),[v,b]=i.useState(!1),[g,k]=i.useState(null),[N,E]=i.useState(!0),[F,_]=i.useState(!1),[q,R]=i.useState(!0),[se,V]=i.useState(!1),[Q,te]=i.useState([]),[J,ce]=i.useState(!1),[$,U]=i.useState(!1);i.useEffect(()=>{ye(),X(),T()},[]);const X=async()=>{try{const K=await C.getSettings();E(K.redownload_failed!=="false"&&K.redownload_failed!==!1)}catch(K){console.error("Failed to load redownload setting:",K)}},T=async()=>{try{const K=await C.getSettings();R(K.auto_import_enabled!=="false"&&K.auto_import_enabled!==!1)}catch(K){console.error("Failed to load auto-import setting:",K)}},z=async()=>{_(!0);try{const K=!N;await C.updateSetting("redownload_failed",String(K)),E(K),t(`Redownload failed ${K?"enabled":"disabled"}`,"success")}catch(K){console.error("Failed to update redownload setting:",K),t("Failed to update setting","error")}finally{_(!1)}},G=async()=>{V(!0);try{const K=!q;await C.updateSetting("auto_import_enabled",String(K)),R(K),t(`Auto-import ${K?"enabled":"disabled"}`,"success")}catch(K){console.error("Failed to update auto-import setting:",K),t("Failed to update setting","error")}finally{V(!1)}},Z=async()=>{ce(!0);try{const K=await C.getBlacklist();te(K)}catch(K){console.error("Failed to load blacklist:",K)}finally{ce(!1)}},de=async K=>{try{await C.removeFromBlacklist(K),te(Fe=>Fe.filter(Se=>Se.id!==K)),t("Release removed from blacklist","success")}catch(Fe){console.error("Failed to remove from blacklist:",Fe),t("Failed to remove from blacklist","error")}},ye=async()=>{try{const K=await C.getDownloadClients();s(K)}catch(K){console.error("Failed to load download clients:",K)}finally{n(!1)}},je=K=>{f(K==="qbittorrent"?{..._o}:{...nb}),m(null),y(null),d(!1),o(!0)},Le=K=>{f({...K}),m(K),y(null),o(!0)},fe=()=>{o(!1),d(!1),m(null),f(_o),y(null)},Ne=async()=>{var K,Fe;h(!0),y(null);try{const Se=await C.testDownloadClient({type:u.type,host:u.host||"",port:u.port||8080,use_ssl:u.use_ssl,url_base:u.url_base||void 0,username:u.username||void 0,password:u.password||void 0,api_key:u.api_key||void 0});y(Se)}catch(Se){y({success:!1,message:((Fe=(K=Se.response)==null?void 0:K.data)==null?void 0:Fe.error)||"Test failed"})}finally{h(!1)}},ie=async()=>{var K,Fe;if(!u.name||!u.host||!u.port){t("Please fill in all required fields","error");return}if(!(p!=null&&p.success)){t("Please test the connection first","error");return}b(!0);try{x?(await C.updateDownloadClient(x.id,u),t("Download client updated successfully","success")):(await C.addDownloadClient(u),t("Download client added successfully","success")),await ye(),fe()}catch(Se){t(((Fe=(K=Se.response)==null?void 0:K.data)==null?void 0:Fe.error)||"Failed to save download client","error")}finally{b(!1)}},_e=async K=>{try{await C.deleteDownloadClient(K.id),t("Download client deleted","success"),await ye(),fe()}catch{t("Failed to delete download client","error")}k(null)};return a?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Download Clients"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure your torrent and usenet download clients"})]}),e.jsx(Ee,{onClick:()=>d(!0),children:"Add Client"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Host"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Priority"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:r.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:'No download clients configured. Click "Add Client" to get started.'})}):r.map(K=>e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>Le(K),children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:K.name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${K.type==="qbittorrent"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:K.type})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[K.host,":",K.port]})}),e.jsx("td",{className:"px-4 py-4",children:K.priority===1?e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",children:"Primary"}):e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:K.priority})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${K.enabled?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:K.enabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),k(K)},className:"p-1.5 text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Delete download client",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},K.id))})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4 mt-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Completed Download Handling"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("button",{onClick:G,disabled:se,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${q?"bg-green-500":"bg-gray-300 dark:bg-gray-600"} ${se?"opacity-50 cursor-wait":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${q?"translate-x-4":"translate-x-0.5"}`})}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-medium ${q?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:"Auto-Import"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:q?"Completed downloads are automatically imported":"Downloads must be manually imported"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("button",{onClick:z,disabled:F,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${N?"bg-green-500":"bg-gray-300 dark:bg-gray-600"} ${F?"opacity-50 cursor-wait":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${N?"translate-x-4":"translate-x-0.5"}`})}),e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-medium ${N?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:"Redownload Failed"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:N?"Failed downloads are blacklisted and alternative releases are automatically searched":"Failed downloads must be manually re-searched"})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Blacklisted Releases"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Failed releases that won't be grabbed again"})]}),e.jsxs("button",{onClick:()=>{U(!$),!$&&Q.length===0&&Z()},className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",style:{color:"var(--text-primary)"},children:[$?"Hide":"Show"," (",Q.length,")"]})]}),$&&e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"max-h-96 overflow-y-auto",children:J?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{borderColor:"var(--navbar-bg)"}}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading..."})]}):Q.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("p",{children:"No blacklisted releases"}),e.jsx("p",{className:"text-sm mt-1",children:'Failed downloads will appear here when "Redownload Failed" is enabled'})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Q.map(K=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center flex-shrink-0 ${K.movie_id?"bg-purple-100 dark:bg-purple-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:K.movie_id?e.jsx("svg",{className:"w-4 h-4 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}):e.jsx("svg",{className:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:[K.movie_title||K.series_title||"Unknown",K.series_id&&K.season_number!==void 0&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["S",String(K.season_number).padStart(2,"0"),K.episode_number!==void 0&&`E${String(K.episode_number).padStart(2,"0")}`]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",title:K.release_title,children:K.release_title}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[K.indexer&&e.jsxs("span",{children:[K.indexer,"  "]}),K.reason||"Download failed"]})]})]}),e.jsx("button",{onClick:()=>de(K.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors flex-shrink-0",title:"Remove from blacklist",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},K.id))})})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md shadow-xl",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Add Download Client"}),e.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-gray-700 rounded transition-colors",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("button",{onClick:()=>je("sabnzbd"),className:"w-full p-4 border rounded-lg text-left hover:border-amber-500 hover:bg-amber-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-amber-500 text-white font-bold text-lg shrink-0",children:"S"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"SABnzbd"}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium uppercase bg-amber-600/20 text-amber-400 rounded",children:"Usenet"})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Open source usenet downloader with web interface"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),e.jsx("button",{onClick:()=>je("qbittorrent"),className:"w-full p-4 border rounded-lg text-left hover:border-blue-500 hover:bg-blue-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-600 text-white font-bold text-lg shrink-0",children:"qB"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"qBittorrent"}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium uppercase bg-blue-600/20 text-blue-400 rounded",children:"Torrent"})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Free and reliable BitTorrent client with web UI"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:x?`Edit ${u.type==="qbittorrent"?"qBittorrent":"SABnzbd"}`:`Add ${u.type==="qbittorrent"?"qBittorrent":"SABnzbd"}`}),e.jsx("button",{onClick:fe,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx($e,{value:u.name||"",onChange:K=>f({...u,name:K.target.value}),placeholder:"My Download Client",className:"dark:bg-gray-700"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.enabled!==!1,onChange:K=>f({...u,enabled:K.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Host"}),e.jsx($e,{value:u.host||"",onChange:K=>f({...u,host:K.target.value}),placeholder:"localhost",className:"dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Port"}),e.jsx($e,{type:"number",value:u.port||"",onChange:K=>f({...u,port:parseInt(K.target.value)||0}),placeholder:"8080",className:"dark:bg-gray-700"})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.use_ssl||!1,onChange:K=>f({...u,use_ssl:K.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use SSL (HTTPS)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL Base"}),e.jsx($e,{value:u.url_base||"",onChange:K=>f({...u,url_base:K.target.value}),placeholder:"/api (optional)",className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Adds a prefix to the URL, such as http://[host]:[port]/[urlBase]/api"})]}),u.type==="qbittorrent"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username"}),e.jsx($e,{value:u.username||"",onChange:K=>f({...u,username:K.target.value}),placeholder:"admin",className:"dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),e.jsx($e,{type:"password",value:u.password||"",onChange:K=>f({...u,password:K.target.value}),placeholder:"",className:"dark:bg-gray-700"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),e.jsx($e,{type:"password",value:u.api_key||"",onChange:K=>f({...u,api_key:K.target.value}),placeholder:"Your SABnzbd API Key",className:"dark:bg-gray-700"})]}),u.type==="qbittorrent"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx($e,{value:u.category||"",onChange:K=>f({...u,category:K.target.value}),placeholder:"mediastack",className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Adding a category specific to MediaStack avoids conflicts with other downloads"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Movies Category"}),e.jsx($e,{value:u.category_movies||"",onChange:K=>f({...u,category_movies:K.target.value}),placeholder:"movies",className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"SABnzbd category for movie downloads"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"TV Category"}),e.jsx($e,{value:u.category_tv||"",onChange:K=>f({...u,category_tv:K.target.value}),placeholder:"tv",className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"SABnzbd category for TV show downloads"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client Priority"}),e.jsx($e,{type:"number",value:u.priority||1,onChange:K=>f({...u,priority:parseInt(K.target.value)||1}),min:1,max:50,className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Download Client Priority from 1 (Highest) to 50 (Lowest). Default: 1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.remove_completed!==!1,onChange:K=>f({...u,remove_completed:K.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remove Completed"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.remove_failed!==!1,onChange:K=>f({...u,remove_failed:K.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remove Failed"})]})]}),p&&e.jsx("div",{className:`p-3 ${p.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:p.message})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:Ne,disabled:j||!u.host,children:j?"Testing...":"Test"}),x&&e.jsx(Ee,{variant:"secondary",onClick:()=>k(x),className:"text-red-600 hover:text-red-700",children:"Delete"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:fe,children:"Cancel"}),e.jsx(Ee,{onClick:ie,disabled:v||!(p!=null&&p.success)&&u.enabled!==!1,title:!(p!=null&&p.success)&&u.enabled!==!1?"Test connection first":"",children:v?"Saving...":p!=null&&p.success||u.enabled===!1?"Save":"Test First"})]})]})]})}),e.jsx(cr,{isOpen:!!g,title:"Delete Download Client",message:`Are you sure you want to delete "${g==null?void 0:g.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:()=>g&&_e(g),onCancel:()=>k(null)})]})}const Mo={name:"Prowlarr",type:"torznab",enabled:!0,enableRss:!0,enableAutomaticSearch:!0,enableInteractiveSearch:!0,priority:50,url:"",apiKey:""},ob={name:"NZBHydra",type:"newznab",enabled:!0,enableRss:!0,enableAutomaticSearch:!0,enableInteractiveSearch:!0,priority:50,url:"",apiKey:""};function ib({onToast:t}){var ce,$,U,X,T;const[r,s]=i.useState([]),[a,n]=i.useState(!0),[l,o]=i.useState(!1),[c,d]=i.useState(!1),[x,m]=i.useState(null),[u,f]=i.useState(Mo),[j,h]=i.useState(!1),[p,y]=i.useState(null),[v,b]=i.useState(!1),[g,k]=i.useState(null),[N,E]=i.useState(null);i.useEffect(()=>{F()},[]);const F=async()=>{try{const z=await C.getIndexers();s(z)}catch(z){console.error("Failed to load indexers:",z)}finally{n(!1)}},_=z=>{f(z==="torznab"?{...Mo}:{...ob}),m(null),y(null),d(!1),o(!0)},q=z=>{f({...z}),m(z),y(null),o(!0)},R=()=>{o(!1),d(!1),m(null),f(Mo),y(null)},se=async()=>{var z,G;if(!u.url||!u.apiKey){t("Please enter URL and API Key","error");return}h(!0),y(null);try{const Z=await C.testIndexer({type:u.type,url:u.url,apiKey:u.apiKey});y(Z)}catch(Z){y({success:!1,message:((G=(z=Z.response)==null?void 0:z.data)==null?void 0:G.error)||"Test failed"})}finally{h(!1)}},V=async()=>{var G,Z;if(!u.name||!u.url||!u.apiKey){t("Please fill in all required fields","error");return}const z=x&&(u.url!==x.url||u.apiKey!==x.apiKey);if((!x||z)&&!(p!=null&&p.success)){t("Please test the connection first","error");return}b(!0);try{x?(await C.updateIndexer(x.id,{name:u.name,type:u.type,url:u.url,apiKey:u.apiKey,enabled:u.enabled!==!1,enableRss:u.enableRss!==!1,enableAutomaticSearch:u.enableAutomaticSearch!==!1,enableInteractiveSearch:u.enableInteractiveSearch!==!1}),t("Indexer updated successfully","success")):(await C.addIndexer({name:u.name,type:u.type,url:u.url,apiKey:u.apiKey,enabled:u.enabled!==!1,enableRss:u.enableRss!==!1,enableAutomaticSearch:u.enableAutomaticSearch!==!1,enableInteractiveSearch:u.enableInteractiveSearch!==!1}),t("Indexer added successfully","success")),await F(),R()}catch(de){t(((Z=(G=de.response)==null?void 0:G.data)==null?void 0:Z.error)||"Failed to save indexer","error")}finally{b(!1)}},Q=async z=>{try{await C.deleteIndexer(z.id),t("Indexer deleted","success"),await F(),R()}catch{t("Failed to delete indexer","error")}k(null)},te=async z=>{var G,Z;if(!z.enableRss){t("RSS is not enabled for this indexer","error");return}E({indexer:z,loading:!0,data:null});try{const de=await C.previewIndexerRss(z.id);E({indexer:z,loading:!1,data:de})}catch(de){E({indexer:z,loading:!1,data:{error:((Z=(G=de.response)==null?void 0:G.data)==null?void 0:Z.error)||"Failed to fetch RSS"}})}},J=z=>{if(z===0)return"0 B";const G=1024,Z=["B","KB","MB","GB","TB"],de=Math.floor(Math.log(z)/Math.log(G));return parseFloat((z/Math.pow(G,de)).toFixed(1))+" "+Z[de]};return a?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Indexers"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage Newznab/Torznab indexers for media searches"})]}),e.jsx(Ee,{onClick:()=>d(!0),children:"Add Indexer"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"URL"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:r.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:'No indexers configured. Click "Add Indexer" to get started.'})}):r.map(z=>e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>q(z),children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:z.name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${z.type==="torznab"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"}`,children:z.type})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm truncate max-w-xs",style:{color:"var(--text-secondary)"},title:z.url,children:z.url})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${z.enabled?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:z.enabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[z.enableRss&&e.jsx("button",{onClick:G=>{G.stopPropagation(),te(z)},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors rounded",style:{color:"var(--text-muted)"},title:"Preview RSS feed",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})})}),e.jsx("button",{onClick:G=>{G.stopPropagation(),k(z)},className:"p-1.5 text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Delete indexer",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},z.id))})]})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md shadow-xl",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Add Indexer"}),e.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-gray-700 rounded transition-colors",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("button",{onClick:()=>_("torznab"),className:"w-full p-4 border rounded-lg text-left hover:border-purple-500 hover:bg-purple-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-purple-600 text-white font-bold text-lg shrink-0",children:"TZ"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Torznab"}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium uppercase bg-purple-600/20 text-purple-400 rounded",children:"Torrents"})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Connect to Prowlarr, Jackett, or other Torznab-compatible indexers"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),e.jsx("button",{onClick:()=>_("newznab"),className:"w-full p-4 border rounded-lg text-left hover:border-orange-500 hover:bg-orange-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-orange-600 text-white font-bold text-lg shrink-0",children:"NZ"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Newznab"}),e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium uppercase bg-orange-600/20 text-orange-400 rounded",children:"Usenet"})]}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Connect to NZBHydra, NZBGeek, or other Newznab-compatible indexers"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:x?"Edit Indexer":`Add ${u.type==="torznab"?"Torznab":"Newznab"} Indexer`}),e.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),e.jsx($e,{value:u.name||"",onChange:z=>f({...u,name:z.target.value}),placeholder:"My Indexer",className:"dark:bg-gray-700"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.enabled!==!1,onChange:z=>f({...u,enabled:z.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable"})]}),e.jsxs("div",{className:"space-y-2 border-l-2 border-gray-200 dark:border-gray-600 pl-4 ml-2",children:[e.jsxs("label",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.enableRss!==!1,onChange:z=>f({...u,enableRss:z.target.checked}),className:"w-4 h-4 mt-0.5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable RSS"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Will be used when periodically looking for releases via RSS Sync"})]})]}),e.jsxs("label",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.enableAutomaticSearch!==!1,onChange:z=>f({...u,enableAutomaticSearch:z.target.checked}),className:"w-4 h-4 mt-0.5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Automatic Search"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Will be used when automatic searches are performed via the UI or by scheduled tasks"})]})]}),e.jsxs("label",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",checked:u.enableInteractiveSearch!==!1,onChange:z=>f({...u,enableInteractiveSearch:z.target.checked}),className:"w-4 h-4 mt-0.5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Interactive Search"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Will be used when interactive (manual) search is used"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"URL *"}),e.jsx($e,{value:u.url||"",onChange:z=>f({...u,url:z.target.value}),placeholder:u.type==="torznab"?"http://prowlarr:9696/1/api":"http://nzbhydra:5076",className:"dark:bg-gray-700"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u.type==="torznab"?'For Prowlarr: Go to Settings  Apps  Add Application  Copy the Torznab Feed URL (ends with /api). For all indexers use the "multi" indexer URL like http://host:9696/1/api':"Use the Newznab API URL from your usenet indexer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key *"}),e.jsx($e,{type:"password",value:u.apiKey||"",onChange:z=>f({...u,apiKey:z.target.value}),placeholder:"Your API Key",className:"dark:bg-gray-700"})]}),p&&e.jsx("div",{className:`p-3 ${p.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:p.message})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:se,disabled:j||!u.url||!u.apiKey,children:j?"Testing...":"Test"}),x&&e.jsx(Ee,{variant:"secondary",onClick:()=>k(x),className:"text-red-600 hover:text-red-700",children:"Delete"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:R,children:"Cancel"}),e.jsx(Ee,{onClick:V,disabled:v||(x?(u.url!==x.url||u.apiKey!==x.apiKey)&&!(p!=null&&p.success):!(p!=null&&p.success)),title:!x&&!(p!=null&&p.success)?"Test connection first":void 0,children:v?"Saving...":"Save"})]})]})]})}),e.jsx(cr,{isOpen:!!g,title:"Delete Indexer",message:`Are you sure you want to delete "${g==null?void 0:g.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:()=>g&&Q(g),onCancel:()=>k(null)}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-4xl max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["RSS Preview - ",N.indexer.name]}),N.data&&!N.data.error&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Found ",N.data.count," releases (showing first 25)"]})]}),e.jsx("button",{onClick:()=>E(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:N.loading?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Fetching RSS feed..."})]}):(ce=N.data)!=null&&ce.error?e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded",children:N.data.error}):((U=($=N.data)==null?void 0:$.preview)==null?void 0:U.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No releases found in RSS feed"}):e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-muted)"},children:"Title"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",style:{color:"var(--text-muted)"},children:"Quality"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold uppercase",style:{color:"var(--text-muted)"},children:"Size"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-semibold uppercase",style:{color:"var(--text-muted)"},children:"Seeds"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:(T=(X=N.data)==null?void 0:X.preview)==null?void 0:T.map((z,G)=>e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("p",{className:"font-medium truncate max-w-md",style:{color:"var(--text-primary)"},title:z.title,children:z.title})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[z.resolution&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded",children:z.resolution}),z.quality&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded",children:z.quality}),z.codec&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:z.codec})]})}),e.jsx("td",{className:"px-3 py-2 text-right whitespace-nowrap",style:{color:"var(--text-secondary)"},children:J(z.size)}),e.jsx("td",{className:"px-3 py-2 text-right whitespace-nowrap",style:{color:"var(--text-secondary)"},children:z.seeders>0?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:z.seeders}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},G))})]})})}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end shrink-0",children:e.jsx(Ee,{variant:"secondary",onClick:()=>E(null),children:"Close"})})]})})]})}const Lo={onGrab:!0,onFileImport:!0,onFileUpgrade:!0,onImportComplete:!0,onRename:!1,onMovieAdd:!0,onMovieDelete:!0,onSeriesAdd:!0,onSeriesDelete:!0,onEpisodeFileDelete:!0,onEpisodeFileDeleteForUpgrade:!0},Ru={onGrab:"On Grab",onFileImport:"On File Import",onFileUpgrade:"On File Upgrade",onImportComplete:"On Import Complete",onRename:"On Rename",onMovieAdd:"On Movie Add",onMovieDelete:"On Movie Delete",onSeriesAdd:"On Series Add",onSeriesDelete:"On Series Delete",onEpisodeFileDelete:"On Episode File Delete",onEpisodeFileDeleteForUpgrade:"On Episode File Delete For Upgrade"};function cb({onToast:t}){const[r,s]=i.useState([]),[a,n]=i.useState(!0),[l,o]=i.useState(!1),[c,d]=i.useState(!1),[x,m]=i.useState(null),[u,f]=i.useState(null),[j,h]=i.useState("pushbullet"),[p,y]=i.useState(""),[v,b]=i.useState(!0),[g,k]=i.useState(Lo),[N,E]=i.useState(""),[F,_]=i.useState(""),[q,R]=i.useState(""),[se,V]=i.useState(""),[Q,te]=i.useState([]),[J,ce]=i.useState(!1),[$,U]=i.useState(""),[X,T]=i.useState(""),[z,G]=i.useState(""),[Z,de]=i.useState(0),[ye,je]=i.useState(60),[Le,fe]=i.useState(3600),[Ne,ie]=i.useState(!1),[_e,K]=i.useState(null),[Fe,Se]=i.useState(!1);i.useEffect(()=>{Re()},[]);const Re=async()=>{try{const O=await C.getNotifications();s(O)}catch(O){console.error("Failed to load notifications:",O)}finally{n(!1)}},Ie=O=>{h(O),y(O==="pushbullet"?"Pushbullet":"Pushover"),b(!0),k({...Lo}),E(""),_(""),R(""),V(""),te([]),U(""),T(""),G(""),de(0),je(60),fe(3600),K(null),m(null),o(!1),d(!0)},Oe=O=>{h(O.type),y(O.name),b(O.enabled),k({...Lo,...O.triggers}),O.type==="pushbullet"?(E(O.config.accessToken||""),_(O.config.deviceIds||""),R(O.config.channelTags||""),V(O.config.senderId||"")):(U(O.config.apiKey||""),T(O.config.userKey||""),G(O.config.devices||""),de(O.config.priority||0),je(O.config.retry||60),fe(O.config.expire||3600)),K(null),m(O),d(!0)},De=()=>{d(!1),o(!1),m(null),K(null)},I=()=>j==="pushbullet"?{accessToken:N,deviceIds:F||void 0,channelTags:q||void 0,senderId:se||void 0}:{apiKey:$,userKey:X,devices:z||void 0,priority:Z,retry:ye,expire:Le},Ce=async()=>{var ve,W;const O=I();if(j==="pushbullet"&&!N){t("Access Token is required","error");return}if(j==="pushover"&&(!$||!X)){t("API Key and User Key are required","error");return}ie(!0),K(null);try{const he=await C.testNotification({name:p,type:j,triggers:g,config:O});K(he)}catch(he){K({success:!1,message:((W=(ve=he.response)==null?void 0:ve.data)==null?void 0:W.error)||"Test failed"})}finally{ie(!1)}},Te=async()=>{var ve,W;if(!p){t("Name is required","error");return}const O=I();if(j==="pushbullet"&&!N){t("Access Token is required","error");return}if(j==="pushover"&&(!$||!X)){t("API Key and User Key are required","error");return}Se(!0);try{x?(await C.updateNotification(x.id,{name:p,type:j,enabled:v,triggers:g,config:O}),t("Notification updated successfully","success")):(await C.createNotification({name:p,type:j,enabled:v,triggers:g,config:O}),t("Notification added successfully","success")),await Re(),De()}catch(he){t(((W=(ve=he.response)==null?void 0:ve.data)==null?void 0:W.error)||"Failed to save notification","error")}finally{Se(!1)}},Pe=async O=>{try{await C.deleteNotification(O.id),t("Notification deleted","success"),await Re()}catch{t("Failed to delete notification","error")}f(null)},Ae=async()=>{var O,ve,W;if(!N){t("Enter access token first","error");return}ce(!0);try{const he=await C.getPushbulletDevices(N);te(he.devices||[]),((O=he.devices)==null?void 0:O.length)===0&&t("No devices found","info")}catch(he){t(((W=(ve=he.response)==null?void 0:ve.data)==null?void 0:W.error)||"Failed to load devices","error")}finally{ce(!1)}};return a?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure notification connections for alerts and updates"})]}),e.jsx(Ee,{onClick:()=>o(!0),children:"Add Connection"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:r.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:'No notification connections configured. Click "Add Connection" to get started.'})}):r.map(O=>e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>Oe(O),children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:O.name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${O.type==="pushbullet"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400"}`,children:O.type==="pushbullet"?"Pushbullet":"Pushover"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${O.enabled?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:O.enabled?"Enabled":"Disabled"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("button",{onClick:ve=>{ve.stopPropagation(),f(O)},className:"p-1.5 text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},O.id))})]})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md shadow-xl",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Add Connection"}),e.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-gray-700 rounded transition-colors",style:{color:"var(--text-muted)"},children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("button",{onClick:()=>Ie("pushbullet"),className:"w-full p-4 border rounded-lg text-left hover:border-green-500 hover:bg-green-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-green-600 text-white font-bold text-lg shrink-0",children:"PB"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Pushbullet"}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Send notifications to your devices via Pushbullet"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),e.jsx("button",{onClick:()=>Ie("pushover"),className:"w-full p-4 border rounded-lg text-left hover:border-cyan-500 hover:bg-cyan-500/5 transition-all group",style:{borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-cyan-600 text-white font-bold text-lg shrink-0",children:"PO"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Pushover"}),e.jsx("p",{className:"text-sm mt-0.5",style:{color:"var(--text-muted)"},children:"Send notifications via Pushover with priority support"})]}),e.jsx("svg",{className:"w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between shrink-0",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[x?"Edit":"Add"," Connection - ",j==="pushbullet"?"Pushbullet":"Pushover"]}),e.jsx("button",{onClick:De,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx($e,{value:p,onChange:O=>y(O.target.value),placeholder:"Notification name",className:"dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Notification Triggers",e.jsx("a",{href:"https://wiki.servarr.com/sonarr/settings#connections",target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-sky-500 hover:text-sky-600",children:e.jsx("svg",{className:"w-4 h-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Select which events should trigger this notification"}),e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto border rounded p-2",style:{borderColor:"var(--border-color)"},children:Object.keys(Ru).map(O=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:g[O],onChange:ve=>k({...g,[O]:ve.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:Ru[O]})]},O))})]}),j==="pushbullet"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Access Token"}),e.jsx($e,{type:"password",value:N,onChange:O=>E(O.target.value),placeholder:"Your Pushbullet access token",className:"dark:bg-gray-700"}),e.jsx("a",{href:"https://www.pushbullet.com/#settings/account",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-500 hover:text-sky-600 mt-1 inline-block",children:"More Info"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Device IDs"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($e,{value:F,onChange:O=>_(O.target.value),placeholder:"Leave blank for all devices",className:"dark:bg-gray-700 flex-1"}),e.jsx(Ee,{variant:"secondary",onClick:Ae,disabled:J||!N,children:J?"...":""})]}),Q.length>0&&e.jsxs("div",{className:"mt-2 text-xs space-y-1",style:{color:"var(--text-muted)"},children:[e.jsx("p",{children:"Available devices:"}),Q.map(O=>e.jsxs("p",{className:"pl-2 cursor-pointer hover:text-sky-500",onClick:()=>_(O.iden),children:[" ",O.nickname," (",O.iden,")"]},O.iden))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"List of device IDs (leave blank to send to all devices)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Channel Tags"}),e.jsx($e,{value:q,onChange:O=>R(O.target.value),placeholder:"Optional channel tag",className:"dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"List of Channel Tags to send notifications to"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sender ID"}),e.jsx($e,{value:se,onChange:O=>V(O.target.value),placeholder:"Optional sender device ID",className:"dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The device ID to send notifications from (leave blank to send from yourself)"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),e.jsx($e,{type:"password",value:$,onChange:O=>U(O.target.value),placeholder:"Your Pushover API key",className:"dark:bg-gray-700"}),e.jsx("a",{href:"https://pushover.net/apps/build",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-500 hover:text-sky-600 mt-1 inline-block",children:"More Info"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"User Key"}),e.jsx($e,{type:"password",value:X,onChange:O=>T(O.target.value),placeholder:"Your Pushover user key",className:"dark:bg-gray-700"}),e.jsx("a",{href:"https://pushover.net/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-500 hover:text-sky-600 mt-1 inline-block",children:"More Info"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Devices"}),e.jsx($e,{value:z,onChange:O=>G(O.target.value),placeholder:"Leave blank for all devices",className:"dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"List of device names (leave blank to send to all devices)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsxs("select",{value:Z,onChange:O=>de(Number(O.target.value)),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",style:{borderColor:"var(--border-color)",color:"var(--text-primary)",backgroundColor:"var(--card-bg)"},children:[e.jsx("option",{value:-2,children:"Lowest"}),e.jsx("option",{value:-1,children:"Low"}),e.jsx("option",{value:0,children:"Normal"}),e.jsx("option",{value:1,children:"High"}),e.jsx("option",{value:2,children:"Emergency"})]})]}),Z===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Retry"}),e.jsx($e,{type:"number",value:ye,onChange:O=>je(Number(O.target.value)),placeholder:"60",className:"dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Interval to retry Emergency alerts, minimum 30 seconds"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expire"}),e.jsx($e,{type:"number",value:Le,onChange:O=>fe(Number(O.target.value)),placeholder:"3600",className:"dark:bg-gray-700"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"How long to retry Emergency alerts, maximum 86400 seconds"})]})]})]}),_e&&e.jsx("div",{className:`p-3 rounded ${_e.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:_e.message})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:Ce,disabled:Ne,children:Ne?"Testing...":"Test"}),x&&e.jsx(Ee,{variant:"secondary",onClick:()=>f(x),className:"text-red-600 hover:text-red-700",children:"Delete"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:De,children:"Cancel"}),e.jsx(Ee,{onClick:Te,disabled:Fe,children:Fe?"Saving...":"Save"})]})]})]})}),e.jsx(cr,{isOpen:!!u,title:"Delete Connection",message:`Are you sure you want to delete "${u==null?void 0:u.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:()=>u&&Pe(u),onCancel:()=>f(null)})]})}const db=t=>{const r=t/1073741824;return r>=1?`${r.toFixed(2)} GB`:`${(t/(1024*1024)).toFixed(1)} MB`},ub=(t,r,s="w185")=>r||(t?t.startsWith("http")?t:`https://image.tmdb.org/t/p/${s}${t}`:null);function mb({onToast:t,initialMediaType:r}){var ue,ge,H,re,P;const[s,a]=i.useState(""),[n,l]=i.useState(r||"movie"),[o,c]=i.useState(!1),[d,x]=i.useState(!1),[m,u]=i.useState([]),[f,j]=i.useState(0),[h,p]=i.useState(!1),[y,v]=i.useState(new Set),[b,g]=i.useState(null),[k,N]=i.useState(""),[E,F]=i.useState(""),[_,q]=i.useState([]),[R,se]=i.useState(!1),[V,Q]=i.useState(null),[te,J]=i.useState(null),[ce,$]=i.useState([]),[U,X]=i.useState(""),[T,z]=i.useState("released"),[G,Z]=i.useState(!1),[de,ye]=i.useState(!0),je=50,Le=100;i.useEffect(()=>{Fe(),fe(),Ne()},[]),i.useEffect(()=>{fe()},[n]);const fe=async()=>{try{const L=await C.getQualityProfiles(),S=n==="movie"?"movie":"series",Y=L.filter(w=>!w.media_type||w.media_type==="both"||w.media_type===S);$(Y),Y.length>0&&!Y.find(w=>w.id===U)&&X(Y[0].id)}catch(L){console.error("Failed to load quality profiles:",L)}},Ne=async()=>{try{const L=await C.getSettings();L.import_auto_search!==void 0&&Z(L.import_auto_search===!0||L.import_auto_search==="true")}catch(L){console.error("Failed to load import settings:",L)}},ie=async(L,S)=>{try{await C.updateSetting("import_quality_profile_id",L),await C.updateSetting("import_auto_search",S)}catch(Y){console.error("Failed to save import settings:",Y)}},_e=L=>{X(L),ie(L,G)},K=L=>{Z(L),ie(U,L)};i.useEffect(()=>{Se()},[n]);const Fe=async()=>{try{const L=await C.getSettings();a((r||n)==="tv"?L.tv_path||"/data/tv":L.movie_path||"/data/movies"),L.tmdb_api_key||t("TMDB API key not set. Please configure it in Settings > API Keys to enable media matching.","error")}catch(L){console.error("Failed to load settings:",L)}},Se=async()=>{try{const L=n==="movie"?await C.getMovies():await C.getSeries(),S=new Set(L.items.map(Y=>Y.tmdb_id));v(S)}catch(L){console.error("Failed to load library:",L)}},Re=i.useCallback((L,S=!1)=>{let Y=L;Y=Y.replace(/\.(mkv|mp4|avi|m4v|wmv|mov|ts|m2ts)$/i,"");let w;const A=[/\{tvdb-?id?[-:]?\s*(\d+)\}/i,/\[tvdb-?id?[-:]?\s*(\d+)\]/i,/tvdb-?id?[-:]?\s*(\d+)/i,/\{(\d{5,})\}/];for(const ke of A){const M=Y.match(ke);if(M){w=parseInt(M[1]),Y=Y.replace(ke,"").trim();break}}const ne=[/[(\[]((?:19|20)\d{2})[)\]]/,/[.\s]((?:19|20)\d{2})[.\s]/,/[.\s]((?:19|20)\d{2})$/];let xe;for(const ke of ne){const M=Y.match(ke);if(M){xe=parseInt(M[1]);break}}const He=Y.match(/(2160p|4K|UHD|1080p|720p|480p)/i),B=He?He[1].toUpperCase().replace("4K","2160p").replace("UHD","2160p"):void 0;let ae=Y.replace(/[(\[]((?:19|20)\d{2})[)\]].*$/i,"").replace(/[.\s]((?:19|20)\d{2})[.\s].*$/i," ").replace(/\b(BluRay|BRRip|BDRip|DVDRip|WEB-DL|WEBRip|HDTV|PDTV|HDRip|AMZN|DSNP|HMAX|ATVP|PCOK|MA)\b/gi,"").replace(/(?:^|[.\s-])NF(?:[.\s-]|$)/gi," ").replace(/\./g," ").replace(/_/g," ").replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/2160p|4K|UHD|1080p|720p|480p|x264|x265|HEVC|H\.?264|H\.?265|10bit|HDR/gi,"").replace(/DTS|AC3|AAC|FLAC|TrueHD|Atmos|EAC3|DD5\.1|DDP|5\.1|7\.1/gi,"").replace(/-[A-Za-z0-9]+$/,"").replace(/\s+/g," ").trim();return S&&(ae=ae.replace(/S\d+E\d+/gi,"").replace(/Season\s*\d+/gi,"").replace(/Complete\s*Series/gi,"").replace(/\s+/g," ").trim()),{title:ae,year:xe,quality:B,tvdbId:w}},[]),Ie=async L=>{l(L),u([]),j(0);try{const S=await C.getSettings();a(L==="movie"?S.movie_path||"/data/movies":S.tv_path||"/data/tv")}catch(S){console.error("Failed to load settings:",S)}},Oe=async L=>{var Y,w;const S=L||s;if(!S){t("Please enter a path to scan","error");return}c(!0),u([]),j(0),J(null);try{t("Scanning directory...","info");const ne=(await C.scanLibrary(S,n)).files||[];if(ne.length===0){t("No media files found","info"),c(!1);return}let xe=new Set;try{const it=((await C.getLibraryPaths(n)).paths||[]).map(ht=>ht.replace(/\/+$/,"").toLowerCase());xe=new Set(it),console.log(`[Import] Loaded ${xe.size} existing library paths`)}catch{console.warn("Could not load existing library paths")}const He=ze=>ze.replace(/\/+$/,"").toLowerCase(),B=ze=>{if(n==="movie"){const it=He(ze.substring(0,ze.lastIndexOf("/")));return xe.has(it)}else{const it=He(ze);return xe.has(it)}},ae=ne.map((ze,it)=>{const ht=Re(ze.filename,n==="tv"),ct=B(ze.path);return{id:`file-${it}-${Date.now()}`,path:ze.path,filename:ze.filename,parsedTitle:ht.title,parsedYear:ht.year,parsedQuality:ht.quality,parsedTvdbId:ht.tvdbId,size:ze.size||0,match:void 0,alternateMatches:[],status:ct?"in_library":"pending",libraryId:void 0,selected:!1}}),ke=ae.filter(ze=>ze.status==="in_library").length;ke>0&&t(`Found ${ke} already imported items`,"info"),u(ae);const M=ae.filter(ze=>ze.status!=="in_library");J({current:0,total:M.length}),await Se();let oe=5;try{oe=(await C.getSettings()).concurrent_requests||5}catch{console.warn("Could not load concurrent requests setting, using default")}if(M.length===0){c(!1),t("All files already imported","success");return}const le=Math.min(Math.max(oe,1),20),be=ae.map((ze,it)=>({file:ze,idx:it})).filter(ze=>ze.file.status!=="in_library").map(ze=>ze.idx),we=ze=>{if(!ze)return;const it=new Date(ze).getFullYear();return isNaN(it)?void 0:it},Qe=ze=>ze.toLowerCase().replace(/[''`]/g,"'").replace(/\//g," ").replace(/\s+&\s+/g," and ").replace(/\s+and\s+/g," and ").replace(/[^\w\s']/g," ").replace(/\s+/g," ").trim(),Be=(ze,it)=>{const ht=Qe(ze),ct=Qe(it);if(ht===ct)return{exact:!0,partial:!0,score:100};if(ht.includes(ct)||ct.includes(ht)){const nt=ht.length>ct.length?ht:ct,as=ht.length>ct.length?ct:ht,Ql=Math.round(as.length/nt.length*100);return{exact:!1,partial:!0,score:Math.max(Ql,75)}}const er=ht.split(" ").filter(nt=>nt.length>1),mt=ct.split(" ").filter(nt=>nt.length>1),vt=er.length<mt.length?er:mt,ks=er.length<mt.length?mt:er,na=vt.filter(nt=>ks.includes(nt)).length,mr=vt.length>0?Math.round(na/vt.length*100):0;return{exact:!1,partial:mr>=70,score:mr}};let ur=0,ss=ke;for(let ze=0;ze<be.length;ze+=le){const it=be.slice(ze,ze+le),ht=await Promise.all(it.map(async ct=>{const er=ne[ct],mt=Re(er.filename,n==="tv");let vt,ks=[],na="unmatched";try{if(mt.title){const mr=n==="movie"?await C.searchMovies(mt.title,mt.year):await C.searchTV(mt.title);if(mr.results&&mr.results.length>0){let nt=mr.results[0],as=70;const Ql=dt=>n==="movie"?[dt.title,dt.original_title].filter(Boolean):[dt.name,dt.original_name].filter(Boolean);for(const dt of mr.results){const nn=we(n==="movie"?dt.release_date:dt.first_air_date),Kx=Ql(dt);let tr=70;for(const Yx of Kx){const Kl=Be(mt.title,Yx);if(Kl.exact){if(tr=Math.max(tr,85),mt.year&&nn===mt.year){tr=100,nt=dt,as=tr;break}}else Kl.partial&&(tr=Math.max(tr,Kl.score))}if(mt.year&&nn===mt.year&&tr<90&&(tr=Math.max(tr,90)),tr>as&&(nt=dt,as=tr),as===100)break}const qx=we(n==="movie"?nt.release_date:nt.first_air_date);let zc=n==="movie"?nt.title:nt.name;const Qx=Qe(mt.title);n==="tv"&&nt.original_name&&nt.original_language!=="en"&&Qe(nt.original_name).includes(Qx.substring(0,5))&&(zc=nt.original_name),vt={id:nt.id,title:zc,year:qx||0,poster_path:nt.poster_path,confidence:as,source:"tmdb"},ks=mr.results.slice(0,5).filter(dt=>dt.id!==nt.id).slice(0,4).map(dt=>{const nn=we(n==="movie"?dt.release_date:dt.first_air_date);return{id:dt.id,title:n==="movie"?dt.title:dt.original_name||dt.name,year:nn||0,poster_path:dt.poster_path}}),y.has(vt.id)?na="in_library":na="matched"}}}catch(mr){console.error("Search failed for:",mt.title,mr)}return{globalIdx:ct,match:vt,alternateMatches:ks,status:na}}));u(ct=>{var mt;const er=[...ct];for(const vt of ht)if(er[vt.globalIdx]){const ks=vt.status==="matched"&&((mt=vt.match)==null?void 0:mt.confidence)&&vt.match.confidence>=Le;er[vt.globalIdx]={...er[vt.globalIdx],match:vt.match,alternateMatches:vt.alternateMatches,status:vt.status,selected:ks}}return er});for(const ct of ht)ct.status==="matched"&&ur++,ct.status==="in_library"&&ss++;J({current:Math.min(ze+le,be.length),total:be.length}),ze+le<be.length&&await new Promise(ct=>setTimeout(ct,100))}t(`Scan complete! ${ur} matched, ${ss} already in library`,"success")}catch(A){t(((w=(Y=A.response)==null?void 0:Y.data)==null?void 0:w.error)||"Scan failed","error")}finally{c(!1),J(null)}},De=async()=>{const L=m.filter(w=>w.selected&&w.match&&w.status!=="in_library");if(L.length===0){t("No files selected for import","error");return}if(!U){t("Please select a quality profile before importing","error");return}x(!0);let S=0,Y=0;for(const w of L)try{u(ne=>ne.map(xe=>xe.id===w.id?{...xe,status:"importing"}:xe));const A=n==="movie"?w.path.substring(0,w.path.lastIndexOf("/")):w.path;n==="movie"?await C.addMovie({tmdb_id:w.match.id,title:w.match.title,year:w.match.year,poster_path:w.match.poster_path,folder_path:A,quality_profile_id:U,minimum_availability:T,monitored:!0,has_file:!0}):await C.addSeries({tmdb_id:w.match.id,title:w.match.title,year:w.match.year,poster_path:w.match.poster_path,folder_path:w.path,quality_profile_id:U,monitored:!0}),u(ne=>ne.map(xe=>xe.id===w.id?{...xe,status:"imported",selected:!1}:xe)),S++,v(ne=>new Set([...ne,w.match.id]))}catch(A){u(ne=>ne.map(xe=>{var He,B;return xe.id===w.id?{...xe,status:"error",error:((B=(He=A.response)==null?void 0:He.data)==null?void 0:B.error)||"Import failed"}:xe})),Y++}x(!1),t(`Imported ${S} items${Y>0?`, ${Y} failed`:""}`,S>0?"success":"error")},I=L=>{u(S=>S.map(Y=>({...Y,selected:Y.status==="matched"?L:Y.selected})))},Ce=()=>{u(L=>L.map(S=>{var Y;return{...S,selected:S.status==="matched"&&((Y=S.match)==null?void 0:Y.confidence)!==void 0&&S.match.confidence>=Le}}))},Te=async L=>{var Y;const S=m[L];N(S.parsedTitle),F(((Y=S.parsedYear)==null?void 0:Y.toString())||""),g(L),q([]),Q(null),setTimeout(()=>Pe(S.parsedTitle),100)},Pe=async L=>{const S=L||k;if(S.trim()){se(!0);try{const Y=n==="movie"?await C.searchMovies(S):await C.searchTV(S);q(Y.results||[])}catch(Y){console.error("Search failed:",Y)}finally{se(!1)}}},Ae=async()=>{Pe()},O=L=>{Q(L)},ve=()=>{if(b===null||!V)return;const L=y.has(V.id);u(S=>S.map((Y,w)=>w===b?{...Y,match:{id:V.id,title:V.title||V.name,year:parseInt((V.release_date||V.first_air_date||"").split("-")[0])||0,poster_path:V.poster_path,confidence:100,overview:V.overview},status:L?"in_library":"matched",selected:!L}:Y)),g(null),q([]),Q(null)},W=i.useMemo(()=>{const L=m.map((S,Y)=>({...S,originalIndex:Y}));return de?L.filter(S=>S.status!=="in_library"&&S.status!=="imported"):L},[m,de]),he=i.useMemo(()=>{const L=f*je;return W.slice(L,L+je)},[W,f]),me=Math.ceil(W.length/je),D=i.useMemo(()=>({total:m.length,matched:m.filter(L=>L.status==="matched").length,unmatched:m.filter(L=>L.status==="unmatched").length,pending:m.filter(L=>L.status==="pending").length,inLibrary:m.filter(L=>L.status==="in_library").length,imported:m.filter(L=>L.status==="imported").length,selected:m.filter(L=>L.selected&&L.status==="matched").length,highConfidence:m.filter(L=>{var S;return L.status==="matched"&&((S=L.match)==null?void 0:S.confidence)&&L.match.confidence>=Le}).length}),[m]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Import Media"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scan your existing media library and import files into MediaStack"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Import Settings"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quality Profile:"}),ce.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm",children:"No profiles - "}),e.jsx("a",{href:"/settings?tab=profiles",className:"text-primary-600 hover:text-primary-700 text-sm underline",children:"Create one"})]}):e.jsxs("select",{value:U,onChange:L=>_e(L.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"-- Select Profile --"}),ce.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]}),n==="movie"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Availability:"}),e.jsxs("select",{value:T,onChange:L=>z(L.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"announced",children:"Announced"}),e.jsx("option",{value:"inCinemas",children:"In Cinemas"}),e.jsx("option",{value:"released",children:"Released"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:L=>K(L.target.checked),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500 bg-white dark:bg-gray-700"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Search for missing ",n==="movie"?"movies":"episodes"," after import"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-stretch gap-3",children:[e.jsxs("div",{className:"flex overflow-hidden border border-gray-300 dark:border-gray-600 flex-shrink-0 self-stretch",children:[e.jsx("button",{onClick:()=>Ie("movie"),className:`px-5 h-full text-sm font-medium transition-colors ${n==="movie"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Movies"}),e.jsx("button",{onClick:()=>Ie("tv"),className:`px-5 h-full text-sm font-medium transition-colors ${n==="tv"?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"TV Series"})]}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:s,onChange:L=>a(L.target.value),placeholder:"/data/media/movies",className:"w-full h-full px-3 py-2 border focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 border-gray-300 dark:border-gray-600"})}),e.jsx("button",{onClick:()=>p(!0),className:"px-4 font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed self-stretch",style:{backgroundColor:"var(--btn-secondary-bg)",color:"var(--btn-secondary-text)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--btn-secondary-border)"},children:"Browse"}),e.jsx("button",{onClick:()=>Oe(),disabled:o||!s,className:"px-4 min-w-[80px] font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed self-stretch flex items-center justify-center",style:{backgroundColor:"var(--btn-primary-bg)",color:"var(--btn-primary-text)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--btn-primary-border)"},children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Scan"]})})]}),te&&e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Matching files with TMDB..."}),e.jsxs("span",{children:[te.current," / ",te.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${te.current/te.total*100}%`}})})]})]}),m.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Total: ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:D.total})]}),D.pending>0&&e.jsxs("span",{className:"text-gray-500",children:["Pending: ",e.jsx("strong",{children:D.pending})]}),e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["Matched: ",e.jsx("strong",{children:D.matched})]}),e.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:["Unmatched: ",e.jsx("strong",{children:D.unmatched})]}),D.inLibrary>0&&e.jsxs("span",{className:"text-sky-600",children:["In Library: ",e.jsx("strong",{children:D.inLibrary})]}),D.imported>0&&e.jsxs("span",{className:"text-green-600",children:["Imported: ",e.jsx("strong",{children:D.imported})]}),(D.inLibrary>0||D.imported>0)&&e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:de,onChange:L=>{ye(L.target.checked),j(0)},className:"w-3.5 h-3.5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Hide done"})]}),e.jsxs("span",{className:"text-purple-600",children:["Selected: ",e.jsx("strong",{children:D.selected})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ee,{variant:"secondary",onClick:Ce,disabled:D.highConfidence===0,children:["Select High Confidence (",D.highConfidence,")"]}),e.jsx(Ee,{variant:"secondary",onClick:()=>I(!0),disabled:D.matched===0,children:"Select All Matched"}),e.jsx(Ee,{variant:"secondary",onClick:()=>I(!1),children:"Deselect All"}),e.jsx(Ee,{onClick:De,disabled:d||D.selected===0,children:d?"Importing...":`Import ${D.selected} Selected`})]})]}),m.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-hidden",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-16",children:"Select"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-1/4",children:"File"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-1/4",children:"Match"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-24",children:"Confidence"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-24",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase w-32",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:he.map(L=>{var Y;const S=L.originalIndex;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:L.selected,disabled:L.status==="in_library"||L.status==="imported"||L.status==="pending"||!L.match,onChange:w=>u(A=>A.map((ne,xe)=>xe===S?{...ne,selected:w.target.checked}:ne)),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsx("td",{className:"px-4 py-3 overflow-hidden",children:e.jsxs("div",{className:"truncate",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:L.parsedTitle}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",title:L.filename,children:L.filename}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[L.parsedYear&&e.jsxs("span",{className:"text-xs text-gray-400",children:["(",L.parsedYear,")"]}),L.parsedTvdbId&&e.jsxs("span",{className:"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 px-1.5 py-0.5 rounded",children:["TVDB: ",L.parsedTvdbId]})]})]})}),e.jsx("td",{className:"px-4 py-3 overflow-hidden",children:L.status==="pending"?e.jsx("span",{className:"text-sm text-gray-400 animate-pulse",children:"Matching..."}):L.match?e.jsxs("div",{className:"flex items-center gap-2",children:[(L.match.poster_path||L.match.poster_url)&&e.jsx("img",{src:ub(L.match.poster_path,L.match.poster_url,"w92")||"",alt:"",className:"w-8 h-12 rounded object-cover",onError:w=>{w.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:L.match.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:[L.match.year>0?L.match.year:"Unknown year","  ",db(L.size),L.match.source==="tvdb"&&e.jsx("span",{className:"ml-1 text-purple-500",children:"(TVDB)"})]})]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No match"})}),e.jsx("td",{className:"px-4 py-3",children:((Y=L.match)==null?void 0:Y.confidence)&&e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${L.match.confidence>=95?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":L.match.confidence>=Le?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[L.match.confidence,"%"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${L.status==="matched"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":L.status==="unmatched"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":L.status==="in_library"?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400":L.status==="imported"?"bg-violet-100 text-violet-700 dark:bg-violet-900/30 dark:text-violet-400":L.status==="importing"?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300":L.status==="pending"?"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:L.status==="in_library"?"In Library":L.status})}),e.jsx("td",{className:"px-4 py-3",children:L.status!=="imported"&&L.status!=="in_library"&&L.status!=="pending"&&e.jsx("button",{onClick:()=>Te(S),className:"text-sm text-primary-600 hover:text-primary-700",children:L.match?"Change":"Search"})})]},L.id)})})]})})}),me>1&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",f*je+1," to ",Math.min((f+1)*je,W.length)," of ",W.length,de&&D.inLibrary+D.imported>0&&e.jsxs("span",{className:"text-gray-400 ml-1",children:["(",D.inLibrary+D.imported," hidden)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:()=>j(L=>Math.max(0,L-1)),disabled:f===0,children:"Previous"}),e.jsx(Ee,{variant:"secondary",onClick:()=>j(L=>Math.min(me-1,L+1)),disabled:f>=me-1,children:"Next"})]})]})]}),m.length===0&&!o&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No files scanned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter a path and click Scan to find media files"})]}),h&&e.jsx(ql,{currentPath:s,onSelect:L=>{a(L),p(!1),L&&Oe(L)},onClose:()=>p(!1)}),b!==null&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:((ue=m[b])==null?void 0:ue.status)==="unmatched"?"Find Match":"Change Match"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["File: ",e.jsx("span",{className:"font-medium",children:(ge=m[b])==null?void 0:ge.filename})]}),((H=m[b])==null?void 0:H.match)&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Currently matched to: ",e.jsxs("span",{className:"font-medium",children:[(re=m[b])==null?void 0:re.match.title," (",(P=m[b])==null?void 0:P.match.year,")"]})]})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx($e,{value:k,onChange:L=>N(L.target.value),placeholder:`${n==="movie"?"Movie":"Series"} title or TMDB ID...`,onKeyDown:L=>L.key==="Enter"&&Ae(),className:"dark:bg-gray-700"}),/^\d+$/.test(k.trim())&&k.trim()&&e.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Searching by TMDB ID (year filter ignored)"})]}),e.jsx("div",{className:"w-24",children:e.jsx($e,{value:E,onChange:L=>F(L.target.value),placeholder:"Year",type:"number",className:"dark:bg-gray-700",disabled:/^\d+$/.test(k.trim())&&!!k.trim()})}),e.jsx(Ee,{onClick:Ae,disabled:R||!k.trim(),children:R?"Searching...":"Search"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:_.length>0?e.jsx("div",{className:"space-y-3",children:_.slice(0,10).map(L=>{const S=L.title||L.name||"",Y=(L.release_date||L.first_air_date||"").split("-")[0],w=y.has(L.id),A=L.vote_average,ne=L.genre_ids||[],xe={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Sci-Fi",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western",10759:"Action & Adventure",10762:"Kids",10763:"News",10764:"Reality",10765:"Sci-Fi & Fantasy",10766:"Soap",10767:"Talk",10768:"War & Politics"},He=ne.slice(0,3).map(B=>xe[B]).filter(Boolean);return e.jsxs("div",{onClick:()=>O(L),className:`flex gap-4 p-3 cursor-pointer transition-colors border ${(V==null?void 0:V.id)===L.id?"bg-primary-50 dark:bg-primary-900/20 border-primary-300 dark:border-primary-700 ring-2 ring-primary-500":w?"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("div",{className:"w-16 h-24 bg-gray-200 dark:bg-gray-600 rounded overflow-hidden flex-shrink-0",children:L.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w154${L.poster_path}`,alt:S,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[S,Y&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 font-normal",children:[" (",Y,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[A!==void 0&&A>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:A.toFixed(1)})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["TMDB: ",L.id]})]}),He.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:He.map((B,ae)=>e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:B},ae))})]}),e.jsxs("div",{className:"flex flex-col gap-1 flex-shrink-0",children:[(V==null?void 0:V.id)===L.id&&e.jsx("span",{className:"px-2 py-1 bg-primary-500 text-white text-xs font-medium rounded",children:"Selected"}),w&&e.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs font-medium rounded",children:"In Library"})]})]}),L.overview&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:L.overview})]})]},L.id)})}):R?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("p",{children:"Searching..."})]}):e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:e.jsxs("p",{children:["Search for the correct ",n==="movie"?"movie":"series"," above"]})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsx(Ee,{variant:"secondary",onClick:()=>{g(null),Q(null),q([])},children:"Cancel"}),e.jsx(Ee,{onClick:ve,disabled:!V,children:"Apply Match"})]})]})})]})}function xb({onToast:t}){var ve,W,he,me;const{formatDate:r}=rs(),[s,a]=i.useState([]),[n,l]=i.useState({movie:[],tv:[]}),[o,c]=i.useState([]),[d,x]=i.useState(!0),[m,u]=i.useState(!1),[f,j]=i.useState(null),[h,p]=i.useState(null),[y,v]=i.useState(!1),[b,g]=i.useState(null),[k,N]=i.useState(!1),[E,F]=i.useState({listName:"",status:"syncing",processed:0,total:0}),[_,q]=i.useState(!1),[R,se]=i.useState(null),[V,Q]=i.useState([]),[te,J]=i.useState(!1),[ce,$]=i.useState(null),[U,X]=i.useState(!1),[T,z]=i.useState([]),[G,Z]=i.useState(0),[de,ye]=i.useState("all"),[je,Le]=i.useState(!1),[fe,Ne]=i.useState({name:"",type:"imdb",media_type:"movie",enabled:!0,enable_auto_add:!0,search_on_add:!1,quality_profile_id:"",root_folder:"",monitor:"all",minimum_availability:"released",list_id:"",url:"",refresh_interval:720});i.useEffect(()=>{ie()},[]);const ie=async()=>{var D;x(!0);try{const[ue,ge,H,re]=await Promise.all([C.getImportLists(),C.getImportListTypes(),C.getQualityProfiles(),C.getExclusions()]);a(ue),l(ge),c(H),Z(((D=re.items)==null?void 0:D.length)||0)}catch(ue){console.error("Failed to load import lists:",ue),t("Failed to load import lists","error")}finally{x(!1)}},_e=async()=>{var D;Le(!0);try{const ue=de==="all"?void 0:de,ge=await C.getExclusions(ue);z(ge.items||[]),de==="all"&&Z(((D=ge.items)==null?void 0:D.length)||0)}catch(ue){console.error("Failed to load exclusions:",ue),t("Failed to load exclusion list","error")}finally{Le(!1)}},K=async D=>{try{await C.removeExclusion(D),z(ue=>ue.filter(ge=>ge.id!==D)),Z(ue=>Math.max(0,ue-1)),t("Removed from exclusion list","success")}catch(ue){console.error("Failed to remove exclusion:",ue),t("Failed to remove exclusion","error")}},Fe=async()=>{try{const D=de==="all"?void 0:de,ue=T.length;await C.clearExclusions(D),z([]),Z(de==="all"?0:ge=>Math.max(0,ge-ue)),t(`Cleared ${de==="all"?"all":de} exclusions`,"success")}catch(D){console.error("Failed to clear exclusions:",D),t("Failed to clear exclusions","error")}};i.useEffect(()=>{U&&_e()},[U,de]);const Se=()=>{var D;Ne({name:"",type:"imdb",media_type:"movie",enabled:!0,enable_auto_add:!0,search_on_add:!1,quality_profile_id:((D=o[0])==null?void 0:D.id)||"",root_folder:"",monitor:"all",minimum_availability:"released",list_id:"",url:"",refresh_interval:720}),g(null)},Re=(D,ue)=>{Se(),Ne(ge=>({...ge,media_type:D,type:ue.type,name:ue.name,root_folder:D==="movie"?"/data/media/movies":"/data/media/tv"})),g(ue),j(null),v(!1),u(!0)},Ie=D=>{j(D);const ue=[...n.movie||[],...n.tv||[]].find(ge=>ge.type===D.type);g(ue||null),Ne({name:D.name,type:D.type,media_type:D.media_type,enabled:D.enabled,enable_auto_add:D.enable_auto_add,search_on_add:D.search_on_add,quality_profile_id:D.quality_profile_id||"",root_folder:D.root_folder||"",monitor:D.monitor,minimum_availability:D.minimum_availability,list_id:D.list_id||"",url:D.url||"",refresh_interval:D.refresh_interval}),u(!0)},Oe=async()=>{var D,ue;try{f?(await C.updateImportList(f.id,fe),t("Import list updated successfully","success")):(await C.addImportList(fe),t("Import list added successfully","success")),u(!1),Se(),j(null),ie()}catch(ge){t(((ue=(D=ge.response)==null?void 0:D.data)==null?void 0:ue.error)||"Failed to save import list","error")}},De=async D=>{var ue,ge;try{await C.deleteImportList(D),t("Import list deleted successfully","success"),u(!1),j(null),ie()}catch(H){t(((ge=(ue=H.response)==null?void 0:ue.data)==null?void 0:ge.error)||"Failed to delete import list","error")}},I=async D=>{var ue,ge,H;p(D.id),F({listName:D.name,status:"syncing",processed:0,total:0}),N(!0);try{const P=((ue=(await C.previewImportList(D.id)).items)==null?void 0:ue.length)||0;F(w=>({...w,total:P}));let L=0;const S=setInterval(()=>{L=Math.min(L+Math.ceil(P/10),Math.floor(P*.9)),F(w=>({...w,processed:L,currentItem:"Processing items..."}))},500),Y=await C.syncImportList(D.id);clearInterval(S),F({listName:D.name,status:"complete",processed:P,total:P,result:Y}),ie()}catch(re){F({listName:D.name,status:"error",processed:0,total:0,result:{added:0,existing:0,failed:0,message:((H=(ge=re.response)==null?void 0:ge.data)==null?void 0:H.error)||"Sync failed"}})}finally{p(null)}},Ce=async D=>{se(D),J(!0),q(!0),Q([]);try{const ue=await C.previewImportList(D.id);Q(ue.items||[])}catch{t("Failed to preview list","error"),q(!1)}finally{J(!1)}},Te=D=>{const ue=[...n.movie||[],...n.tv||[]].find(ge=>ge.type===D);return(ue==null?void 0:ue.name)||D},Pe=D=>{if(!D)return"Never";const ue=new Date(D),H=new Date().getTime()-ue.getTime(),re=Math.floor(H/6e4),P=Math.floor(re/60),L=Math.floor(P/24);return re<1?"Just now":re<60?`${re}m ago`:P<24?`${P}h ago`:`${L}d ago`},Ae=()=>{const D=fe.media_type==="movie"?n.movie:n.tv,ue=D==null?void 0:D.find(ge=>ge.type===fe.type);return(ue==null?void 0:ue.presets)||[]},O=D=>D?D.startsWith("http")?D:`https://image.tmdb.org/t/p/w92${D}`:null;return d?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Lists"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Automatically import media from external lists like IMDB or TMDB"})]}),e.jsx(Ee,{onClick:()=>v(!0),children:"Add List"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Media"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Profile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Last Sync"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:s.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:'No lists configured. Click "Add List" to get started.'})}):s.map(D=>{const ue=o.find(ge=>ge.id===D.quality_profile_id);return e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>Ie(D),children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:D.name}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[e.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium ${D.enabled?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:D.enabled?"Enabled":"Disabled"}),D.enable_auto_add&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:"Auto"})]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:Te(D.type)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${D.media_type==="movie"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"}`,children:D.media_type==="movie"?"Movies":"TV Shows"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:(ue==null?void 0:ue.name)||"-"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:Pe(D.last_sync)})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:ge=>{ge.stopPropagation(),Ce(D)},className:"px-3 py-1.5 text-xs font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",style:{backgroundColor:"var(--surface-bg)",color:"var(--text-secondary)"},children:"Preview"}),e.jsx("button",{onClick:ge=>{ge.stopPropagation(),I(D)},disabled:h===D.id,className:"px-3 py-1.5 text-xs font-medium text-white bg-primary-600 hover:bg-primary-700 transition-colors disabled:opacity-50",children:h===D.id?"Syncing...":"Sync"}),e.jsx("button",{onClick:ge=>{ge.stopPropagation(),$(D)},className:"p-1.5 text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Delete list",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},D.id)})})]})})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Exclusion List"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Items that won't be re-added from import lists"})]}),e.jsxs(Ee,{variant:"secondary",onClick:()=>X(!U),children:[U?"Hide":"Show"," (",G,")"]})]}),U&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye("all"),className:`px-3 py-1.5 text-sm transition-colors ${de==="all"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"All"}),e.jsx("button",{onClick:()=>ye("movie"),className:`px-3 py-1.5 text-sm transition-colors ${de==="movie"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"Movies"}),e.jsx("button",{onClick:()=>ye("tv"),className:`px-3 py-1.5 text-sm transition-colors ${de==="tv"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"TV Shows"})]}),T.length>0&&e.jsx("button",{onClick:Fe,className:"p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors",title:`Clear ${de==="all"?"all":de} exclusions`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:je?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading..."})]}):T.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No exclusions"}),e.jsx("p",{className:"text-sm mt-1",children:'Items deleted with "Add to exclusion list" will appear here'})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:T.map(D=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:D.media_type==="movie"?"#7fc8f8":"#ea9ab2"},children:D.media_type==="movie"?e.jsx("svg",{className:"w-4 h-4",style:{color:"#000"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}):e.jsx("svg",{className:"w-4 h-4",style:{color:"#000"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:[D.title," ",D.year&&e.jsxs("span",{className:"text-gray-500",children:["(",D.year,")"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["TMDB: ",D.tmdb_id,"  Added ",r(D.created_at)]})]})]}),e.jsx("button",{onClick:()=>K(D.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors flex-shrink-0",title:"Remove from exclusion list",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},D.id))})})]})]}),e.jsx(cr,{isOpen:!!ce,title:"Delete List",message:`Are you sure you want to delete "${ce==null?void 0:ce.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:()=>{ce&&(De(ce.id),$(null))},onCancel:()=>$(null),danger:!0}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E.status==="syncing"?"Syncing...":"Sync Complete"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center",children:E.status==="syncing"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-12 h-12 mb-4",children:e.jsxs("svg",{className:"animate-spin w-12 h-12 text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Syncing ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E.listName})]}),E.currentItem&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:["Importing: ",E.currentItem]}),E.total>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[E.processed," / ",E.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${E.processed/E.total*100}%`}})})]})]}):E.status==="complete"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-12 h-12 mb-4 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium mb-4",children:[E.listName," synced successfully"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:((ve=E.result)==null?void 0:ve.added)||0}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Added"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((W=E.result)==null?void 0:W.existing)||0}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Existing"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:((he=E.result)==null?void 0:he.failed)||0}),e.jsx("p",{className:"text-xs text-red-700 dark:text-red-300",children:"Failed"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-12 h-12 mb-4 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Sync Failed"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:(me=E.result)==null?void 0:me.message})]})})}),E.status!=="syncing"&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:e.jsx(Ee,{onClick:()=>N(!1),children:"Close"})})]})}),_&&R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Preview: ",R.name]}),!te&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[V.filter(D=>!D.in_library).length," new, ",V.filter(D=>D.in_library).length," already in library"]})]}),e.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:te?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("svg",{className:"animate-spin w-8 h-8 text-primary-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}):V.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No items found in this list"}):e.jsx("div",{className:"space-y-3",children:V.map((D,ue)=>e.jsxs("div",{className:`flex gap-4 p-3 border ${D.in_library?"bg-green-50 dark:bg-green-900/10 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600"}`,children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-24 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden",children:D.poster_path?e.jsx("img",{src:O(D.poster_path)||"",alt:D.title,className:"w-full h-full object-cover",onError:ge=>{ge.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[D.title,D.year&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 font-normal",children:[" (",D.year,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[D.vote_average!==void 0&&D.vote_average>0&&e.jsxs("span",{className:"flex items-center gap-1 text-xs",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:D.vote_average.toFixed(1)})]}),D.network&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:D.network})]}),D.genres&&D.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:D.genres.slice(0,3).map((ge,H)=>e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:ge},H))})]}),D.in_library&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 text-xs font-medium rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"In Library"})]}),D.overview&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:D.overview})]})]},ue))})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[V.length," items total"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ee,{variant:"secondary",onClick:()=>q(!1),children:"Close"}),e.jsx(Ee,{onClick:()=>{q(!1),I(R)},children:"Sync Now"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-3xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add List"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:"Movies"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:(n.movie||[]).map(D=>e.jsxs("button",{onClick:()=>Re("movie",D),className:"p-4 text-left bg-gray-50 dark:bg-gray-700/50 hover:bg-primary-50 dark:hover:bg-primary-900/20 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-700 transition-colors group",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400",children:D.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.description})]},D.type))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:"TV Series"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:(n.tv||[]).map(D=>e.jsxs("button",{onClick:()=>Re("tv",D),className:"p-4 text-left bg-gray-50 dark:bg-gray-700/50 hover:bg-primary-50 dark:hover:bg-primary-900/20 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-700 transition-colors group",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400",children:D.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.description})]},D.type))})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[f?"Edit List":"Add List"," - ",(b==null?void 0:b.name)||fe.type]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:fe.media_type==="movie"?"Movies":"TV Series"})]}),e.jsx("button",{onClick:()=>{u(!1),j(null),Se()},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 ",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Name"}),e.jsx("div",{className:"col-span-2",children:e.jsx($e,{value:fe.name,onChange:D=>Ne(ue=>({...ue,name:D.target.value})),placeholder:"List name"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Enable"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe.enabled,onChange:D=>Ne(ue=>({...ue,enabled:D.target.checked})),className:"mt-1 w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable this list"})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Auto Add"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe.enable_auto_add,onChange:D=>Ne(ue=>({...ue,enable_auto_add:D.target.checked})),className:"mt-1 w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically add items to library"})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Search on Add"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe.search_on_add,onChange:D=>Ne(ue=>({...ue,search_on_add:D.target.checked})),className:"mt-1 w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Search for downloads when added"})]})})]}),fe.media_type==="tv"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Monitor"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:fe.monitor,onChange:D=>Ne(ue=>({...ue,monitor:D.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"all",children:"All Episodes"}),e.jsx("option",{value:"future",children:"Future Episodes"}),e.jsx("option",{value:"missing",children:"Missing Episodes"}),e.jsx("option",{value:"firstSeason",children:"First Season"}),e.jsx("option",{value:"latestSeason",children:"Latest Season"}),e.jsx("option",{value:"none",children:"None"})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Root Folder"}),e.jsx("div",{className:"col-span-2",children:e.jsx($e,{value:fe.root_folder,onChange:D=>Ne(ue=>({...ue,root_folder:D.target.value})),placeholder:fe.media_type==="movie"?"/data/media/movies":"/data/media/tv"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Quality Profile"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:fe.quality_profile_id,onChange:D=>Ne(ue=>({...ue,quality_profile_id:D.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"",children:"Select a profile"}),o.filter(D=>!D.media_type||D.media_type==="both"||D.media_type===(fe.media_type==="tv"?"series":"movie")).map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})})]}),Ae().length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Presets"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:fe.list_id,onChange:D=>{const ue=Ae().find(ge=>ge.listId===D.target.value);Ne(ge=>({...ge,list_id:D.target.value,name:(ue==null?void 0:ue.name)||ge.name}))},className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"",children:"Custom"}),Ae().map(D=>e.jsx("option",{value:D.listId,children:D.name},D.id))]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"List ID"}),e.jsxs("div",{className:"col-span-2",children:[e.jsx($e,{value:fe.list_id,onChange:D=>Ne(ue=>({...ue,list_id:D.target.value})),placeholder:"List identifier"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[fe.type==="stevenlu"&&"No configuration needed",fe.type==="imdb"&&"ls12345678 or top250, popular",fe.type==="tmdb"&&"popular, top_rated, now_playing, upcoming",fe.type==="trakt"&&"trending, popular, anticipated"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-start",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 pt-2 text-right",children:"Refresh"}),e.jsx("div",{className:"col-span-2",children:e.jsxs("select",{value:fe.refresh_interval,onChange:D=>Ne(ue=>({...ue,refresh_interval:parseInt(D.target.value)})),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:360,children:"Every 6 hours"}),e.jsx("option",{value:720,children:"Every 12 hours"}),e.jsx("option",{value:1440,children:"Every 24 hours"}),e.jsx("option",{value:10080,children:"Every 7 days"})]})})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("div",{children:f&&e.jsx("button",{onClick:()=>{u(!1),$(f)},className:"px-4 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 text-sm font-medium",children:"Delete"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ee,{variant:"secondary",onClick:()=>{u(!1),j(null),Se()},children:"Cancel"}),e.jsx(Ee,{onClick:Oe,children:f?"Save":"Add"})]})]})]})})]})}function pb({onToast:t}){const[r,s]=i.useState("radarr"),[a,n]=i.useState(""),[l,o]=i.useState(""),[c,d]=i.useState(!1),[x,m]=i.useState(!1),[u,f]=i.useState(null),[j,h]=i.useState([]),[p,y]=i.useState([]),[v,b]=i.useState(!1),[g,k]=i.useState(!1),[N,E]=i.useState([]),[F,_]=i.useState(""),[q,R]=i.useState("released"),[se,V]=i.useState(""),[Q,te]=i.useState("all"),[J,ce]=i.useState("all"),[$,U]=i.useState(!0),[X,T]=i.useState(new Set),[z,G]=i.useState(new Set),[Z,de]=i.useState("/data/movies"),[ye,je]=i.useState("/data/tv"),[Le,fe]=i.useState(0),Ne=50;i.useEffect(()=>{_e(),K(),ie()},[]),i.useEffect(()=>{d(!1),h([]),y([]),f(null),fe(0),K()},[r]);const ie=async()=>{try{const W=await C.getSettings();W.movie_path&&de(W.movie_path),W.tv_path&&je(W.tv_path)}catch(W){console.error("Failed to load settings:",W)}},_e=async()=>{try{const[W,he]=await Promise.all([C.getMovies(),C.getSeries()]),me=new Set(W.items.map(ue=>ue.tmdb_id)),D=new Set(he.items.map(ue=>ue.tvdb_id).filter(Boolean));T(me),G(D)}catch(W){console.error("Failed to load library:",W)}},K=async()=>{try{const W=await C.getQualityProfiles(),he=r==="radarr"?"movie":"series",me=W.filter(D=>!D.media_type||D.media_type==="both"||D.media_type===he);E(me),me.length>0&&!me.find(D=>D.id===F)&&_(me[0].id)}catch(W){console.error("Failed to load quality profiles:",W)}},Fe=async()=>{if(!a||!l){t("Please enter URL and API key","error");return}m(!0);try{const W=r==="radarr"?await C.testRadarr(a,l):await C.testSonarr(a,l);W.success?(d(!0),f(W.version||null),t(`Connected to ${r==="radarr"?"Radarr":"Sonarr"} ${W.version||""}`,"success"),await Se()):t(W.error||"Connection failed","error")}catch(W){t(W.message||"Connection failed","error")}finally{m(!1)}},Se=async()=>{b(!0);try{if(r==="radarr"){const W=await C.getRadarrMovies(a,l);h(W.movies.map(he=>({...he,selected:!1}))),t(`Loaded ${W.total} movies from Radarr`,"info")}else{const W=await C.getSonarrSeries(a,l);y(W.series.map(he=>({...he,selected:!1}))),t(`Loaded ${W.total} series from Sonarr`,"info")}}catch(W){t(W.message||"Failed to load items","error")}finally{b(!1)}},Re=()=>{d(!1),h([]),y([]),f(null),fe(0)},Ie=i.useMemo(()=>j.filter(W=>!(se&&!W.title.toLowerCase().includes(se.toLowerCase())||Q==="yes"&&!W.hasFile||Q==="no"&&W.hasFile||J==="yes"&&!W.monitored||J==="no"&&W.monitored||$&&X.has(W.tmdbId))),[j,se,Q,J,$,X]),Oe=i.useMemo(()=>p.filter(W=>!(se&&!W.title.toLowerCase().includes(se.toLowerCase())||J==="yes"&&!W.monitored||J==="no"&&W.monitored||$&&z.has(W.tvdbId))),[p,se,J,$,z]),De=r==="radarr"?Ie:Oe,I=Math.ceil(De.length/Ne),Ce=De.slice(Le*Ne,(Le+1)*Ne),Te=r==="radarr"?j.filter(W=>W.selected).length:p.filter(W=>W.selected).length,Pe=W=>{r==="radarr"?h(he=>he.map(me=>me.id===W?{...me,selected:!me.selected}:me)):y(he=>he.map(me=>me.id===W?{...me,selected:!me.selected}:me))},Ae=()=>{if(r==="radarr"){const W=new Set(Ie.map(he=>he.id));h(he=>he.map(me=>W.has(me.id)?{...me,selected:!0}:me))}else{const W=new Set(Oe.map(he=>he.id));y(he=>he.map(me=>W.has(me.id)?{...me,selected:!0}:me))}},O=()=>{r==="radarr"?h(W=>W.map(he=>({...he,selected:!1}))):y(W=>W.map(he=>({...he,selected:!1})))},ve=async()=>{var ue,ge;if(!F){t("Please select a quality profile","error");return}const W=r==="radarr"?j.filter(H=>H.selected):p.filter(H=>H.selected);if(W.length===0){t("No items selected","error");return}const he=H=>H.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g," ").trim();k(!0);let me=0,D=0;try{for(const H of W)try{if(r==="radarr"){const re=H;if(X.has(re.tmdbId)){D++;continue}const P=he(`${re.title} (${re.year})`),L=`${Z}/${P}`;await C.addMovie({tmdb_id:re.tmdbId,title:re.title,year:re.year,folder_path:L,quality_profile_id:F,minimum_availability:q,monitored:re.monitored}),T(S=>new Set([...S,re.tmdbId])),me++}else{const re=H;if(z.has(re.tvdbId)){D++;continue}const P=await C.searchTV(re.title),L=((ue=P.results)==null?void 0:ue.find(S=>{var Y,w;return((Y=S.name)==null?void 0:Y.toLowerCase())===re.title.toLowerCase()||((w=S.first_air_date)==null?void 0:w.startsWith(String(re.year)))}))||((ge=P.results)==null?void 0:ge[0]);if(L){const S=he(`${re.title} (${re.year})`),Y=`${ye}/${S}`;await C.addSeries({tmdb_id:L.id,title:re.title,year:re.year,folder_path:Y,quality_profile_id:F,monitored:re.monitored}),G(w=>new Set([...w,re.tvdbId])),me++}else D++}}catch(re){console.error("Failed to import item:",re),D++}me>0&&(t(`Imported ${me} ${r==="radarr"?"movies":"series"}`,"success"),r==="radarr"?h(H=>H.map(re=>re.selected?{...re,selected:!1}:re)):y(H=>H.map(re=>re.selected?{...re,selected:!1}:re))),D>0&&t(`${D} items failed or already in library`,"error")}finally{k(!1),_e()}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Import from Radarr/Sonarr"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Import your existing library from Radarr or Sonarr"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-1",children:[e.jsx("button",{onClick:()=>s("radarr"),className:`px-4 py-2 text-sm font-medium transition-colors ${r==="radarr"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Radarr (Movies)"}),e.jsx("button",{onClick:()=>s("sonarr"),className:`px-4 py-2 text-sm font-medium transition-colors ${r==="sonarr"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Sonarr (TV)"})]}),c&&u&&e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Connected (v",u,")"]})]}),!c&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r==="radarr"?"Radarr":"Sonarr"," URL"]}),e.jsx($e,{value:a,onChange:W=>n(W.target.value),placeholder:`http://localhost:${r==="radarr"?"7878":"8989"}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["e.g., http://192.168.1.100:",r==="radarr"?"7878":"8989"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"API Key"}),e.jsx($e,{type:"password",value:l,onChange:W=>o(W.target.value),placeholder:"Your API key"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Found in ",r==="radarr"?"Radarr":"Sonarr","  Settings  General"]})]})]}),e.jsx(Ee,{onClick:Fe,disabled:x||!a||!l,children:x?"Connecting...":"Connect"})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx($e,{value:se,onChange:W=>{V(W.target.value),fe(0)},placeholder:"Search..."})}),r==="radarr"&&e.jsxs("select",{value:Q,onChange:W=>{te(W.target.value),fe(0)},className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Files"}),e.jsx("option",{value:"yes",children:"Has File"}),e.jsx("option",{value:"no",children:"No File"})]}),e.jsxs("select",{value:J,onChange:W=>{ce(W.target.value),fe(0)},className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"yes",children:"Monitored"}),e.jsx("option",{value:"no",children:"Unmonitored"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:W=>{U(W.target.checked),fe(0)},className:"rounded border-gray-300 dark:border-gray-600"}),"Hide already in library"]}),e.jsx(Ee,{variant:"secondary",onClick:Re,children:"Disconnect"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-3",children:[e.jsxs(Ee,{variant:"secondary",onClick:Ae,disabled:De.length===0,children:["Select All (",De.length,")"]}),e.jsx(Ee,{variant:"secondary",onClick:O,disabled:Te===0,children:"Deselect All"}),e.jsx("div",{className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Te," selected"]}),e.jsxs("select",{value:F,onChange:W=>_(W.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"",children:"Select Profile..."}),N.map(W=>e.jsx("option",{value:W.id,children:W.name},W.id))]}),r==="radarr"&&e.jsxs("select",{value:q,onChange:W=>R(W.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600",children:[e.jsx("option",{value:"announced",children:"Announced"}),e.jsx("option",{value:"inCinemas",children:"In Cinemas"}),e.jsx("option",{value:"released",children:"Released"})]}),e.jsx(Ee,{onClick:ve,disabled:g||Te===0||!F,children:g?"Importing...":`Import (${Te})`})]}),v?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Loading ",r==="radarr"?"movies":"series","..."]}):De.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:["No ",r==="radarr"?"movies":"series"," found"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:$?"All items may already be in your library.":"No items match your filters."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"w-10 px-3 py-3"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500",children:"Title"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 w-20",children:"Year"}),r==="radarr"&&e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 w-24",children:"File"}),r==="sonarr"&&e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 w-32",children:"Episodes"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 w-24",children:"Status"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 w-32",children:"In Library"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Ce.map(W=>{const he=r==="radarr"?X.has(W.tmdbId):z.has(W.tvdbId);return e.jsxs("tr",{className:`transition-colors ${W.selected?"bg-primary-50 dark:bg-primary-900/20":he?"bg-green-50/50 dark:bg-green-900/10":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("input",{type:"checkbox",checked:W.selected||!1,onChange:()=>Pe(W.id),disabled:he,className:"rounded border-gray-300 dark:border-gray-600"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[W.posterUrl?e.jsx("img",{src:W.posterUrl,alt:W.title,className:"w-10 h-15 object-cover rounded flex-shrink-0"}):e.jsx("div",{className:"w-10 h-15 bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:W.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:W.path})]})]})}),e.jsx("td",{className:"px-3 py-3 text-sm text-gray-600 dark:text-gray-400",children:W.year}),r==="radarr"&&e.jsx("td",{className:"px-3 py-3",children:W.hasFile?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded",children:"Yes"}):e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:"No"})}),r==="sonarr"&&e.jsxs("td",{className:"px-3 py-3 text-sm text-gray-600 dark:text-gray-400",children:[W.episodeFileCount||0,"/",W.episodeCount||0,e.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",W.seasonCount||0," seasons)"]})]}),e.jsx("td",{className:"px-3 py-3",children:W.monitored?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:"Monitored"}):e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:"Unmonitored"})}),e.jsx("td",{className:"px-3 py-3",children:he?e.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded",children:" In Library"}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})})]},W.id)})})]})}),I>1&&e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 px-4 py-3",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",Le*Ne+1,"-",Math.min((Le+1)*Ne,De.length)," of ",De.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{variant:"secondary",onClick:()=>fe(W=>Math.max(0,W-1)),disabled:Le===0,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",Le+1," of ",I]}),e.jsx(Ee,{variant:"secondary",onClick:()=>fe(W=>Math.min(I-1,W+1)),disabled:Le>=I-1,children:"Next"})]})]})]})]})]})}const hb={"File Names":[{token:"{Movie Title} ({Release Year}) - {Edition Tags }{[Custom Formats]}{[Quality Full]}{-Release Group}",example:"The Movie - Title (2010) - Ultimate Extended Edition [Surround Sound x264][Bluray-1080p Proper]-EVOLVE"},{token:"{Movie CleanTitle} {Release Year} - {Edition Tags }{[Custom Formats]}{[Quality Full]}{-Release Group}",example:"The Movie Title 2010 - Ultimate Extended Edition [Surround Sound x264][Bluray-1080p Proper]-EVOLVE"},{token:"{Movie.CleanTitle}.{Release.Year}.{Edition.Tags}.{Custom.Formats}.{Quality.Full}{-Release Group}",example:"The.Movie.Title.2010.Ultimate.Extended.Edition.Surround.Sound.x264.Bluray-1080p.Proper-EVOLVE"}],Movie:[{token:"{Movie Title}",example:"Movie's Title"},{token:"{Movie CleanTitle}",example:"Movies Title"},{token:"{Movie TitleThe}",example:"Movie's Title, The"},{token:"{Movie OriginalTitle}",example:" "},{token:"{Movie TitleFirstCharacter}",example:"M"},{token:"{Movie Collection}",example:"The Movie Collection"},{token:"{Movie CleanCollectionThe}",example:"Movies Collection, The"},{token:"{Release Year}",example:"2009"},{token:"{Movie Certification}",example:"R"}],"Movie ID":[{token:"{ImdbId}",example:"tt12345"},{token:"{TmdbId}",example:"123456"}],Quality:[{token:"{Quality Full}",example:"HDTV-720p Proper"},{token:"{Quality Title}",example:"HDTV-720p"}],"Media Info":[{token:"{MediaInfo Simple}",example:"x264 DTS"},{token:"{MediaInfo Full}",example:"x264 DTS [EN+DE]"},{token:"{MediaInfo AudioCodec}",example:"DTS"},{token:"{MediaInfo AudioChannels}",example:"5.1"},{token:"{MediaInfo AudioLanguages}",example:"[EN+DE]"},{token:"{MediaInfo SubtitleLanguages}",example:"[DE]"},{token:"{MediaInfo VideoCodec}",example:"x264"},{token:"{MediaInfo VideoBitDepth}",example:"10"},{token:"{MediaInfo VideoDynamicRange}",example:"HDR"},{token:"{MediaInfo VideoDynamicRangeType}",example:"DV HDR10"}],"Release Group":[{token:"{Release Group}",example:"Rls Grp"}],Edition:[{token:"{Edition Tags}",example:"IMAX"}],"Custom Formats":[{token:"{Custom Formats}",example:"Surround Sound x264"}]},gb={"File Names":[{token:"{Series TitleYear} - S{season:00}E{episode:00} - {Episode CleanTitle} {Quality Full}",example:"The Series Title's! (2010) - S01E01 - Episode Title WEBDL-1080p Proper"},{token:"{Series TitleYear} - {season:0}x{episode:00} - {Episode CleanTitle} {Quality Full}",example:"The Series Title's! (2010) - 1x01 - Episode Title WEBDL-1080p Proper"},{token:"{Series.CleanTitleYear}.S{season:00}E{episode:00}.{Episode.CleanTitle}.{Quality.Full}",example:"The.Series.Titles!.2010.S01E01.Episode.Title.WEBDL-1080p.Proper"}],Series:[{token:"{Series Title}",example:"The Series Title's!"},{token:"{Series CleanTitle}",example:"The Series Title's!"},{token:"{Series TitleYear}",example:"The Series Title's! (2010)"},{token:"{Series CleanTitleYear}",example:"The Series Title's! 2010"},{token:"{Series TitleWithoutYear}",example:"The Series Title's!"},{token:"{Series CleanTitleWithoutYear}",example:"The Series Title's!"},{token:"{Series TitleThe}",example:"Series Title's!, The"},{token:"{Series CleanTitleThe}",example:"Series Title's!, The"},{token:"{Series TitleTheYear}",example:"Series Title's!, The (2010)"},{token:"{Series CleanTitleTheYear}",example:"Series Title's!, The 2010"},{token:"{Series TitleTheWithoutYear}",example:"Series Title's!, The"},{token:"{Series CleanTitleTheWithoutYear}",example:"Series Title's!, The"},{token:"{Series TitleFirstCharacter}",example:"S"},{token:"{Series Year}",example:"2010"}],"Series ID":[{token:"{ImdbId}",example:"tt12345"},{token:"{TmdbId}",example:"11223"},{token:"{TvdbId}",example:"12345"},{token:"{TvMazeId}",example:"54321"}],Season:[{token:"{season:0}",example:"1"},{token:"{season:00}",example:"01"}],Episode:[{token:"{episode:0}",example:"1"},{token:"{episode:00}",example:"01"}],"Air Date":[{token:"{Air-Date}",example:"2016-03-20"},{token:"{Air Date}",example:"2016 03 20"}],"Episode Title":[{token:"{Episode Title}",example:"Episode's Title"},{token:"{Episode CleanTitle}",example:"Episodes Title"}],Quality:[{token:"{Quality Full}",example:"WEBDL-1080p Proper"},{token:"{Quality Title}",example:"WEBDL-1080p"}],"Media Info":[{token:"{MediaInfo Simple}",example:"x264 DTS"},{token:"{MediaInfo Full}",example:"x264 DTS [EN+DE]"},{token:"{MediaInfo AudioCodec}",example:"DTS"},{token:"{MediaInfo AudioChannels}",example:"5.1"},{token:"{MediaInfo AudioLanguages}",example:"[EN+DE]"},{token:"{MediaInfo SubtitleLanguages}",example:"[DE]"},{token:"{MediaInfo VideoCodec}",example:"x264"},{token:"{MediaInfo VideoBitDepth}",example:"10"},{token:"{MediaInfo VideoDynamicRange}",example:"HDR"},{token:"{MediaInfo VideoDynamicRangeType}",example:"DV HDR10"}],"Release Group":[{token:"{Release Group}",example:"Rls Grp"}],"Original Title":[{token:"{Original Title}",example:" "}]},fb={Movie:[{token:"{Movie Title}",example:"Movie's Title"},{token:"{Movie CleanTitle}",example:"Movies Title"},{token:"{Movie TitleThe}",example:"Movie's Title, The"},{token:"{Movie TitleFirstCharacter}",example:"M"},{token:"{Release Year}",example:"2009"}],"Movie ID":[{token:"{ImdbId}",example:"tt12345"},{token:"{TmdbId}",example:"123456"}]},yb={Series:[{token:"{Series Title}",example:"The Series Title's!"},{token:"{Series CleanTitle}",example:"The Series Title's!"},{token:"{Series TitleYear}",example:"The Series Title's! (2010)"},{token:"{Series CleanTitleYear}",example:"The Series Title's! 2010"},{token:"{Series TitleThe}",example:"Series Title's!, The"},{token:"{Series TitleFirstCharacter}",example:"S"},{token:"{Series Year}",example:"2010"}],"Series ID":[{token:"{ImdbId}",example:"tt12345"},{token:"{TmdbId}",example:"11223"},{token:"{TvdbId}",example:"12345"}],Season:[{token:"{season:0}",example:"1"},{token:"{season:00}",example:"01"}]};function Mn({isOpen:t,onClose:r,title:s,tokens:a}){const[n,l]=i.useState("Space ( )"),[o,c]=i.useState("Default Case");return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl max-w-4xl w-full mx-4 max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex justify-end gap-4 px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("select",{value:n,onChange:d=>l(d.target.value),className:"px-3 py-1.5 text-sm border dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{children:"Space ( )"}),e.jsx("option",{children:"Period (.)"}),e.jsx("option",{children:"Underscore (_)"}),e.jsx("option",{children:"Dash (-)"})]}),e.jsxs("select",{value:o,onChange:d=>c(d.target.value),className:"px-3 py-1.5 text-sm border dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{children:"Default Case"}),e.jsx("option",{children:"Lowercase"}),e.jsx("option",{children:"Uppercase"}),e.jsx("option",{children:"Title Case"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[Object.entries(a).map(([d,x])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:d}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(({token:m,example:u})=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 border-r border-gray-200 dark:border-gray-600",children:e.jsx("code",{className:"text-sm font-mono text-gray-800 dark:text-gray-200",children:m})}),e.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-900",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:u})})]},m))})]},d)),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:["* Optionally control truncation to a maximum number of bytes including ellipsis (...). Truncating from the end (e.g. ","{Movie Title:30}",") or the beginning (e.g. ","{Movie Title:-30}",") are both supported."]})]}),e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:e.jsx(Ee,{variant:"secondary",onClick:r,children:"Close"})})]})}):null}function vb({config:t,onChange:r,onSave:s,moviePreview:a,episodePreview:n}){const[l,o]=i.useState("movies"),[c,d]=i.useState(null);return e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>o("movies"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${l==="movies"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Movie Naming"}),e.jsx("button",{onClick:()=>o("episodes"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${l==="episodes"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Episode Naming"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[l==="movies"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Rename Movies"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically rename movie files when importing"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.rename_movies,onChange:x=>r({...t,rename_movies:x.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Standard Movie Format"}),e.jsxs("button",{onClick:()=>d("movieFile"),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View Tokens"]})]}),e.jsx($e,{type:"text",value:t.standard_movie_format,onChange:x=>r({...t,standard_movie_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800",disabled:!t.rename_movies}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded font-mono",children:a||"The Movie Title (2024) [Bluray-1080p].mkv"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Movie Folder Format"}),e.jsxs("button",{onClick:()=>d("movieFolder"),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View Tokens"]})]}),e.jsx($e,{type:"text",value:t.movie_folder_format,onChange:x=>r({...t,movie_folder_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800"})]})]}),l==="episodes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Rename Episodes"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically rename episode files when importing"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.rename_episodes,onChange:x=>r({...t,rename_episodes:x.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Standard Episode Format"}),e.jsxs("button",{onClick:()=>d("episodeFile"),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View Tokens"]})]}),e.jsx($e,{type:"text",value:t.standard_episode_format,onChange:x=>r({...t,standard_episode_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800",disabled:!t.rename_episodes}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-2 rounded font-mono",children:n||"The Series Title - S01E01 - Episode Title [WEBDL-1080p].mkv"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Daily Episode Format"}),e.jsx($e,{type:"text",value:t.daily_episode_format,onChange:x=>r({...t,daily_episode_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800",disabled:!t.rename_episodes}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"For daily shows that air by date"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Anime Episode Format"}),e.jsx($e,{type:"text",value:t.anime_episode_format,onChange:x=>r({...t,anime_episode_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800",disabled:!t.rename_episodes}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"For anime with absolute episode numbers"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Series Folder Format"}),e.jsxs("button",{onClick:()=>d("seriesFolder"),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"View Tokens"]})]}),e.jsx($e,{type:"text",value:t.series_folder_format,onChange:x=>r({...t,series_folder_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Season Folder Format"}),e.jsx($e,{type:"text",value:t.season_folder_format,onChange:x=>r({...t,season_folder_format:x.target.value}),className:"font-mono text-sm dark:bg-gray-800"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Multi-Episode Style"}),e.jsxs("select",{value:t.multi_episode_style,onChange:x=>r({...t,multi_episode_style:x.target.value}),className:"w-full px-3 py-2 border dark:bg-gray-800 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:"extend",children:"Extend (S01E01-02-03)"}),e.jsx("option",{value:"duplicate",children:"Duplicate (S01E01, S01E02, S01E03)"}),e.jsx("option",{value:"prefixed_range",children:"Prefixed Range (S01E01-E03)"}),e.jsx("option",{value:"range",children:"Range (S01E01-03)"}),e.jsx("option",{value:"scene",children:"Scene (S01E01E02E03)"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Character Replacement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.replace_illegal_characters,onChange:x=>r({...t,replace_illegal_characters:x.target.checked}),className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Replace Illegal Characters"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Remove characters not allowed in file names"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Colon Replacement"}),e.jsxs("select",{value:t.colon_replacement,onChange:x=>r({...t,colon_replacement:x.target.value}),className:"w-full px-3 py-2 border dark:bg-gray-800 dark:border-gray-600 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:" - ",children:"Space Dash Space ( - )"}),e.jsx("option",{value:" ",children:"Space"}),e.jsx("option",{value:"-",children:"Dash (-)"}),e.jsx("option",{value:"",children:"Delete"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Ee,{onClick:s,children:"Save Naming Configuration"})})]}),e.jsx(Mn,{isOpen:c==="movieFile",onClose:()=>d(null),title:"File Name Tokens - Movies",tokens:hb}),e.jsx(Mn,{isOpen:c==="movieFolder",onClose:()=>d(null),title:"Folder Name Tokens - Movies",tokens:fb}),e.jsx(Mn,{isOpen:c==="episodeFile",onClose:()=>d(null),title:"File Name Tokens - Episodes",tokens:gb}),e.jsx(Mn,{isOpen:c==="seriesFolder",onClose:()=>d(null),title:"Folder Name Tokens - Series",tokens:yb})]})}const bb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),Iu=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),jb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),kb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),Bu=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),wb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),Nb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),Cb=()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),Ln=()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Sb=[{value:"ReleaseTitleSpecification",label:"Release Title (Regex)"},{value:"ReleaseGroupSpecification",label:"Release Group (Regex)"},{value:"SourceSpecification",label:"Source"},{value:"ResolutionSpecification",label:"Resolution"},{value:"LanguageSpecification",label:"Language"},{value:"SizeSpecification",label:"Size"},{value:"QualityModifierSpecification",label:"Quality Modifier"}],zu=[{value:1,label:"CAM"},{value:2,label:"TeleCine"},{value:3,label:"TeleSync"},{value:5,label:"DVD"},{value:6,label:"TV"},{value:7,label:"WEBDL"},{value:8,label:"WEBRip"},{value:9,label:"BluRay"}],$u=[{value:480,label:"480p"},{value:720,label:"720p"},{value:1080,label:"1080p"},{value:2160,label:"2160p/4K"}],Ou=[{value:1,label:"English"},{value:3,label:"French"},{value:4,label:"German"},{value:5,label:"Spanish"},{value:6,label:"Italian"},{value:8,label:"Japanese"}],Wu=[{value:1,label:"REMUX"},{value:2,label:"PROPER"},{value:3,label:"REPACK"},{value:4,label:"REAL"}];function _b(){const[t,r]=i.useState([]),[s,a]=i.useState([]),[n,l]=i.useState(!0),[o,c]=i.useState(null),[d,x]=i.useState("all"),[m,u]=i.useState(!1),[f,j]=i.useState(null),[h,p]=i.useState(""),[y,v]=i.useState([]),[b,g]=i.useState(!1),[k,N]=i.useState("both"),[E,F]=i.useState(!1),[_,q]=i.useState(""),[R,se]=i.useState([]),[V,Q]=i.useState(!0),[te,J]=i.useState("both"),[ce,$]=i.useState([]),[U,X]=i.useState(!1),[T,z]=i.useState(null),[G,Z]=i.useState(!1),[de,ye]=i.useState(""),[je,Le]=i.useState(""),[fe,Ne]=i.useState(null),[ie,_e]=i.useState(""),[K,Fe]=i.useState([]),[Se,Re]=i.useState(new Set),[Ie,Oe]=i.useState(null),De=d==="all"?t:t.filter(S=>S.media_type===d||S.media_type==="both");i.useEffect(()=>{I()},[]),i.useEffect(()=>{ie&&Ce(ie)},[ie]);const I=async()=>{try{l(!0);const[S,Y]=await Promise.all([C.getCustomFormats(),C.getQualityProfiles()]);r(S),a(Y),Y.length>0&&!ie&&_e(Y[0].id)}catch(S){c(S.message||"Failed to load data")}finally{l(!1)}},Ce=async S=>{try{const Y=await C.getProfileCustomFormatScores(S);Fe(Y)}catch(Y){console.error("Failed to load profile scores:",Y)}},Te=()=>{j(null),p(""),v([{name:"New Condition",implementation:"ReleaseTitleSpecification",negate:!1,required:!0,fields:{value:""}}]),g(!1),N("both"),u(!0)},Pe=S=>{j(S),p(S.name),v([...S.specifications]),g(S.include_when_renaming),N(S.media_type||"both"),u(!0)},Ae=async()=>{try{if(!h.trim()){alert("Name is required");return}f?await C.updateCustomFormat(f.id,{name:h,media_type:k,specifications:y,include_when_renaming:b}):await C.createCustomFormat({name:h,media_type:k,specifications:y,include_when_renaming:b}),u(!1),I()}catch(S){alert(S.message||"Failed to save custom format")}},O=async S=>{Oe(S)},ve=async()=>{if(Ie)try{await C.deleteCustomFormat(Ie.id),I()}catch(S){alert(S.message||"Failed to delete custom format")}finally{Oe(null)}},W=async()=>{try{if(!_.trim()){alert("Please paste JSON to import");return}let S;try{S=JSON.parse(_)}catch{alert("Invalid JSON format");return}const Y=t.map(ne=>ne.name.toLowerCase()),w=Array.isArray(S)?S:[S],A=[];for(const ne of w)ne.name&&Y.includes(ne.name.toLowerCase())&&A.push({name:ne.name,newName:ne.name+" (imported)"});if(A.length>0){$(A),z(S),X(!0);return}await he(S)}catch(S){alert(S.message||"Failed to import custom format")}},he=async(S,Y)=>{try{let w=S;if(Y&&Y.length>0){const A=new Map(Y.map(ne=>[ne.name.toLowerCase(),ne.newName]));Array.isArray(w)?w=w.map(ne=>{var xe;return{...ne,name:A.get((xe=ne.name)==null?void 0:xe.toLowerCase())||ne.name}}):w.name&&A.has(w.name.toLowerCase())&&(w={...w,name:A.get(w.name.toLowerCase())})}if(R.length>0)for(const A of R)Array.isArray(w)?await C.bulkImportCustomFormats(w,A,V,te):await C.importCustomFormat(w,A,void 0,te);else Array.isArray(w)?await C.bulkImportCustomFormats(w,void 0,V,te):await C.importCustomFormat(w,void 0,void 0,te);F(!1),X(!1),q(""),se([]),J("both"),$([]),z(null),I(),R.length>0&&Ce(R[0])}catch(w){alert(w.message||"Failed to import custom format")}},me=async()=>{try{if(!de.trim()){alert("Please enter a release title to test");return}const S=await C.testReleaseAgainstFormats(de,je||void 0);Ne(S)}catch(S){alert(S.message||"Failed to test release")}},D=async(S,Y)=>{try{await C.setProfileCustomFormatScore(ie,S,Y),Ce(ie)}catch(w){console.error("Failed to update score:",w)}},ue=()=>{v([...y,{name:"New Condition",implementation:"ReleaseTitleSpecification",negate:!1,required:!0,fields:{value:""}}])},ge=(S,Y)=>{const w=[...y];w[S]={...w[S],...Y},v(w)},H=S=>{v(y.filter((Y,w)=>w!==S))},re=S=>{const Y=new Set(Se);Y.has(S)?Y.delete(S):Y.add(S),Re(Y)},P=S=>{var Y,w,A,ne;switch(S.implementation){case"SourceSpecification":return((Y=zu.find(xe=>xe.value===S.fields.value))==null?void 0:Y.label)||String(S.fields.value);case"ResolutionSpecification":return((w=$u.find(xe=>xe.value===S.fields.value))==null?void 0:w.label)||String(S.fields.value);case"LanguageSpecification":return((A=Ou.find(xe=>xe.value===S.fields.value))==null?void 0:A.label)||String(S.fields.value);case"QualityModifierSpecification":return((ne=Wu.find(xe=>xe.value===S.fields.value))==null?void 0:ne.label)||String(S.fields.value);case"SizeSpecification":return`${S.fields.min||0}GB - ${S.fields.max||""}GB`;default:return String(S.fields.value)}},L=S=>{const Y=K.find(w=>w.custom_format_id===S);return(Y==null?void 0:Y.score)||0};return n?e.jsx("div",{className:"p-4",children:"Loading custom formats..."}):e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-400 p-3 rounded",children:o}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Custom Formats"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Define rules to score and filter releases. Compatible with Trash Guides JSON."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ee,{variant:"secondary",onClick:()=>Z(!0),className:"flex items-center gap-2",children:[e.jsx(Bu,{}),"Test"]}),e.jsxs(Ee,{variant:"secondary",onClick:()=>F(!0),className:"flex items-center gap-2",children:[e.jsx(kb,{}),"Import"]}),e.jsxs(Ee,{variant:"primary",onClick:Te,className:"flex items-center gap-2",children:[e.jsx(bb,{}),"Add Format"]})]})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:e.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:"Profile:"}),e.jsx("div",{className:"flex items-center gap-1 p-1 rounded",style:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)"},children:s.map(S=>e.jsx("button",{onClick:()=>_e(S.id),className:`px-3 py-1.5 text-sm rounded transition-colors ${ie===S.id?"text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:ie===S.id?{backgroundColor:"var(--primary-color, #3b82f6)"}:{color:"var(--text-secondary)"},children:S.name},S.id))}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Scores are saved per profile"})]})}),e.jsxs("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",style:{backgroundColor:"var(--surface-bg)",borderBottom:"1px solid var(--border-color)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Filter:"}),[{value:"all",label:"All",color:null},{value:"movie",label:"Movies",color:"#7fc8f8"},{value:"series",label:"Series",color:"#ea9ab2"},{value:"both",label:"Both",color:"#ffe45e"}].map(S=>e.jsx("button",{onClick:()=>x(S.value),className:`px-2 py-1 text-xs rounded transition-colors ${d===S.value&&!S.color?"bg-gray-600 text-white":d!==S.value?"bg-gray-700 hover:bg-gray-600 text-gray-300":""}`,style:d===S.value&&S.color?{backgroundColor:S.color,color:"#000"}:{},children:S.label},S.value))]}),e.jsxs("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:[De.length," format",De.length!==1?"s":""]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Conditions"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider w-32",style:{color:"var(--text-muted)"},children:"Score"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider w-24",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:De.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:t.length===0?"No custom formats defined. Import from Trash Guides or create your own.":"No formats match the selected filter."})}):De.map(S=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>re(S.id),className:"flex items-center gap-2 text-left",children:[Se.has(S.id)?e.jsx("span",{style:{color:"var(--text-muted)"},children:e.jsx(wb,{})}):e.jsx("span",{style:{color:"var(--text-muted)"},children:e.jsx(Nb,{})}),e.jsx("span",{className:"font-medium",style:{color:"var(--text-primary)"},children:S.name}),S.trash_id&&e.jsx("span",{className:"text-xs ml-2",style:{color:"var(--text-muted)"},children:"(Trash Guides)"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-0.5 text-xs rounded",style:{backgroundColor:S.media_type==="movie"?"#7fc8f8":S.media_type==="series"?"#ea9ab2":"#ffe45e",color:"#000"},children:S.media_type==="movie"?"Movie":S.media_type==="series"?"Series":"Both"})}),e.jsxs("td",{className:"px-4 py-3 text-sm",style:{color:"var(--text-secondary)"},children:[S.specifications.length," condition",S.specifications.length!==1?"s":""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",value:L(S.id),onChange:Y=>D(S.id,parseInt(Y.target.value)||0),className:"w-24 px-2 py-1 text-sm",style:{backgroundColor:"var(--input-bg)",border:"1px solid var(--input-border)",color:"var(--input-text)"}})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>Pe(S),className:"p-1.5 hover:bg-gray-700",title:"Edit",style:{color:"var(--text-secondary)"},children:e.jsx(jb,{})}),e.jsx("button",{onClick:()=>O(S),className:"p-1.5 hover:bg-gray-700 text-red-400",title:"Delete",children:e.jsx(Iu,{})})]})})]},S.id),Se.has(S.id)&&e.jsx("tr",{style:{backgroundColor:"var(--surface-bg)"},children:e.jsx("td",{colSpan:5,className:"px-8 py-4",children:e.jsx("div",{className:"space-y-2",children:S.specifications.map((Y,w)=>e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Y.required?"bg-blue-600":"bg-gray-600"}`,children:Y.required?"Required":"Optional"}),e.jsx("span",{className:Y.negate?"text-red-400":"text-green-400",children:Y.negate?"Must NOT match":"Must match"}),e.jsxs("span",{className:"text-gray-300",children:[Y.name,":"]}),e.jsx("code",{className:"bg-gray-900 px-2 py-0.5 rounded text-xs",children:P(Y)})]},w))})})},`${S.id}-details`)]}))})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:f?"Edit Custom Format":"New Custom Format"}),e.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-gray-700 rounded",children:e.jsx(Ln,{})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:h,onChange:S=>p(S.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2",placeholder:"Custom Format Name"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"includeRename",checked:b,onChange:S=>g(S.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"includeRename",className:"text-sm",children:"Include when renaming"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Media Type"}),e.jsx("div",{className:"flex gap-2",children:[{value:"movie",label:"Movies",color:"#7fc8f8"},{value:"series",label:"Series",color:"#ea9ab2"},{value:"both",label:"Both",color:"#ffe45e"}].map(S=>e.jsx("button",{type:"button",onClick:()=>N(S.value),className:`px-3 py-1.5 text-sm rounded transition-colors ${k!==S.value?"bg-gray-700 hover:bg-gray-600 text-gray-300":""}`,style:k===S.value?{backgroundColor:S.color,color:"#000"}:{},children:S.label},S.value))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Conditions"}),e.jsx("button",{onClick:ue,className:"text-sm text-blue-400 hover:text-blue-300",children:"+ Add Condition"})]}),e.jsx("div",{className:"space-y-3",children:y.map((S,Y)=>e.jsxs("div",{className:"bg-gray-750 p-3 rounded space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:S.name,onChange:w=>ge(Y,{name:w.target.value}),className:"flex-1 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",placeholder:"Condition name"}),e.jsx("button",{onClick:()=>H(Y),className:"p-1 hover:bg-gray-600 rounded text-red-400",children:e.jsx(Iu,{})})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("select",{value:S.implementation,onChange:w=>ge(Y,{implementation:w.target.value,fields:{value:""}}),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:Sb.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:S.negate,onChange:w=>ge(Y,{negate:w.target.checked})}),"Negate"]}),e.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[e.jsx("input",{type:"checkbox",checked:S.required,onChange:w=>ge(Y,{required:w.target.checked})}),"Required"]})]}),e.jsx("div",{children:["ReleaseTitleSpecification","ReleaseGroupSpecification"].includes(S.implementation)?e.jsx("input",{type:"text",value:S.fields.value,onChange:w=>ge(Y,{fields:{value:w.target.value}}),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm font-mono",placeholder:"Regex pattern (e.g. \\bREMUX\\b)"}):S.implementation==="SourceSpecification"?e.jsx("select",{value:S.fields.value,onChange:w=>ge(Y,{fields:{value:parseInt(w.target.value)}}),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:zu.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}):S.implementation==="ResolutionSpecification"?e.jsx("select",{value:S.fields.value,onChange:w=>ge(Y,{fields:{value:parseInt(w.target.value)}}),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:$u.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}):S.implementation==="LanguageSpecification"?e.jsx("select",{value:S.fields.value,onChange:w=>ge(Y,{fields:{value:parseInt(w.target.value)}}),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:Ou.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}):S.implementation==="QualityModifierSpecification"?e.jsx("select",{value:S.fields.value,onChange:w=>ge(Y,{fields:{value:parseInt(w.target.value)}}),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",children:Wu.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}):S.implementation==="SizeSpecification"?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",value:S.fields.min||"",onChange:w=>ge(Y,{fields:{...S.fields,min:parseFloat(w.target.value)||0}}),className:"w-24 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",placeholder:"Min GB"}),e.jsx("span",{className:"text-gray-400",children:"to"}),e.jsx("input",{type:"number",value:S.fields.max||"",onChange:w=>ge(Y,{fields:{...S.fields,max:parseFloat(w.target.value)||void 0}}),className:"w-24 bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm",placeholder:"Max GB"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"GB"})]}):null})]},Y))})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"}),e.jsx("button",{onClick:Ae,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded",children:"Save"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Import Custom Format"}),e.jsx("button",{onClick:()=>F(!1),className:"p-1 hover:bg-gray-700 rounded",children:e.jsx(Ln,{})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Paste Trash Guides JSON (single format or array)"}),e.jsx("textarea",{value:_,onChange:S=>q(S.target.value),className:"w-full h-64 bg-gray-700 border border-gray-600 rounded px-3 py-2 font-mono text-sm",placeholder:'{"trash_id": "...", "name": "...", "specifications": [...]}'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Media Type"}),e.jsx("div",{className:"flex gap-2",children:[{value:"movie",label:"Movies",color:"#7fc8f8"},{value:"series",label:"Series",color:"#ea9ab2"},{value:"both",label:"Both",color:"#ffe45e"}].map(S=>e.jsx("button",{onClick:()=>J(S.value),className:`px-3 py-1.5 text-sm rounded transition-colors ${te!==S.value?"bg-gray-700 hover:bg-gray-600 text-gray-300":""}`,style:te===S.value?{backgroundColor:S.color,color:"#000"}:{},children:S.label},S.value))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"TRaSH Guides have different formats for Movies vs Series with the same names"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Assign to Quality Profiles (optional)"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto bg-gray-700 border border-gray-600 p-3",children:s.map(S=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-600 p-1 -m-1",children:[e.jsx("input",{type:"checkbox",checked:R.includes(S.id),onChange:Y=>{Y.target.checked?se([...R,S.id]):se(R.filter(w=>w!==S.id))},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:S.name})]},S.id))}),R.length>0&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[R.length," profile",R.length!==1?"s":""," selected"]})]}),R.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"useDefaultScore",checked:V,onChange:S=>Q(S.target.checked)}),e.jsx("label",{htmlFor:"useDefaultScore",className:"text-sm",children:"Use default scores from Trash Guides"})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-700 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded",children:"Import"})]})]})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[110]",children:e.jsxs("div",{className:"rounded-lg w-full max-w-lg",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",style:{borderColor:"var(--border-color)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Duplicate Names Found"}),e.jsx("button",{onClick:()=>{X(!1),$([]),z(null)},className:"p-1 hover:bg-gray-700 rounded",children:e.jsx(Ln,{})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"The following custom formats have names that already exist. Please rename them to continue:"}),e.jsx("div",{className:"space-y-3",children:ce.map((S,Y)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-red-400 min-w-[150px] truncate",title:S.name,children:S.name}),e.jsx("span",{style:{color:"var(--text-muted)"},children:""}),e.jsx("input",{type:"text",value:S.newName,onChange:w=>{const A=[...ce];A[Y]={...S,newName:w.target.value},$(A)},className:"flex-1 px-3 py-1.5 text-sm border rounded",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]},Y))})]}),e.jsxs("div",{className:"p-4 border-t flex justify-end gap-2",style:{borderColor:"var(--border-color)"},children:[e.jsx("button",{onClick:()=>{X(!1),$([]),z(null)},className:"px-4 py-2 hover:bg-gray-600 rounded",style:{backgroundColor:"var(--hover-bg)"},children:"Cancel"}),e.jsx("button",{onClick:()=>he(T,ce),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:"Import with New Names"})]})]})}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Test Release"}),e.jsx("button",{onClick:()=>{Z(!1),Ne(null)},className:"p-1 hover:bg-gray-700 rounded",children:e.jsx(Ln,{})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Release Title"}),e.jsx("input",{type:"text",value:de,onChange:S=>ye(S.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 font-mono text-sm",placeholder:"Movie.Name.2024.2160p.WEB-DL.DDP5.1.Atmos.DV.HDR.H.265-GROUP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quality Profile (for score calculation)"}),e.jsxs("select",{value:je,onChange:S=>Le(S.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"No profile (just show matches)"}),s.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("button",{onClick:me,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded flex items-center justify-center gap-2",children:[e.jsx(Bu,{}),"Test Release"]}),fe&&e.jsxs("div",{className:"bg-gray-750 p-4 rounded space-y-3",children:[e.jsxs("div",{className:"font-medium",children:["Results for: ",e.jsx("code",{className:"text-sm",children:fe.title})]}),fe.totalScore!==void 0&&e.jsxs("div",{className:"text-lg",children:["Total Score: ",e.jsx("span",{className:fe.totalScore>=0?"text-green-400":"text-red-400",children:fe.totalScore})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Matched Formats:"}),fe.matchedFormats.length===0?e.jsx("div",{className:"text-gray-400 text-sm",children:"No custom formats matched"}):e.jsx("div",{className:"space-y-1",children:fe.matchedFormats.map((S,Y)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400",children:e.jsx(Cb,{})}),S.format]}),S.score!==void 0&&e.jsxs("span",{className:S.score>=0?"text-green-400":"text-red-400",children:[S.score>0?"+":"",S.score]})]},Y))})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-700 flex justify-end",children:e.jsx(Ee,{variant:"secondary",onClick:()=>{Z(!1),Ne(null)},children:"Close"})})]})}),e.jsx(cr,{isOpen:!!Ie,title:"Delete Custom Format",message:`Are you sure you want to delete "${Ie==null?void 0:Ie.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"danger",onConfirm:ve,onCancel:()=>Oe(null)})]})}function Mb(t){return e.jsx("div",{children:t.namingConfig&&e.jsx(vb,{config:t.namingConfig,onChange:t.setNamingConfig,onSave:async()=>{try{await C.updateNamingConfig(t.namingConfig),t.addToast({type:"success",message:"Naming configuration saved!"});const[r,s]=await Promise.all([C.previewNaming("movie"),C.previewNaming("episode")]);t.setNamingPreview({movie:r.preview,episode:s.preview})}catch{t.addToast({type:"error",message:"Failed to save naming configuration"})}},moviePreview:t.namingPreview.movie,episodePreview:t.namingPreview.episode})})}function Lb(t){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Library Paths"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure where your media files are stored"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Path"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:[e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Movies"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx($e,{type:"text",value:t.moviePath,onChange:r=>t.setMoviePath(r.target.value),placeholder:"/data/media/movies",className:"dark:bg-gray-800/50 font-mono text-sm max-w-lg"})}),e.jsx("td",{className:"px-4 py-4",children:t.moviePath?e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Configured"}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Not set"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>t.setBrowsingFor("movie"),children:"Browse"})})]}),e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"TV Shows"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx($e,{type:"text",value:t.tvPath,onChange:r=>t.setTvPath(r.target.value),placeholder:"/data/media/tv",className:"dark:bg-gray-800/50 font-mono text-sm max-w-lg"})}),e.jsx("td",{className:"px-4 py-4",children:t.tvPath?e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",children:"Configured"}):e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Not set"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>t.setBrowsingFor("tv"),children:"Browse"})})]})]})]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Ee,{onClick:t.handleSavePaths,className:"px-6 h-10",children:"Save Paths"})}),t.browsingFor&&e.jsx(ql,{currentPath:t.browsingFor==="movie"?t.moviePath:t.tvPath,onSelect:r=>{t.browsingFor==="movie"?t.setMoviePath(r):t.setTvPath(r)},onClose:()=>t.setBrowsingFor(null)})]})}function Tb(){const[t,r]=i.useState([]),[s,a]=i.useState(!0),[n,l]=i.useState(null),{addToast:o}=vr();i.useEffect(()=>{c();const v=setInterval(c,5e3);return()=>clearInterval(v)},[]);const c=async()=>{try{const v=await C.getWorkers();r(v)}catch(v){console.error("Failed to load workers:",v)}finally{a(!1)}},d=async v=>{l(v);try{await C.startWorker(v),o({type:"success",message:"Task started"}),await c()}catch{o({type:"error",message:"Failed to start task"})}finally{l(null)}},x=async v=>{l(v);try{await C.stopWorker(v),o({type:"success",message:"Task stopped"}),await c()}catch{o({type:"error",message:"Failed to stop task"})}finally{l(null)}},m=async v=>{l(v+"-run");try{await C.runWorkerNow(v),o({type:"success",message:"Task triggered"}),await c()}catch{o({type:"error",message:"Failed to run task"})}finally{l(null)}},u=async(v,b)=>{try{await C.updateWorkerInterval(v,b),o({type:"success",message:"Interval updated"}),await c()}catch{o({type:"error",message:"Failed to update interval"})}},f=v=>{if(!v)return"Never";const b=new Date(v),k=new Date().getTime()-b.getTime();return k<6e4?"Just now":k<36e5?`${Math.floor(k/6e4)}m ago`:k<864e5?`${Math.floor(k/36e5)}h ago`:b.toLocaleDateString()},j=[{label:"5 sec",value:5e3},{label:"30 sec",value:3e4},{label:"1 min",value:6e4},{label:"5 min",value:3e5},{label:"15 min",value:9e5},{label:"30 min",value:18e5},{label:"1 hour",value:36e5},{label:"6 hours",value:216e5},{label:"12 hours",value:432e5},{label:"24 hours",value:864e5}],h=[{name:"Media Management",icon:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z",ids:["download-sync","library-refresh","metadata-refresh"]},{name:"Search & Indexers",icon:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",ids:["rss-sync","missing-search","cutoff-search"]},{name:"Lists & Import",icon:"M4 6h16M4 10h16M4 14h16M4 18h16",ids:["import-list-sync"]},{name:"Maintenance",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",ids:["activity-cleanup","database-backup"]}];if(s)return e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"Loading tasks..."});const p=t.filter(v=>v.status==="running").length,y=t.filter(v=>v.status==="error").length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Scheduled Tasks"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage background tasks that run automatically"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-green-100 dark:bg-green-900/30",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:[p," Running"]})]}),y>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-red-100 dark:bg-red-900/30",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:[y," Error"]})]})]})]}),h.map(v=>{const b=t.filter(g=>v.ids.includes(g.id));return b.length===0?null:e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:v.icon})}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:v.name})]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:b.map(g=>e.jsxs("div",{className:"px-4 py-3 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-gray-800/30 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:g.status==="running"?e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse",title:"Running"}):g.status==="error"?e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500",title:"Error"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300 dark:bg-gray-600",title:"Stopped"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:g.name}),g.errorMessage&&e.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400 truncate max-w-xs",title:g.errorMessage,children:["(",g.errorMessage,")"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:g.description})]}),e.jsxs("div",{className:"hidden sm:block text-right flex-shrink-0 w-20",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last run"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:f(g.lastRun)})]}),e.jsx("div",{className:"flex-shrink-0 w-24",children:e.jsx("select",{value:g.interval||0,onChange:k=>u(g.id,parseInt(k.target.value)),className:"w-full text-xs px-2 py-1.5 rounded border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:j.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))})}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(g.id),disabled:n===g.id+"-run",className:"p-1.5 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50",title:"Run Now",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),g.status==="running"?e.jsx("button",{onClick:()=>x(g.id),disabled:n===g.id,className:"p-1.5 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors disabled:opacity-50",title:"Stop Task",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]})}):e.jsx("button",{onClick:()=>d(g.id),disabled:n===g.id,className:"p-1.5 text-green-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded transition-colors disabled:opacity-50",title:"Start Task",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})]})]},g.id))})]},v.name)}),t.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{children:"No scheduled tasks configured"})]})]})}function Pb({addToast:t}){const[r,s]=i.useState(null),[a,n]=i.useState(!0),[l,o]=i.useState(!1),[c,d]=i.useState(!1),[x,m]=i.useState(""),[u,f]=i.useState(!1),[j,h]=i.useState(null),[p,y]=i.useState(null),[v,b]=i.useState(null),[g,k]=i.useState(!1),[N,E]=i.useState(null),[F,_]=i.useState(new Set),[q,R]=i.useState(!1),[se,V]=i.useState("daily"),[Q,te]=i.useState("03:00"),[J,ce]=i.useState(null),[$,U]=i.useState([]),[X,T]=i.useState(!1),[z,G]=i.useState(null),[Z,de]=i.useState(!1);i.useEffect(()=>{ye()},[]);const ye=async()=>{await Promise.all([je(),Le(),fe(),Ne()])},je=async()=>{try{const O=await C.getBackupInfo();s(O)}catch(O){console.error("Failed to load backup info:",O)}finally{n(!1)}},Le=async()=>{try{const O=await C.getSettings();V(O.backup_schedule_frequency||"daily"),te(O.backup_schedule_time||"03:00"),ce(O.backup_last_scheduled||null)}catch(O){console.error("Failed to load schedule settings:",O)}},fe=async()=>{try{const O=await C.getScheduledBackups();U(O)}catch(O){console.error("Failed to load scheduled backups:",O)}},Ne=async()=>{try{const ve=(await C.getWorkers()).find(W=>W.id==="database-backup");G(ve)}catch(O){console.error("Failed to load backup worker:",O)}},ie=async()=>{de(!0);try{(z==null?void 0:z.status)==="running"?(await C.stopWorker("database-backup"),t({type:"info",message:"Scheduled backups disabled"})):(await C.startWorker("database-backup"),t({type:"success",message:"Scheduled backups enabled"})),await Ne()}catch{t({type:"error",message:"Failed to toggle backup schedule"})}finally{de(!1)}},_e=async()=>{T(!0);try{await C.updateSettings({backup_schedule_frequency:se,backup_schedule_time:Q}),t({type:"success",message:"Schedule saved"})}catch{t({type:"error",message:"Failed to save schedule"})}finally{T(!1)}},K=async O=>{try{await C.deleteScheduledBackup(O),U(ve=>ve.filter(W=>W!==O)),t({type:"success",message:"Backup deleted"})}catch{t({type:"error",message:"Failed to delete backup"})}},Fe=async O=>{try{const ve=await C.downloadScheduledBackup(O),W=window.URL.createObjectURL(ve),he=document.createElement("a");he.href=W,he.download=O,document.body.appendChild(he),he.click(),window.URL.revokeObjectURL(W),document.body.removeChild(he)}catch{t({type:"error",message:"Failed to download backup"})}},Se=async()=>{o(!0);try{const O=await C.createBackup(),ve=window.URL.createObjectURL(O),W=document.createElement("a");W.href=ve,W.download=`mediastack-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(ve),document.body.removeChild(W),t({type:"success",message:"Backup downloaded"})}catch{t({type:"error",message:"Failed to create backup"})}finally{o(!1)}},Re=async O=>{var W;const ve=(W=O.target.files)==null?void 0:W[0];if(ve){y(ve),R(!0);try{const he=await ve.text(),me=JSON.parse(he);b(me);const D=await C.previewBackup(me);E(D);const ue=new Set;D.preview.forEach(ge=>{ge.tables.forEach(H=>{H.available&&ue.add(H.key)})}),_(ue),k(!0)}catch{t({type:"error",message:"Invalid backup file format"}),y(null)}finally{R(!1),O.target.value=""}}},Ie=O=>{_(ve=>{const W=new Set(ve);return W.has(O)?W.delete(O):W.add(O),W})},Oe=O=>{const ve=O.tables.filter(he=>he.available).map(he=>he.key),W=ve.every(he=>F.has(he));_(he=>{const me=new Set(he);return W?ve.forEach(D=>me.delete(D)):ve.forEach(D=>me.add(D)),me})},De=()=>{if(!N)return;const O=new Set;N.preview.forEach(ve=>{ve.tables.forEach(W=>{W.available&&O.add(W.key)})}),_(O)},I=()=>_(new Set),Ce=async()=>{var O,ve;if(!(!v||F.size===0)){k(!1),d(!0),m("Starting restore...");try{const W=await C.restoreBackup(v,Array.from(F));m(W.message||"Restore completed successfully"),f(!0),setTimeout(()=>window.location.reload(),2e3)}catch(W){h(((ve=(O=W.response)==null?void 0:O.data)==null?void 0:ve.error)||W.message||"Restore failed")}}},Te=()=>{k(!1),y(null),b(null),E(null),_(new Set)},Pe=O=>{const ve=O.match(/(\d{4}-\d{2}-\d{2})T(\d{2})-(\d{2})/);return ve?new Date(`${ve[1]}T${ve[2]}:${ve[3]}:00`).toLocaleString():O};if(a)return e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"Loading..."});const Ae=(z==null?void 0:z.status)==="running";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage database backups and restore from previous snapshots"})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Manual Backup"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Download a JSON backup of your database (movies, series, profiles, settings)"}),r&&e.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:Object.entries(r.counts).map(([O,ve])=>e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:[O,": ",ve]},O))})]}),e.jsxs("button",{onClick:Se,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium transition-colors disabled:opacity-50",children:[l?e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l?"Creating...":"Download"]})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Scheduled Backup"}),e.jsxs("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${Ae?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:[Ae&&e.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full mr-1.5 animate-pulse"}),Ae?"Running":"Stopped"]})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Automatically backup the database to /backup directory"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Schedule:"}),e.jsxs("select",{value:se,onChange:O=>V(O.target.value),className:"text-xs px-2 py-1 rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-0 focus:ring-2 focus:ring-blue-500 cursor-pointer",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"at"}),e.jsx("input",{type:"time",value:Q,onChange:O=>te(O.target.value),className:"text-xs px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-0"}),e.jsx("button",{onClick:_e,disabled:X,className:"text-xs px-2 py-1 text-primary-600 dark:text-primary-400 hover:underline disabled:opacity-50",children:X?"Saving...":"Save"}),J&&e.jsxs("span",{className:"px-2.5 py-1 text-xs rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:["Last: ",new Date(J).toLocaleString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:Ae?e.jsx("button",{onClick:ie,disabled:Z,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50 transition-colors",title:"Stop",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})]})}):e.jsx("button",{onClick:ie,disabled:Z,className:"p-2 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/40 disabled:opacity-50 transition-colors",title:"Start",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})})]})}),$.length>0&&e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Backup File"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 w-24",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:$.map(O=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-mono",children:O})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:Pe(O)}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>Fe(O),className:"p-1.5 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400",title:"Download",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:()=>K(O),className:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400",title:"Delete",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},O))})]})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Restore from Backup"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Restore your database from a JSON backup file"}),e.jsx("p",{className:"mt-1 text-xs text-yellow-600 dark:text-yellow-400",children:" This will replace existing data and cannot be undone"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".json",onChange:Re,className:"hidden",id:"backup-file-input"}),e.jsx("label",{htmlFor:"backup-file-input",className:`inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 text-sm font-medium cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${c||q?"opacity-50 pointer-events-none":""}`,children:q?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Reading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Select File"]})})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[110]",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[!u&&!j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("svg",{className:"animate-spin h-12 w-12 text-primary-500",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Restoring Backup"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Please do not close this page..."})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Restore Complete"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:x}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Reloading page..."})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Restore Failed"}),e.jsx("p",{className:"text-red-500 dark:text-red-400 mb-6",children:j}),e.jsx("button",{onClick:()=>{d(!1),h(null),m(""),y(null),b(null),E(null)},className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium transition-colors",children:"Close"})]})]}),!u&&!j&&e.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700 overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 animate-pulse",style:{width:"100%"}})})]})}),g&&N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Restore Backup"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:"font-medium",children:p==null?void 0:p.name}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:["Version: ",N.meta.version]}),e.jsx("span",{className:"mx-2",children:""}),e.jsxs("span",{children:["Created: ",new Date(N.meta.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-3",children:[e.jsx("button",{onClick:De,className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"Select All"}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),e.jsx("button",{onClick:I,className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400",children:"Deselect All"}),e.jsx("div",{className:"flex-1"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[F.size," table",F.size!==1?"s":""," selected"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:N.preview.map(O=>{const ve=O.tables.filter(me=>me.available),W=ve.every(me=>F.has(me.key)),he=ve.some(me=>F.has(me.key));return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:W,ref:me=>{me&&(me.indeterminate=he&&!W)},onChange:()=>Oe(O),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600",disabled:ve.length===0}),e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider",children:O.group})]}),e.jsx("div",{className:"ml-6 space-y-2",children:O.tables.map(me=>e.jsxs("label",{className:`flex items-center gap-3 ${me.available?"cursor-pointer":"opacity-50"}`,children:[e.jsx("input",{type:"checkbox",checked:F.has(me.key),onChange:()=>Ie(me.key),disabled:!me.available,className:"rounded border-gray-300 dark:border-gray-600 text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:me.label}),e.jsxs("span",{className:`text-sm ${me.count>0?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-400"}`,children:["(",me.count,")"]})]},me.key))})]},O.group)})}),e.jsx("div",{className:"px-6 py-3 bg-red-50 dark:bg-red-900/20 border-t border-red-100 dark:border-red-900/30",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:" Restoring will replace selected data and cannot be undone."})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-end",children:[e.jsx("button",{onClick:Te,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:Ce,disabled:F.size===0,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Restore ",F.size>0&&`(${F.size} tables)`]})]})]})})]})}function Eb({addToast:t,initialMediaType:r,initialSubTab:s}){const[a,n]=i.useState(s||"scan");return e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>n("scan"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${a==="scan"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Import Media"}),e.jsx("button",{onClick:()=>n("arr"),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${a==="arr"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Import from Radarr/Sonarr"})]})}),e.jsxs("div",{className:"p-6",children:[a==="scan"&&e.jsx(mb,{onToast:(l,o)=>t({type:o,message:l}),initialMediaType:r}),a==="arr"&&e.jsx(pb,{onToast:(l,o)=>t({type:o,message:l})})]})]})}function Fb(){const{addToast:t,settings:r,updateSettings:s}=vr(),{settings:a,updateSettings:n}=br(),{timezone:l,setTimezone:o}=rs(),[c]=zl(),[d,x]=i.useState(!0),m=c.get("tab"),[u,f]=i.useState(m||"ui");i.useEffect(()=>{m&&["ui","naming","paths","quality","customformats","indexers","downloads","notifications","lists","import","api","jobs","backup"].includes(m)&&f(m)},[m]);const[j,h]=i.useState(""),[p,y]=i.useState(""),[v,b]=i.useState(""),[g,k]=i.useState(!1),[N,E]=i.useState(!1),[F,_]=i.useState(!1),[q,R]=i.useState(!1),[se,V]=i.useState(!1),[Q,te]=i.useState(!1),[J,ce]=i.useState(!1),[$,U]=i.useState(!1),[X,T]=i.useState(!1),[z,G]=i.useState(null),[Z,de]=i.useState(null),[ye,je]=i.useState(null),[Le,fe]=i.useState(5),[Ne,ie]=i.useState("/data"),[_e,K]=i.useState("/data"),[Fe,Se]=i.useState(null),[Re,Ie]=i.useState([]),[Oe,De]=i.useState(null),[I,Ce]=i.useState(!1),[Te,Pe]=i.useState(null),[Ae,O]=i.useState(null),[ve,W]=i.useState({}),[he,me]=i.useState({propers_repacks_preference:"preferAndUpgrade",delete_empty_folders:!0,unmonitor_deleted_media:!0}),[D,ue]=i.useState(!1);i.useEffect(()=>{ge()},[]);const ge=async()=>{try{const[A,ne,xe,He]=await Promise.all([C.getSettings(),C.getQualityProfiles().catch(()=>[]),C.getNamingConfig().catch(()=>null),C.getFileManagementSettings().catch(()=>({propers_repacks_preference:"preferAndUpgrade",delete_empty_folders:!0,unmonitor_deleted_media:!0}))]);if(Ie(ne||[]),O(xe),me(He),A&&(k(!!A.tmdb_api_key),E(!!A.tvdb_api_key),_(!!A.omdb_api_key),h(""),y(""),b(""),ie(A.movie_path||"/data/media/movies"),K(A.tv_path||"/data/media/tv"),fe(A.concurrent_requests||5),o(A.timezone||"Australia/Sydney"),A.tmdb_api_key&&G({valid:!0,message:"API key configured"}),A.tvdb_api_key&&de({valid:!0,message:"API key configured"}),A.omdb_api_key&&je({valid:!0,message:"API key configured"})),xe){const[B,ae]=await Promise.all([C.previewNaming("movie").catch(()=>({preview:""})),C.previewNaming("episode").catch(()=>({preview:""}))]);W({movie:B.preview,episode:ae.preview})}}catch(A){console.error("Failed to load data:",A)}finally{x(!1)}},H=async()=>{var A,ne;if(!j.trim()){t({type:"warning",message:"Please enter an API key"});return}ce(!0),G(null);try{const xe=await C.testTmdbKey(j);if(G(xe),!xe.valid){t({type:"error",message:xe.message||"Invalid API key - please check and try again"});return}await C.updateSetting("tmdb_api_key",j),t({type:"success",message:"TMDB API key verified and saved!"}),k(!0),R(!1),h("")}catch(xe){G({valid:!1,message:((ne=(A=xe.response)==null?void 0:A.data)==null?void 0:ne.message)||"Test failed"}),t({type:"error",message:"Failed to verify API key"})}finally{ce(!1)}},re=async()=>{var A,ne;if(!p.trim()){t({type:"warning",message:"Please enter an API key"});return}U(!0),de(null);try{const xe=await C.testTvdbKey(p);if(de(xe),!xe.valid){t({type:"error",message:xe.message||"Invalid API key - please check and try again"});return}await C.updateSetting("tvdb_api_key",p),t({type:"success",message:"TVDB API key verified and saved!"}),E(!0),V(!1),y("")}catch(xe){de({valid:!1,message:((ne=(A=xe.response)==null?void 0:A.data)==null?void 0:ne.message)||"Test failed"}),t({type:"error",message:"Failed to verify API key"})}finally{U(!1)}},P=async()=>{var A,ne;if(!v.trim()){t({type:"warning",message:"Please enter an API key"});return}T(!0),je(null);try{const xe=await C.testOmdbKey(v);if(je(xe),!xe.valid){t({type:"error",message:xe.message||"Invalid API key - please check and try again"});return}await C.updateSetting("omdb_api_key",v),t({type:"success",message:"OMDB API key verified and saved!"}),_(!0),te(!1),b("")}catch(xe){je({valid:!1,message:((ne=(A=xe.response)==null?void 0:A.data)==null?void 0:ne.message)||"Test failed"}),t({type:"error",message:"Failed to verify API key"})}finally{T(!1)}},L=async A=>{try{await C.updateSetting("concurrent_requests",A.toString()),fe(A),t({type:"success",message:`Concurrent requests set to ${A}`})}catch{t({type:"error",message:"Failed to save setting"})}},S=async()=>{var A,ne;try{await C.updateSetting("movie_path",Ne),await C.updateSetting("tv_path",_e),t({type:"success",message:"Media paths saved!"})}catch(xe){t({type:"error",message:((ne=(A=xe.response)==null?void 0:A.data)==null?void 0:ne.error)||"Failed to save paths"})}},Y=async()=>{var A,ne;ue(!0);try{await C.updateFileManagementSettings(he),t({type:"success",message:"File management settings saved!"})}catch(xe){t({type:"error",message:((ne=(A=xe.response)==null?void 0:A.data)==null?void 0:ne.error)||"Failed to save settings"})}finally{ue(!1)}};if(d)return e.jsx(at,{maxWidth:"default",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--theme-primary)"}})})});const w=[{label:"General",items:[{id:"ui",label:"UI Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"},{id:"api",label:"API Keys",icon:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}]},{label:"Library",items:[{id:"naming",label:"File Naming",icon:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},{id:"filemanagement",label:"File Management",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{id:"paths",label:"Library Paths",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},{id:"import",label:"Import",icon:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},{id:"lists",label:"Lists",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"}]},{label:"Quality",items:[{id:"quality",label:"Quality Profiles",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"customformats",label:"Custom Formats",icon:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"}]},{label:"Integrations",items:[{id:"indexers",label:"Indexers",icon:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},{id:"downloads",label:"Download Clients",icon:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},{id:"notifications",label:"Notifications",icon:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}]},{label:"System",items:[{id:"jobs",label:"Tasks",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"backup",label:"Backup",icon:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}]}];return e.jsx(at,{maxWidth:"default",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 overflow-hidden sticky top-4",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Settings"})}),e.jsx("nav",{className:"p-2",children:w.map((A,ne)=>e.jsxs("div",{className:ne>0?"mt-4":"",children:[e.jsx("p",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:A.label}),A.items.map(xe=>e.jsxs("button",{onClick:()=>f(xe.id),className:`w-full flex items-center gap-3 px-3 py-2 text-sm transition-colors ${u===xe.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:xe.icon})}),xe.label]},xe.id))]},A.label))})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow border border-gray-200 dark:border-gray-700",children:[u==="quality"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Quality Profiles"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Define quality preferences for downloads"})]}),e.jsx(Ee,{onClick:()=>Ce(!0),children:"Add Profile"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Cutoff"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Upgrades"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Allowed Qualities"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider whitespace-nowrap",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:Re.length===0?e.jsx("tr",{style:{backgroundColor:"var(--card-bg)"},children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center",style:{color:"var(--text-muted)"},children:'No quality profiles configured. Click "Add Profile" to get started.'})}):Re.map(A=>e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>De(A),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:A.name})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded",style:{backgroundColor:A.media_type==="movie"?"#7fc8f8":A.media_type==="series"?"#ea9ab2":"#ffe45e",color:"#000"},children:A.media_type==="movie"?"Movies":A.media_type==="series"?"Series":"Both"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:A.cutoff_quality})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium ${A.upgrade_allowed?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:A.upgrade_allowed?"Yes":"No"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:A.items.filter(ne=>ne.allowed).map((ne,xe)=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",children:ne.quality},xe))})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:ne=>{ne.stopPropagation();const xe={...A,id:"",name:`${A.name} (Copy)`};De(xe),Ce(!0)},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Copy profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{onClick:ne=>{ne.stopPropagation(),Pe(A)},className:"p-1.5 text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors",title:"Delete profile",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},A.id))})]})})})]}),(Oe||I)&&e.jsx(ab,{profile:Oe,isNew:I,onSave:()=>ge(),onClose:()=>{De(null),Ce(!1)}}),e.jsx(cr,{isOpen:!!Te,title:"Delete Quality Profile",message:`Are you sure you want to delete "${Te==null?void 0:Te.name}"? This action cannot be undone.`,confirmText:"Delete",onConfirm:async()=>{if(Te)try{await C.deleteQualityProfile(Te.id),t({message:"Quality profile deleted",type:"success"}),ge()}catch{t({message:"Failed to delete profile",type:"error"})}Pe(null)},onCancel:()=>Pe(null)}),u==="customformats"&&e.jsx("div",{className:"p-6",children:e.jsx(_b,{})}),u==="naming"&&e.jsx(Mb,{namingConfig:Ae,setNamingConfig:O,namingPreview:ve,setNamingPreview:W,moviePath:Ne,setMoviePath:ie,tvPath:_e,setTvPath:K,browsingFor:Fe,setBrowsingFor:Se,handleSavePaths:S,addToast:t}),u==="filemanagement"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"File Management"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure file handling behavior for your library"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Setting"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Value"})]})}),e.jsxs("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:[e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Propers and Repacks"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Whether to automatically upgrade to Propers/Repacks when available"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("select",{value:he.propers_repacks_preference,onChange:A=>me(ne=>({...ne,propers_repacks_preference:A.target.value})),className:"px-3 py-2 text-sm border bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",style:{borderColor:"var(--input-border)"},children:[e.jsx("option",{value:"preferAndUpgrade",children:"Prefer and Upgrade"}),e.jsx("option",{value:"doNotUpgrade",children:"Do not Upgrade Automatically"}),e.jsx("option",{value:"doNotPrefer",children:"Do not Prefer"})]})})]}),e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Unmonitor Deleted Media"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Movies and series deleted from disk are automatically unmonitored"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:he.unmonitor_deleted_media,onChange:A=>me(ne=>({...ne,unmonitor_deleted_media:A.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})})]}),e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Delete Empty Folders"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Delete empty movie/series and season folders during disk scan"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:he.delete_empty_folders,onChange:A=>me(ne=>({...ne,delete_empty_folders:A.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})})]})]})]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Ee,{onClick:Y,disabled:D,children:D?"Saving...":"Save Settings"})})]}),u==="paths"&&e.jsx(Lb,{namingConfig:Ae,setNamingConfig:O,namingPreview:ve,setNamingPreview:W,moviePath:Ne,setMoviePath:ie,tvPath:_e,setTvPath:K,browsingFor:Fe,setBrowsingFor:Se,handleSavePaths:S,addToast:t}),u==="indexers"&&e.jsx("div",{className:"p-6",children:e.jsx(ib,{onToast:(A,ne)=>t({type:ne,message:A})})}),u==="downloads"&&e.jsx("div",{className:"p-6",children:e.jsx(lb,{onToast:(A,ne)=>t({type:ne,message:A})})}),u==="notifications"&&e.jsx("div",{className:"p-6",children:e.jsx(cb,{onToast:(A,ne)=>t({type:ne,message:A})})}),u==="lists"&&e.jsx("div",{className:"p-6",children:e.jsx(xb,{onToast:(A,ne)=>t({type:ne,message:A})})}),u==="import"&&e.jsx(Eb,{addToast:t,initialMediaType:c.get("type")==="tv"?"tv":c.get("type")==="movie"?"movie":void 0,initialSubTab:c.get("source")==="arr"?"arr":"scan"}),u==="api"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"API Keys"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Configure API keys for media metadata services"})]}),e.jsx("div",{className:"border overflow-hidden",style:{borderColor:"var(--border-color)"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)"},children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"API Key"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold uppercase tracking-wider",style:{color:"var(--text-muted)"},children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:[e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"TMDB"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Movies & TV Search"})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"max-w-sm",children:[g&&!q?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm px-3 py-2 border flex-1",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-muted)"},children:""}),e.jsx("button",{onClick:()=>{R(!0),h(""),G(null)},className:"px-3 py-2 text-sm border hover:bg-gray-100 dark:hover:bg-gray-700",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:"Change"})]}):e.jsx($e,{type:"password",value:j,onChange:A=>{h(A.target.value),G(null)},placeholder:"Enter TMDB API key",className:"dark:bg-gray-800/50 font-mono text-sm",autoComplete:"off"}),e.jsx("a",{href:"https://www.themoviedb.org/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-sky-600 dark:text-sky-400 hover:underline mt-1 inline-block",children:"Get API key "})]})}),e.jsx("td",{className:"px-4 py-4",children:z?e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium ${z.valid?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:z.valid?"Connected":"Failed"}):e.jsx("span",{className:"text-xs px-2.5 py-1 bg-gray-100 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Not tested"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(Ee,{onClick:H,disabled:J||!j.trim(),size:"sm",children:J?"Testing...":"Test & Save"})})]}),e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"TVDB"}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Optional"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Episode data for series"})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"max-w-sm",children:[N&&!se?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm px-3 py-2 border flex-1",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-muted)"},children:""}),e.jsx("button",{onClick:()=>{V(!0),y(""),de(null)},className:"px-3 py-2 text-sm border hover:bg-gray-100 dark:hover:bg-gray-700",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:"Change"})]}):e.jsx($e,{type:"password",value:p,onChange:A=>{y(A.target.value),de(null)},placeholder:"Enter TVDB API key",className:"dark:bg-gray-800/50 font-mono text-sm",autoComplete:"off"}),e.jsx("a",{href:"https://thetvdb.com/api-information",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-emerald-600 dark:text-emerald-400 hover:underline mt-1 inline-block",children:"Get API key "})]})}),e.jsx("td",{className:"px-4 py-4",children:Z?e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium ${Z.valid?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:Z.valid?"Connected":"Failed"}):e.jsx("span",{className:"text-xs px-2.5 py-1 bg-gray-100 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Not tested"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(Ee,{onClick:re,disabled:$||!p.trim(),size:"sm",children:$?"Testing...":"Test & Save"})})]}),e.jsxs("tr",{style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"OMDB"}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Optional"})]}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"IMDB ratings for movies"})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"max-w-sm",children:[F&&!Q?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm px-3 py-2 border flex-1",style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-muted)"},children:""}),e.jsx("button",{onClick:()=>{te(!0),b(""),je(null)},className:"px-3 py-2 text-sm border hover:bg-gray-100 dark:hover:bg-gray-700",style:{borderColor:"var(--border-color)",color:"var(--text-primary)"},children:"Change"})]}):e.jsx($e,{type:"password",value:v,onChange:A=>{b(A.target.value),je(null)},placeholder:"Enter OMDB API key",className:"dark:bg-gray-800/50 font-mono text-sm",autoComplete:"off"}),e.jsx("a",{href:"https://www.omdbapi.com/apikey.aspx",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-yellow-600 dark:text-yellow-400 hover:underline mt-1 inline-block",children:"Get API key (free tier: 1000/day) "})]})}),e.jsx("td",{className:"px-4 py-4",children:ye?e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium ${ye.valid?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:ye.valid?"Connected":"Failed"}):e.jsx("span",{className:"text-xs px-2.5 py-1 bg-gray-100 dark:bg-gray-700",style:{color:"var(--text-muted)"},children:"Not tested"})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(Ee,{onClick:P,disabled:X||!v.trim(),size:"sm",children:X?"Testing...":"Test & Save"})})]})]})]})})}),e.jsx("div",{className:"border p-4",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",style:{color:"var(--text-primary)"},children:"Concurrent API Requests"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"Higher values speed up matching and refreshing but may hit API rate limits"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"20",value:Le,onChange:A=>fe(parseInt(A.target.value)),onMouseUp:A=>L(parseInt(A.target.value)),onTouchEnd:A=>L(parseInt(A.target.value)),className:"w-32"}),e.jsx("span",{className:"text-lg font-bold w-8 text-center",style:{color:"var(--text-primary)"},children:Le})]})]})}),e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:"Note"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-1",children:"TMDB is required for all media lookups. TVDB is optional and provides additional episode metadata for TV series."})]})]}),u==="ui"&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--text-primary)"},children:"UI Settings"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-secondary)"},children:"Customize your interface appearance and behavior"})]}),e.jsxs("div",{className:"border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[e.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--hover-bg)"},children:e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Appearance"})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"Theme"}),e.jsx("div",{className:"flex gap-3",children:[{id:"dark",label:"Dark",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})})},{id:"light",label:"Light",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})})},{id:"system",label:"System",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"})})}].map(A=>e.jsxs("button",{onClick:()=>n({theme:A.id}),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all min-w-[80px]",style:{borderColor:a.theme===A.id?"var(--navbar-bg)":"var(--border-color)",backgroundColor:a.theme===A.id?"var(--hover-bg)":"transparent",color:a.theme===A.id?"var(--text-primary)":"var(--text-secondary)"},children:[A.icon,e.jsx("span",{className:"text-xs font-medium",children:A.label})]},A.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"var(--text-primary)"},children:"Accent Color"}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:Ei.map(A=>e.jsx("button",{onClick:()=>n({accentColor:A.id}),className:"w-8 h-8 rounded-full transition-all",style:{backgroundColor:A.color,boxShadow:a.accentColor===A.id?"0 0 0 3px var(--card-bg), 0 0 0 5px "+A.color:"none"},title:A.name},A.id))})]})]})]}),e.jsxs("div",{className:"border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[e.jsx("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--hover-bg)"},children:e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"General"})}),e.jsxs("div",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:[e.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-2 md:gap-8",children:[e.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Timezone"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"For dates and times display"})]}),e.jsxs("select",{value:l,onChange:async A=>{const ne=A.target.value;o(ne);try{await C.updateSetting("timezone",ne),t({type:"success",message:"Timezone updated"})}catch{t({type:"error",message:"Failed to save timezone"})}},className:"flex-1 max-w-xs px-3 py-2 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsxs("optgroup",{label:"Australia",children:[e.jsx("option",{value:"Australia/Sydney",children:"Australia/Sydney"}),e.jsx("option",{value:"Australia/Melbourne",children:"Australia/Melbourne"}),e.jsx("option",{value:"Australia/Brisbane",children:"Australia/Brisbane"}),e.jsx("option",{value:"Australia/Perth",children:"Australia/Perth"}),e.jsx("option",{value:"Australia/Adelaide",children:"Australia/Adelaide"}),e.jsx("option",{value:"Australia/Darwin",children:"Australia/Darwin"}),e.jsx("option",{value:"Australia/Hobart",children:"Australia/Hobart"})]}),e.jsxs("optgroup",{label:"Americas",children:[e.jsx("option",{value:"America/New_York",children:"America/New_York (Eastern)"}),e.jsx("option",{value:"America/Chicago",children:"America/Chicago (Central)"}),e.jsx("option",{value:"America/Denver",children:"America/Denver (Mountain)"}),e.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (Pacific)"}),e.jsx("option",{value:"America/Toronto",children:"America/Toronto"}),e.jsx("option",{value:"America/Vancouver",children:"America/Vancouver"}),e.jsx("option",{value:"America/Sao_Paulo",children:"America/Sao_Paulo"}),e.jsx("option",{value:"America/Mexico_City",children:"America/Mexico_City"})]}),e.jsxs("optgroup",{label:"Europe",children:[e.jsx("option",{value:"Europe/London",children:"Europe/London"}),e.jsx("option",{value:"Europe/Paris",children:"Europe/Paris"}),e.jsx("option",{value:"Europe/Berlin",children:"Europe/Berlin"}),e.jsx("option",{value:"Europe/Rome",children:"Europe/Rome"}),e.jsx("option",{value:"Europe/Madrid",children:"Europe/Madrid"}),e.jsx("option",{value:"Europe/Amsterdam",children:"Europe/Amsterdam"}),e.jsx("option",{value:"Europe/Stockholm",children:"Europe/Stockholm"}),e.jsx("option",{value:"Europe/Moscow",children:"Europe/Moscow"})]}),e.jsxs("optgroup",{label:"Asia",children:[e.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo"}),e.jsx("option",{value:"Asia/Seoul",children:"Asia/Seoul"}),e.jsx("option",{value:"Asia/Shanghai",children:"Asia/Shanghai"}),e.jsx("option",{value:"Asia/Hong_Kong",children:"Asia/Hong_Kong"}),e.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore"}),e.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok"}),e.jsx("option",{value:"Asia/Dubai",children:"Asia/Dubai"}),e.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata"})]}),e.jsxs("optgroup",{label:"Pacific",children:[e.jsx("option",{value:"Pacific/Auckland",children:"Pacific/Auckland"}),e.jsx("option",{value:"Pacific/Fiji",children:"Pacific/Fiji"}),e.jsx("option",{value:"Pacific/Honolulu",children:"Pacific/Honolulu"})]}),e.jsx("optgroup",{label:"Other",children:e.jsx("option",{value:"UTC",children:"UTC"})})]})]}),e.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-2 md:gap-8",children:[e.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[e.jsx("label",{className:"block text-sm font-medium",style:{color:"var(--text-primary)"},children:"Poster Size"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Size on library pages"})]}),e.jsx("div",{children:e.jsx(Hl,{value:a.posterSize,onChange:A=>n({posterSize:A})})})]})]})]}),e.jsxs("div",{className:"border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[e.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--hover-bg)"},children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Dashboard Widgets"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-secondary)"},children:"Toggle widgets shown on the Dashboard"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"var(--text-primary)"},children:"Widget Languages"}),e.jsx("p",{className:"text-xs mb-2",style:{color:"var(--text-secondary)"},children:"Filter discover widgets to show only content in these languages"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese"},{code:"hi",name:"Hindi"},{code:"ru",name:"Russian"},{code:"ar",name:"Arabic"}].map(A=>{const ne=(a.dashboardLanguages||["en"]).includes(A.code);return e.jsx("button",{onClick:()=>{const xe=a.dashboardLanguages||["en"],He=ne?xe.filter(B=>B!==A.code):[...xe,A.code];n({dashboardLanguages:He})},className:"px-3 py-1.5 text-sm rounded-full border transition-colors",style:{backgroundColor:ne?"var(--navbar-bg)":"transparent",borderColor:ne?"var(--navbar-bg)":"var(--border-color)",color:ne?"var(--navbar-text)":"var(--text-secondary)"},children:A.name},A.code)})}),(a.dashboardLanguages||["en"]).length===0&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--text-muted)"},children:"No languages selected - all content will be shown"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"showRecentlyAdded",label:"Recently Added",desc:"New library items",isRoot:!0},{key:"trending",label:"Trending",desc:"Trending this week"},{key:"popularMovies",label:"Popular Movies",desc:"Currently popular"},{key:"upcomingMovies",label:"Upcoming Movies",desc:"Coming soon"},{key:"movieGenres",label:"Movie Genres",desc:"Browse by genre"},{key:"popularSeries",label:"Popular Series",desc:"Currently popular"},{key:"upcomingSeries",label:"On The Air",desc:"Currently airing"},{key:"seriesGenres",label:"TV Genres",desc:"Browse by genre"}].map(A=>{var xe;const ne=A.isRoot?a.showRecentlyAdded:((xe=a.dashboardWidgets)==null?void 0:xe[A.key])??!0;return e.jsxs("label",{className:"flex items-start gap-2 p-2 cursor-pointer border transition-colors",style:{borderColor:ne?"var(--primary-color)":"var(--border-color)",backgroundColor:ne?"var(--primary-color-alpha)":"transparent"},children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:He=>{if(A.isRoot)n({showRecentlyAdded:He.target.checked});else{const B={trending:!0,popularMovies:!0,movieGenres:!0,upcomingMovies:!0,popularSeries:!0,seriesGenres:!0,upcomingSeries:!0},ae=a.dashboardWidgets||B;n({dashboardWidgets:{...ae,[A.key]:He.target.checked}})}},className:"mt-0.5 w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-primary-500 focus:ring-primary-500"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-sm font-medium block",style:{color:"var(--text-primary)"},children:A.label}),e.jsx("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:A.desc})]})]},A.key)})})]})]}),e.jsxs("div",{className:"border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[e.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--hover-bg)"},children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Detail Pages"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-secondary)"},children:"Configure movie and TV show detail page options"})]}),e.jsxs("div",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:[e.jsxs("label",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-opacity-50",style:{backgroundColor:"transparent"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Show Cast"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Display cast members section"})]}),e.jsx("input",{type:"checkbox",checked:a.showCast??!0,onChange:A=>n({showCast:A.target.checked}),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-primary-500 focus:ring-primary-500"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-opacity-50",style:{backgroundColor:"transparent"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:"Show Recommended"}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"Display similar/recommended content on discover pages"})]}),e.jsx("input",{type:"checkbox",checked:a.showSimilar??!0,onChange:A=>n({showSimilar:A.target.checked}),className:"w-5 h-5 rounded border-gray-300 dark:border-gray-600 text-primary-500 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{className:"border",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[e.jsxs("div",{className:"px-4 py-3 border-b",style:{borderColor:"var(--border-color)",backgroundColor:"var(--hover-bg)"},children:[e.jsx("h3",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:"Notifications"}),e.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--text-secondary)"},children:"Configure toast notification duration by type"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs mb-1 flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Success"]}),e.jsxs("select",{value:r.successDuration<0?-1:r.successDuration/1e3,onChange:A=>s({successDuration:Number(A.target.value)===-1?-1:Number(A.target.value)*1e3}),className:"w-full px-2 py-1.5 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:-1,children:"Disabled"}),e.jsx("option",{value:3,children:"3 sec"}),e.jsx("option",{value:5,children:"5 sec"}),e.jsx("option",{value:8,children:"8 sec"}),e.jsx("option",{value:10,children:"10 sec"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs mb-1 flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Info"]}),e.jsxs("select",{value:r.infoDuration<0?-1:r.infoDuration/1e3,onChange:A=>s({infoDuration:Number(A.target.value)===-1?-1:Number(A.target.value)*1e3}),className:"w-full px-2 py-1.5 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:-1,children:"Disabled"}),e.jsx("option",{value:3,children:"3 sec"}),e.jsx("option",{value:5,children:"5 sec"}),e.jsx("option",{value:8,children:"8 sec"}),e.jsx("option",{value:10,children:"10 sec"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs mb-1 flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"})," Warning"]}),e.jsxs("select",{value:r.warningDuration<0?-1:r.warningDuration/1e3,onChange:A=>s({warningDuration:Number(A.target.value)===-1?-1:Number(A.target.value)*1e3}),className:"w-full px-2 py-1.5 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:-1,children:"Disabled"}),e.jsx("option",{value:3,children:"3 sec"}),e.jsx("option",{value:5,children:"5 sec"}),e.jsx("option",{value:8,children:"8 sec"}),e.jsx("option",{value:10,children:"10 sec"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs mb-1 flex items-center gap-1.5",style:{color:"var(--text-secondary)"},children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," Error"]}),e.jsxs("select",{value:r.errorDuration<0?-1:r.errorDuration/1e3,onChange:A=>s({errorDuration:Number(A.target.value)===-1?-1:Number(A.target.value)*1e3}),className:"w-full px-2 py-1.5 text-sm border",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:-1,children:"Disabled"}),e.jsx("option",{value:5,children:"5 sec"}),e.jsx("option",{value:8,children:"8 sec"}),e.jsx("option",{value:10,children:"10 sec"}),e.jsx("option",{value:15,children:"15 sec"})]})]})]})})]})]}),u==="jobs"&&e.jsx(Tb,{}),u==="backup"&&e.jsx(Pb,{addToast:t})]})})]})})}function Vx({currentPage:t,totalItems:r,itemsPerPage:s,onPageChange:a,onItemsPerPageChange:n,itemsPerPageOptions:l=[10,25,50,100]}){const o=Math.ceil(r/s),c=r===0?0:(t-1)*s+1,d=Math.min(t*s,r),x=()=>{const m=[];if(o<=7)for(let f=1;f<=o;f++)m.push(f);else{m.push(1),t>3&&m.push("...");const f=Math.max(2,t-1),j=Math.min(o-1,t+1);for(let h=f;h<=j;h++)m.push(h);t<o-2&&m.push("..."),m.push(o)}return m};return r===0?null:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",style:{borderColor:"var(--border-color)",backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Show"}),e.jsx("select",{value:s,onChange:m=>{n(Number(m.target.value)),a(1)},className:"px-2 py-1 rounded text-sm focus:outline-none focus:ring-2",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--input-border)",color:"var(--input-text)",border:"1px solid var(--input-border)"},children:l.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"per page"})]}),e.jsxs("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Showing ",c," - ",d," of ",r]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>a(t-1),disabled:t===1,className:"p-2 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)"},onMouseOver:m=>t!==1&&(m.currentTarget.style.backgroundColor="var(--hover-bg)"),onMouseOut:m=>m.currentTarget.style.backgroundColor="transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),x().map((m,u)=>e.jsx("button",{onClick:()=>typeof m=="number"&&a(m),disabled:m==="...",className:`min-w-[32px] h-8 px-2 rounded text-sm font-medium transition-colors ${m===t?"ring-2":""}`,style:{backgroundColor:m===t?"var(--btn-primary-bg)":"transparent",color:m===t?"var(--btn-primary-text)":"var(--text-secondary)",cursor:m==="..."?"default":"pointer"},onMouseOver:f=>m!==t&&m!=="..."&&(f.currentTarget.style.backgroundColor="var(--hover-bg)"),onMouseOut:f=>m!==t&&(f.currentTarget.style.backgroundColor="transparent"),children:m},u)),e.jsx("button",{onClick:()=>a(t+1),disabled:t===o,className:"p-2 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{color:"var(--text-secondary)"},onMouseOver:m=>t!==o&&(m.currentTarget.style.backgroundColor="var(--hover-bg)"),onMouseOut:m=>m.currentTarget.style.backgroundColor="transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}function Hx(t=25){const[r,s]=i.useState(1),[a,n]=i.useState(t);return{currentPage:r,setCurrentPage:s,itemsPerPage:a,setItemsPerPage:n,paginateItems:c=>{const d=(r-1)*a;return c.slice(d,d+a)},resetPage:()=>s(1)}}function Ab(){const t=yt(),[r,s]=i.useState([]),[a,n]=i.useState(!0),[l,o]=i.useState("downloading"),[c,d]=i.useState(null),[x,m]=i.useState(null),[u,f]=i.useState(null),{addToast:j}=vr(),{currentPage:h,setCurrentPage:p,itemsPerPage:y,setItemsPerPage:v,paginateItems:b,resetPage:g}=Hx(25),{formatRelativeTime:k}=rs();i.useEffect(()=>{E();const T=setInterval(()=>{N()},5e3);return()=>clearInterval(T)},[l]);const N=async()=>{try{await C.syncDownloads();const T=l==="all"?void 0:l,z=await C.getDownloads(T);s(z)}catch(T){console.error("Failed to sync downloads:",T)}},E=async()=>{try{await C.syncDownloads();const T=l==="all"?void 0:l,z=await C.getDownloads(T);s(z)}catch(T){console.error("Failed to load downloads:",T)}finally{n(!1)}},F=async(T,z=!1)=>{m(T.id);try{await C.cancelDownload(T.id,z),j({type:"success",message:`Cancelled: ${T.title}`}),E()}catch{j({type:"error",message:"Failed to cancel download"})}finally{m(null),d(null)}},_=T=>{const z={queued:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",downloading:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",completed:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",failed:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",importing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"};return z[T]||z.queued},q=T=>{if(!T)return"Unknown";if(T===0)return"0 B";const z=1024,G=["B","KB","MB","GB","TB"],Z=Math.floor(Math.log(T)/Math.log(z));return Math.round(T/Math.pow(z,Z)*100)/100+" "+G[Z]},R=r.filter(T=>T.status==="downloading"||T.status==="importing").length,se=r.filter(T=>T.status==="queued").length,V=r.filter(T=>T.status==="completed").length,Q=r.filter(T=>T.status==="failed").length,te=r.filter(T=>T.import_warning).length,J=async()=>{try{await C.clearDownloads("completed"),j({type:"success",message:"Cleared completed downloads"}),E(),g()}catch{j({type:"error",message:"Failed to clear completed downloads"})}f(null)},ce=async()=>{try{await C.clearDownloads("failed"),j({type:"success",message:"Cleared failed downloads"}),E(),g()}catch{j({type:"error",message:"Failed to clear failed downloads"})}f(null)},$=async()=>{try{await C.clearDownloads("queued"),j({type:"success",message:"Cleared queued downloads"}),E(),g()}catch{j({type:"error",message:"Failed to clear queued downloads"})}f(null)},U=async()=>{try{await C.clearDownloads("all"),j({type:"success",message:"Cleared all downloads"}),E(),g()}catch{j({type:"error",message:"Failed to clear downloads"})}f(null)},X=[{id:"all",label:"All"},{id:"downloading",label:"Active",count:R},{id:"queued",label:"Queued",count:se},{id:"completed",label:"Completed",count:V},{id:"failed",label:"Failed",count:Q}];return a?e.jsx(at,{children:e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Loading..."})}):e.jsxs(at,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Downloads"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Monitor downloads and system activity",R>0&&e.jsxs("span",{className:"ml-2 text-blue-600 dark:text-blue-400 font-medium",children:[" ",R," active"]}),te>0&&e.jsxs("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400 font-medium",children:[" ",te," import warning",te!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-1",children:X.map(T=>e.jsxs("button",{onClick:()=>o(T.id),className:`px-3 py-1 text-sm rounded transition-colors ${l===T.id?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[T.label,T.count!==void 0&&T.count>0&&` (${T.count})`]},T.id))}),e.jsx("div",{className:"flex-1"}),se>0&&e.jsxs("button",{onClick:()=>f({status:"queued",count:se}),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["Clear Queued (",se,")"]}),V>0&&e.jsxs("button",{onClick:()=>f({status:"completed",count:V}),className:"px-3 py-2 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",children:["Clear Completed (",V,")"]}),Q>0&&e.jsxs("button",{onClick:()=>f({status:"failed",count:Q}),className:"px-3 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",children:["Clear Failed (",Q,")"]}),r.length>0&&e.jsx("button",{onClick:()=>f({status:"all",count:r.length}),className:"px-3 py-2 text-sm bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:"Clear All"})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 border",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),e.jsx("p",{className:"mt-2",style:{color:"var(--text-muted)"},children:l==="all"?"No downloads yet":`No ${l} downloads`}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"Start downloads from the movie or series detail pages"})]}):e.jsxs("div",{className:"border overflow-hidden",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:[e.jsx("div",{className:"divide-y",style:{borderColor:"var(--border-color)"},children:b(r).map(T=>{const z=T.media_type==="movie"?!!T.movie_id:!!T.series_id,G=()=>{T.media_type==="movie"&&T.movie_id?t(`/movies/${T.movie_id}`):T.media_type==="tv"&&T.series_id&&t(`/series/${T.series_id}`)};return e.jsx("div",{className:`p-4 ${T.status==="downloading"?"bg-blue-50/50 dark:bg-blue-900/10":""}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-18 bg-gray-200 dark:bg-gray-700 overflow-hidden ${z?"cursor-pointer hover:opacity-80 transition-opacity":""}`,onClick:z?G:void 0,style:{aspectRatio:"2/3"},children:T.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${T.poster_path}`,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:T.media_type==="movie"?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-medium text-gray-900 dark:text-white truncate mb-2 ${z?"cursor-pointer hover:text-primary-500 transition-colors":""}`,onClick:z?G:void 0,children:T.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${_(T.status)}`,children:T.status}),T.import_warning&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300 flex items-center gap-1 cursor-help",title:T.error_message||"Download completed but file was not imported to library. Check volume mappings and logs.",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Import Failed"]}),T.status==="failed"&&T.error_message&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300 flex items-center gap-1 cursor-help max-w-xs truncate",title:T.error_message,children:[e.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"truncate",children:T.error_message})]}),T.quality&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300",children:T.quality}),T.indexer&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300",children:T.indexer}),T.download_client_name&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-cyan-100 text-cyan-800 dark:bg-cyan-900/50 dark:text-cyan-300",children:T.download_client_name}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:q(T.size)}),T.seeders!==null&&T.seeders!==void 0&&e.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400",children:[" ",T.seeders]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:k(T.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${T.status==="downloading"?"bg-blue-600":T.status==="importing"?"bg-yellow-500":T.status==="completed"?"bg-green-600":T.status==="failed"?"bg-red-600":"bg-gray-400"}`,style:{width:`${T.progress}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 w-12 text-right",children:[Math.round(T.progress),"%"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:(T.status==="queued"||T.status==="downloading")&&e.jsx("button",{onClick:()=>d(T),disabled:x===T.id,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors disabled:opacity-50",title:"Cancel download",children:x===T.id?e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})},T.id)})}),e.jsx(Vx,{currentPage:h,totalItems:r.length,itemsPerPage:y,onPageChange:p,onItemsPerPageChange:v})]}),R>0&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:" Progress syncs with download clients every 5 seconds. Completed downloads are automatically imported."})})]}),e.jsx(cr,{isOpen:!!c,title:"Cancel Download",message:`Cancel download of "${c==null?void 0:c.title}"? This will remove it from the download client.`,confirmText:"Cancel Download",onConfirm:()=>c&&F(c,!1),onCancel:()=>d(null)}),e.jsx(cr,{isOpen:!!u,title:`Clear ${(u==null?void 0:u.status)==="all"?"All":u==null?void 0:u.status} Downloads`,message:`Are you sure you want to clear ${u==null?void 0:u.count} ${(u==null?void 0:u.status)==="all"?"":u==null?void 0:u.status} download${(u==null?void 0:u.count)!==1?"s":""}? This cannot be undone.`,confirmText:"Clear",onConfirm:()=>{(u==null?void 0:u.status)==="completed"?J():(u==null?void 0:u.status)==="failed"?ce():(u==null?void 0:u.status)==="queued"?$():(u==null?void 0:u.status)==="all"&&U()},onCancel:()=>f(null)})]})}function Db(){const t=yt(),{formatRelativeTime:r,formatDateTime:s}=rs(),[a,n]=i.useState([]),[l,o]=i.useState(!0),[c,d]=i.useState("all"),{currentPage:x,setCurrentPage:m,itemsPerPage:u,setItemsPerPage:f,paginateItems:j,resetPage:h}=Hx(25),p=i.useCallback(async()=>{try{o(!0);const N=await C.getRecentActivity(500);n(N||[])}catch(N){console.error("Failed to load activity:",N)}finally{o(!1)}},[]);i.useEffect(()=>{p()},[p]);const y=c==="all"?a:a.filter(N=>N.event_type===c),v=j(y),b=[...new Set(a.map(N=>N.event_type))],g=N=>{const E={added:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),color:"text-emerald-600",bg:"bg-emerald-100"},grabbed:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),color:"text-violet-600",bg:"bg-violet-100"},downloaded:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),color:"text-blue-600",bg:"bg-blue-100"},imported:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),color:"text-green-600",bg:"bg-green-100"},renamed:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),color:"text-indigo-600",bg:"bg-indigo-100"},deleted:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),color:"text-red-600",bg:"bg-red-100"},scan_completed:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),color:"text-amber-600",bg:"bg-amber-100"},metadata_refreshed:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),color:"text-cyan-600",bg:"bg-cyan-100"},unmonitored:{icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),color:"text-gray-600",bg:"bg-gray-100"}};return E[N]||{icon:E.added.icon,color:"text-gray-600",bg:"bg-gray-100"}},k=N=>{N.entity_type==="movie"?t(`/movies/${N.entity_id}`):N.entity_type==="series"&&t(`/series/${N.entity_id}`)};return e.jsx(at,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Library events and changes"})]}),e.jsxs("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-1",children:[e.jsx("button",{onClick:()=>{d("all"),h()},className:`px-3 py-1 text-sm rounded transition-colors ${c==="all"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"All"}),b.map(N=>e.jsx("button",{onClick:()=>{d(N),h()},className:`px-3 py-1 text-sm rounded transition-colors capitalize ${c===N?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:N.replace(/_/g," ")},N))]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden",children:l?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsxs("svg",{className:"w-8 h-8 mx-auto mb-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading activity..."]}):v.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("p",{children:"No activity found"})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50",children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Time"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:v.map(N=>{const E=g(N.event_type);return e.jsxs("tr",{onClick:()=>k(N),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg ${E.bg} ${E.color} flex items-center justify-center`,children:E.icon}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.event_label||N.event_type.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-xs font-medium capitalize ${N.entity_type==="movie"?"bg-blue-100 text-blue-700":N.entity_type==="series"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:N.entity_type})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("p",{className:"text-sm text-gray-600 max-w-md truncate",children:N.message})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-500",title:s(N.created_at),children:r(N.created_at)})})]},N.id)})})]})})}),y.length>u&&e.jsx(Vx,{currentPage:x,totalItems:y.length,itemsPerPage:u,onPageChange:m,onItemsPerPageChange:N=>{f(N),h()}})]})})}function Rb(){const t=yt(),{settings:r,updateSettings:s}=br(),[a,n]=i.useState([]),[l,o]=i.useState(!0),[c,d]=i.useState("all"),x=r.posterSize||5,m=Nu[x]||Nu[5],u=h=>s({posterSize:h});i.useEffect(()=>{f()},[]);const f=async()=>{o(!0);try{const h=await C.getRecentlyAdded(100);n(h||[])}catch(h){console.error("Failed to load recently added:",h)}finally{o(!1)}},j=a.filter(h=>c==="all"?!0:c==="movies"?h.type==="movie":c==="series"?h.type==="series":!0);return e.jsx(at,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Recently Added"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-1 p-1 rounded-lg",style:{backgroundColor:"var(--surface-bg)"},children:[{key:"all",label:"All"},{key:"movies",label:"Movies"},{key:"series",label:"TV Series"}].map(h=>e.jsx("button",{onClick:()=>d(h.key),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors",style:{backgroundColor:c===h.key?"var(--navbar-bg)":"transparent",color:c===h.key?"var(--navbar-text)":"var(--text-secondary)"},children:h.label},h.key))}),e.jsx(Hl,{value:x,onChange:u})]})]}),l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--navbar-bg)"}})}):j.length===0?e.jsxs("div",{className:"text-center py-12",style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("svg",{className:"mx-auto h-12 w-12 mb-4",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("p",{style:{color:"var(--text-secondary)"},children:"No recently added items"}),e.jsx("button",{onClick:()=>t("/discover"),className:"mt-3 text-sm font-medium hover:opacity-80",style:{color:"var(--navbar-bg)"},children:"Start adding media "})]}):e.jsx("div",{className:`grid ${m.grid} gap-4`,children:j.map(h=>e.jsxs("div",{onClick:()=>t(h.type==="movie"?`/movies/${h.id}`:`/series/${h.id}`),className:"group cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-[2/3] rounded-lg overflow-hidden border transition-all duration-200 group-hover:border-2",style:{borderColor:"var(--border-color)",backgroundColor:"var(--surface-bg)"},children:[h.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${h.poster_path}`,alt:h.title||h.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--hover-bg)"},children:e.jsx("svg",{className:"w-12 h-12",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.type==="movie"?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-2 left-2 px-1.5 py-0.5 rounded text-[10px] font-medium",style:{backgroundColor:h.type==="movie"?"rgba(16, 185, 129, 0.9)":"rgba(139, 92, 246, 0.9)",color:"white"},children:h.type==="movie"?"Movie":"TV"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-sm font-medium truncate group-hover:opacity-80",style:{color:"var(--text-primary)"},children:h.title||h.name}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:h.year||(h.first_air_date?new Date(h.first_air_date).getFullYear():"")})]})]},`${h.type}-${h.id}`))})]})})}function Ib(){const{addToast:t}=vr(),r=yt(),[s,a]=i.useState("movies"),[n,l]=i.useState(null),[o,c]=i.useState(!0),[d,x]=i.useState(null),[m,u]=i.useState([]),[f,j]=i.useState([]),[h,p]=i.useState(!1),[y,v]=i.useState(!1),[b,g]=i.useState(""),[k,N]=i.useState(""),[E,F]=i.useState(""),[_,q]=i.useState(""),[R,se]=i.useState(""),[V,Q]=i.useState(""),[te,J]=i.useState(""),[ce,$]=i.useState(""),[U,X]=i.useState(""),[T,z]=i.useState(""),[G,Z]=i.useState(""),[de,ye]=i.useState(""),[je,Le]=i.useState(""),[fe,Ne]=i.useState(!1),[ie,_e]=i.useState(!1),[K,Fe]=i.useState(!1),[Se,Re]=i.useState(!1),[Ie,Oe]=i.useState("file_size"),[De,I]=i.useState("desc"),[Ce,Te]=i.useState(new Set),[Pe,Ae]=i.useState(null);i.useEffect(()=>{O(),ve()},[]);const O=async()=>{c(!0);try{const P=await C.getReportFilterOptions();l(P)}catch(P){console.error("Failed to load filter options:",P),t({type:"error",message:"Failed to load filter options"})}finally{c(!1)}},ve=async()=>{try{const P=await C.getReportStats();x(P)}catch(P){console.error("Failed to load stats:",P)}},W=async()=>{p(!0),v(!0);try{if(s==="movies"){const P=await C.searchReportMovies({quality:b||void 0,resolution:k||void 0,videoCodec:E||void 0,audioCodec:_||void 0,hdrType:R||void 0,audioChannels:V||void 0,releaseGroup:te||void 0,yearFrom:ce?parseInt(ce):void 0,yearTo:U?parseInt(U):void 0,ratingFrom:T?parseFloat(T):void 0,ratingTo:G?parseFloat(G):void 0,sizeFrom:de?parseFloat(de):void 0,sizeTo:je?parseFloat(je):void 0,titleMismatch:fe||void 0,multipleFiles:ie||void 0,missingFile:K||void 0,noRating:Se||void 0,sortBy:Ie,sortDir:De,limit:500});u(P.items)}else{const P=await C.searchReportEpisodes({quality:b||void 0,videoCodec:E||void 0,audioCodec:_||void 0,sizeFrom:de?parseFloat(de):void 0,sizeTo:je?parseFloat(je):void 0,sortBy:Ie,sortDir:De,limit:500});j(P.items)}}catch(P){console.error("Search failed:",P),t({type:"error",message:"Search failed"})}finally{p(!1)}},he=()=>{g(""),N(""),F(""),q(""),se(""),Q(""),J(""),$(""),X(""),z(""),Z(""),ye(""),Le(""),Ne(!1),_e(!1),Fe(!1),Re(!1)},me=P=>{if(!P||P===0)return"";const L=P/(1024*1024*1024*1024);if(L>=1)return`${L.toFixed(2)} TB`;const S=P/(1024*1024*1024);return S>=1?`${S.toFixed(2)} GB`:`${(P/(1024*1024)).toFixed(0)} MB`},D=P=>{Te(L=>{const S=new Set(L);return S.has(P)?S.delete(P):S.add(P),S})},ue=async()=>{if(Pe){try{Pe.type==="movie"&&Pe.movieId?(await C.deleteMovieFile(Pe.movieId,Pe.id),t({type:"success",message:"File deleted"}),W(),ve()):Pe.type==="episode"&&(await C.deleteEpisodeFile(Pe.id),t({type:"success",message:"Episode file deleted"}),W(),ve())}catch{t({type:"error",message:"Failed to delete file"})}Ae(null)}},ge=P=>{Ie===P?I(L=>L==="asc"?"desc":"asc"):(Oe(P),I("desc"))},H=({field:P})=>e.jsx("span",{className:"ml-1",children:Ie===P?De==="asc"?"":"":e.jsx("span",{className:"text-gray-300",children:""})}),re="w-full px-3 py-2 rounded-lg border text-sm";return e.jsxs(at,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:"var(--text-primary)"},children:"Library Reports"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"var(--text-muted)"},children:"Search and filter media files by metadata"})]})}),d&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"Movies"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:d.movies.total}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:me(d.movies.totalSize)})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"With Files"}),e.jsx("p",{className:"text-xl font-bold text-green-500",children:d.movies.withFiles}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:[d.movies.totalFiles," files"]})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"Multiple Files"}),e.jsx("p",{className:"text-xl font-bold text-yellow-500",children:d.movies.multipleFiles}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:"movies"})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"TV Series"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:d.series.total}),e.jsx("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:me(d.series.totalSize)})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"Episodes"}),e.jsx("p",{className:"text-xl font-bold text-green-500",children:d.series.episodesWithFiles}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-secondary)"},children:["of ",d.series.totalEpisodes]})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("p",{className:"text-xs uppercase",style:{color:"var(--text-muted)"},children:"Total Size"}),e.jsx("p",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:me(d.movies.totalSize+d.series.totalSize)})]})]}),e.jsxs("div",{className:"flex gap-2 border-b",style:{borderColor:"var(--border-color)"},children:[e.jsx("button",{onClick:()=>{a("movies"),v(!1)},className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors ${s==="movies"?"border-current":"border-transparent hover:border-gray-300"}`,style:{color:s==="movies"?"var(--navbar-bg)":"var(--text-secondary)"},children:"Movies"}),e.jsx("button",{onClick:()=>{a("episodes"),v(!1)},className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px transition-colors ${s==="episodes"?"border-current":"border-transparent hover:border-gray-300"}`,style:{color:s==="episodes"?"var(--navbar-bg)":"var(--text-secondary)"},children:"Episodes"})]}),e.jsxs("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--card-bg)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Filters"}),e.jsx("button",{onClick:he,className:"text-sm px-3 py-1 rounded",style:{color:"var(--text-secondary)"},children:"Clear All"})]}),o?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2",style:{borderColor:"var(--navbar-bg)"}})}):n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Quality"}),e.jsxs("select",{value:b,onChange:P=>g(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.qualities.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),s==="movies"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Resolution"}),e.jsxs("select",{value:k,onChange:P=>N(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.resolutions.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Video Codec"}),e.jsxs("select",{value:E,onChange:P=>F(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.videoCodecs.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Audio Codec"}),e.jsxs("select",{value:_,onChange:P=>q(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.audioCodecs.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),s==="movies"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"HDR Type"}),e.jsxs("select",{value:R,onChange:P=>se(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.hdrTypes.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Audio Channels"}),e.jsxs("select",{value:V,onChange:P=>Q(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.audioChannels.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Release Group"}),e.jsxs("select",{value:te,onChange:P=>J(P.target.value),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"Any"}),n.releaseGroups.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]})]}),s==="movies"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Year From"}),e.jsx("input",{type:"number",value:ce,onChange:P=>$(P.target.value),placeholder:String(n.yearRange.min),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Year To"}),e.jsx("input",{type:"number",value:U,onChange:P=>X(P.target.value),placeholder:String(n.yearRange.max),className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Rating From"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"10",value:T,onChange:P=>z(P.target.value),placeholder:"0",className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Rating To"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"10",value:G,onChange:P=>Z(P.target.value),placeholder:"10",className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Size From (GB)"}),e.jsx("input",{type:"number",step:"0.1",value:de,onChange:P=>ye(P.target.value),placeholder:"0",className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Size To (GB)"}),e.jsx("input",{type:"number",step:"0.1",value:je,onChange:P=>Le(P.target.value),placeholder:"100",className:re,style:{backgroundColor:"var(--surface-bg)",borderColor:"var(--border-color)",color:"var(--text-primary)"}})]})]}),s==="movies"&&e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 pt-2 border-t",style:{borderColor:"var(--border-color)"},children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:P=>_e(P.target.checked),className:"rounded",style:{accentColor:"var(--navbar-bg)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:"Multiple Files"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:fe,onChange:P=>Ne(P.target.checked),className:"rounded",style:{accentColor:"var(--navbar-bg)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:"Title Mismatch"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:K,onChange:P=>Fe(P.target.checked),className:"rounded",style:{accentColor:"var(--navbar-bg)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:"Missing File"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Se,onChange:P=>Re(P.target.checked),className:"rounded",style:{accentColor:"var(--navbar-bg)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--text-primary)"},children:"No Rating"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:W,disabled:h,className:"px-6 py-2 rounded-lg font-medium text-white disabled:opacity-50",style:{backgroundColor:"var(--navbar-bg)"},children:h?"Searching...":"Search"})})]})]}),y&&e.jsx("div",{className:"rounded-lg overflow-hidden border",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"var(--navbar-bg)"}})}):e.jsxs(e.Fragment,{children:[s==="movies"&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("title"),className:"flex items-center hover:text-gray-900",children:["Title ",e.jsx(H,{field:"title"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("year"),className:"flex items-center hover:text-gray-900",children:["Year ",e.jsx(H,{field:"year"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"Files"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("file_size"),className:"flex items-center hover:text-gray-900",children:["Size ",e.jsx(H,{field:"file_size"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("quality"),className:"flex items-center hover:text-gray-900",children:["Quality ",e.jsx(H,{field:"quality"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"Video"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"Audio"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("rating"),className:"flex items-center hover:text-gray-900",children:["Rating ",e.jsx(H,{field:"rating"})]})}),e.jsx("th",{className:"px-4 py-3 text-center font-medium",style:{color:"var(--text-secondary)"},children:"Actions"})]})}),e.jsxs("tbody",{children:[m.map(P=>{var L;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer",style:{borderColor:"var(--border-color)"},onClick:()=>P.file_count>0&&D(P.id),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[P.file_count>0&&e.jsx("span",{className:"text-gray-400 w-4",children:Ce.has(P.id)?"":""}),P.poster_path?e.jsx("img",{src:Kt(P.poster_path,"w92")||"",alt:"",className:"w-8 h-12 object-cover rounded"}):e.jsx("div",{className:"w-8 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-xs text-gray-400",children:"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:P.title}),e.jsx("p",{className:"text-xs truncate max-w-xs",style:{color:"var(--text-muted)"},children:P.folder_path})]})]})}),e.jsx("td",{className:"px-4 py-3",style:{color:"var(--text-secondary)"},children:P.year||""}),e.jsx("td",{className:"px-4 py-3",children:P.file_count>1?e.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",children:[P.file_count," files"]}):P.file_count===1?e.jsx("span",{className:"text-gray-500",children:"1"}):e.jsx("span",{className:"text-red-500",children:""})}),e.jsx("td",{className:"px-4 py-3 font-mono",style:{color:"var(--text-secondary)"},children:me(P.total_size)}),e.jsx("td",{className:"px-4 py-3",children:(L=P.files[0])!=null&&L.quality?e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:P.files[0].quality}):""}),e.jsx("td",{className:"px-4 py-3 text-xs",style:{color:"var(--text-secondary)"},children:P.files[0]?e.jsxs("div",{children:[e.jsx("div",{children:P.files[0].video_codec||""}),P.files[0].video_dynamic_range&&e.jsx("div",{className:"text-yellow-600 dark:text-yellow-400",children:P.files[0].video_dynamic_range})]}):""}),e.jsx("td",{className:"px-4 py-3 text-xs",style:{color:"var(--text-secondary)"},children:P.files[0]?e.jsx("div",{children:e.jsxs("div",{children:[P.files[0].audio_codec||""," ",P.files[0].audio_channels||""]})}):""}),e.jsx("td",{className:"px-4 py-3",children:P.vote_average?e.jsxs("span",{className:"text-yellow-500",children:[" ",P.vote_average.toFixed(1)]}):""}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:S=>{S.stopPropagation(),r(`/movies/${P.id}`)},className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"View details",children:e.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),P.files.length>0&&e.jsx("button",{onClick:S=>{S.stopPropagation(),Ae({type:"movie",id:P.files[0].id,movieId:P.id,title:P.title})},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete file",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},P.id),Ce.has(P.id)&&P.files.map((S,Y)=>e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800/30 border-t",style:{borderColor:"var(--border-color)"},children:e.jsxs("td",{colSpan:9,className:"px-4 py-3 pl-16",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"File:"}),e.jsx("p",{className:"truncate",style:{color:"var(--text-primary)"},children:S.relative_path||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Size:"}),e.jsx("p",{style:{color:"var(--text-primary)"},children:me(S.file_size)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Resolution:"}),e.jsx("p",{style:{color:"var(--text-primary)"},children:S.resolution||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Release Group:"}),e.jsx("p",{style:{color:"var(--text-primary)"},children:S.release_group||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Subtitles:"}),e.jsx("p",{style:{color:"var(--text-primary)"},children:S.subtitle_languages||""})]})]}),P.files.length>1&&e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{onClick:w=>{w.stopPropagation(),Ae({type:"movie",id:S.id,movieId:P.id,title:`${P.title} - ${S.relative_path}`})},className:"text-xs px-2 py-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:"Delete this file"})})]})},`${P.id}-${Y}`))]})}),m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-12 text-center",style:{color:"var(--text-muted)"},children:"No movies found matching filters"})})]})]})}),m.length>0&&e.jsxs("div",{className:"px-4 py-2 border-t text-sm",style:{borderColor:"var(--border-color)",color:"var(--text-muted)"},children:["Found ",m.length," movies"]})]}),s==="episodes"&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"var(--surface-bg)"},children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("title"),className:"flex items-center hover:text-gray-900",children:["Episode ",e.jsx(H,{field:"title"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("file_size"),className:"flex items-center hover:text-gray-900",children:["Size ",e.jsx(H,{field:"file_size"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:e.jsxs("button",{onClick:()=>ge("quality"),className:"flex items-center hover:text-gray-900",children:["Quality ",e.jsx(H,{field:"quality"})]})}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"Video"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"Audio"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium",style:{color:"var(--text-secondary)"},children:"File"}),e.jsx("th",{className:"px-4 py-3 text-center font-medium",style:{color:"var(--text-secondary)"},children:"Actions"})]})}),e.jsxs("tbody",{children:[f.map(P=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-gray-800/50",style:{borderColor:"var(--border-color)"},children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[P.poster_path?e.jsx("img",{src:Kt(P.poster_path,"w92")||"",alt:"",className:"w-8 h-12 object-cover rounded"}):e.jsx("div",{className:"w-8 h-12 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center text-xs text-gray-400",children:"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:P.series_title}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:["S",String(P.season_number).padStart(2,"0"),"E",String(P.episode_number).padStart(2,"0")," - ",P.episode_title]})]})]})}),e.jsx("td",{className:"px-4 py-3 font-mono",style:{color:"var(--text-secondary)"},children:me(P.file_size)}),e.jsx("td",{className:"px-4 py-3",children:P.quality?e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",children:P.quality}):""}),e.jsx("td",{className:"px-4 py-3 text-xs",style:{color:"var(--text-secondary)"},children:P.video_codec||""}),e.jsx("td",{className:"px-4 py-3 text-xs",style:{color:"var(--text-secondary)"},children:P.audio_codec||""}),e.jsx("td",{className:"px-4 py-3 text-xs truncate max-w-xs",style:{color:"var(--text-muted)"},children:P.file_path||""}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>r(`/series/${P.series_id}`),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:"View series",children:e.jsxs("svg",{className:"w-4 h-4",style:{color:"var(--text-secondary)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>Ae({type:"episode",id:P.id,title:`${P.series_title} S${P.season_number}E${P.episode_number}`}),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete file",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},P.id)),f.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-12 text-center",style:{color:"var(--text-muted)"},children:"No episodes found matching filters"})})]})]})}),f.length>0&&e.jsxs("div",{className:"px-4 py-2 border-t text-sm",style:{borderColor:"var(--border-color)",color:"var(--text-muted)"},children:["Found ",f.length," episodes"]})]})]})}),!y&&!o&&e.jsxs("div",{className:"rounded-lg p-12 text-center",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",style:{color:"var(--text-muted)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text-primary)"},children:"Search Your Library"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Use the filters above to search for movies and episodes by quality, codec, size, and more."})]})]}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",style:{backgroundColor:"var(--card-bg)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Delete File"}),e.jsxs("p",{className:"text-sm mb-4",style:{color:"var(--text-secondary)"},children:["Are you sure you want to delete the file for ",e.jsx("strong",{children:Pe.title}),"? This will permanently remove the file from disk."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>Ae(null),className:"px-4 py-2 text-sm rounded-lg",style:{backgroundColor:"var(--surface-bg)",color:"var(--text-secondary)"},children:"Cancel"}),e.jsx("button",{onClick:ue,className:"px-4 py-2 text-sm rounded-lg bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})}function Bb({children:t}){return uv(),e.jsx(e.Fragment,{children:t})}function bt({children:t}){const{isAuthenticated:r,loading:s}=an();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--theme-background)"},children:e.jsx("div",{className:"text-xl",style:{color:"var(--theme-text)"},children:"Loading..."})}):r?e.jsx(e.Fragment,{children:t}):e.jsx(fl,{to:"/login"})}function Uu({children:t}){const{isAuthenticated:r,loading:s}=an();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--theme-background)"},children:e.jsx("div",{className:"text-xl",style:{color:"var(--theme-text)"},children:"Loading..."})}):r?e.jsx(fl,{to:"/dashboard"}):e.jsx(e.Fragment,{children:t})}function zb(){return e.jsx(Sf,{children:e.jsx(Bb,{children:e.jsx(dv,{children:e.jsx(fv,{children:e.jsx(yv,{children:e.jsx(kv,{children:e.jsx(xv,{children:e.jsxs(ff,{children:[e.jsx(rt,{path:"/login",element:e.jsx(Uu,{children:e.jsx(Nv,{})})}),e.jsx(rt,{path:"/register",element:e.jsx(Uu,{children:e.jsx(Cv,{})})}),e.jsx(rt,{path:"/dashboard",element:e.jsx(bt,{children:e.jsx(Ev,{})})}),e.jsx(rt,{path:"/discover",element:e.jsx(bt,{children:e.jsx(zv,{})})}),e.jsx(rt,{path:"/discover/movie/:id",element:e.jsx(bt,{children:e.jsx(_n,{})})}),e.jsx(rt,{path:"/discover/tv/:id",element:e.jsx(bt,{children:e.jsx(_n,{})})}),e.jsx(rt,{path:"/search",element:e.jsx(bt,{children:e.jsx(Jv,{})})}),e.jsx(rt,{path:"/movies",element:e.jsx(bt,{children:e.jsx(eb,{})})}),e.jsx(rt,{path:"/movies/:id",element:e.jsx(bt,{children:e.jsx(_n,{})})}),e.jsx(rt,{path:"/series",element:e.jsx(bt,{children:e.jsx(rb,{})})}),e.jsx(rt,{path:"/series/:id",element:e.jsx(bt,{children:e.jsx(_n,{})})}),e.jsx(rt,{path:"/:mediaType/:id/cast-crew",element:e.jsx(bt,{children:e.jsx(Kv,{})})}),e.jsx(rt,{path:"/person/:id",element:e.jsx(bt,{children:e.jsx(Gv,{})})}),e.jsx(rt,{path:"/calendar",element:e.jsx(bt,{children:e.jsx(sb,{})})}),e.jsx(rt,{path:"/recently-added",element:e.jsx(bt,{children:e.jsx(Rb,{})})}),e.jsx(rt,{path:"/downloads",element:e.jsx(bt,{children:e.jsx(Ab,{})})}),e.jsx(rt,{path:"/recent-activity",element:e.jsx(bt,{children:e.jsx(Db,{})})}),e.jsx(rt,{path:"/activity",element:e.jsx(fl,{to:"/downloads"})}),e.jsx(rt,{path:"/settings",element:e.jsx(bt,{children:e.jsx(Fb,{})})}),e.jsx(rt,{path:"/reports",element:e.jsx(bt,{children:e.jsx(Ib,{})})}),e.jsx(rt,{path:"/",element:e.jsx(fl,{to:"/dashboard"})})]})})})})})})})})}To.createRoot(document.getElementById("root")).render(e.jsx(Ii.StrictMode,{children:e.jsx(zb,{})}));
